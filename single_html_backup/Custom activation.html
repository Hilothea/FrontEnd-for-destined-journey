<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>异世界转生手续办理处</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Noto+Serif+SC:wght@400;500&display=swap');

    :root {
      --bg-color: #f5efe6;
      --text-color: #4a3b31;
      --border-color-light: #d3c5b3;
      --border-color-strong: #785a4e;
      --title-color: #5d4037;
      --input-bg-color: rgba(253, 250, 245, 0.9);
      --button-bg-color: #d7c8b6;
      --font-title: 'Cinzel', serif;
      --font-body: 'Noto Serif SC', serif;
      --placeholder-color: #9e8a7e;
      --points-color: #b22222;
    }

    body {
      font-family: var(--font-body);
      background-color: var(--bg-color);
      color: var(--text-color);
      margin: 0;
      padding: 20px;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAMAAAAp4XiGAAAAA3RFWHRDcmVhdGlvbiBUaW1lADE2NTEyNjIxMjEyMWtYJ+B0AAAAclBMVEVsbGz////v7+/MzMzj4+Pp6enh4eH8/Pz5+fnv7+/w8PDi4uLt7e3m5ub09PTx8fHk5OTZ2dnJycmrq6vT09Pm5ubU1NS/v7/x8fHe3t7c3Nzc3Nzs7OzLy8vo6OjIyMiampoVFRXCwsI4ODgjIyP9/f3///+m9s3nAAAAEHRSTlMAAQIDBAVGh4uNjpCVmJ+goaqssba5v8DBw8XLzP3+uK6o8AAAAXFJREFUSMftlWd3gjAQhp0ZJCiCEFzOaXv9PyiE9pS90Ie3d1p1n7nQ0/kF43wY0Q/2MDCzFh4YAEUOFoDEe4EATD1QgG0C+gB1gC9QAAKGDWjT0qT2pFuE3XnrSa9Tq+0B2H9r2m0T7Q0AAMCpUQT+wufNmJgAgGr+C5+D11rK/AHAQhR2BgcAAICBEAxNs2v2FQC4131sHxIBBggD14VpAwAAwPYGg4jWn+4CgGpyc0cAwD4A/l0bAQCEiM+e/a2pAK4MwPAHCxogwPcgYGAAlzZgH5L9aHroqOnHkQM+ku38x/cWl482A/zJ3y0GAOg++k9V/71V2gAAq0V/fImbAAAAAElFTnoGM2vAAAAAElFTkSuQmCC');
      background-repeat: repeat;
    }

    .creator-scroll {
      border: 2px solid var(--border-color-strong);
      border-radius: 0;
      padding: 25px 30px;
      background-color: rgba(240, 230, 210, 0.9);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
      max-width: 550px;
      width: 95%;
      margin: auto;
      max-height: 90vh;
      overflow-y: auto;
    }

    .creator-scroll::-webkit-scrollbar {
      width: 0;
    }

    .creator-scroll {
      -ms-overflow-style: none;
      scrollbar-width: none;
    }

    .main-title {
      font-family: var(--font-title);
      font-weight: 700;
      color: var(--title-color);
      text-align: center;
      font-size: 1.8em;
      letter-spacing: 2px;
      margin: 0 0 25px 0;
    }

    .reincarnation-points {
      font-family: var(--font-title);
      font-weight: 700;
      color: var(--points-color);
      font-size: 1em;
      padding: 8px;
      background-color: var(--button-bg-color);
      border: 1px solid var(--border-color-strong);
      border-radius: 0;
      text-align: center;
      margin: 0;
      width: 100%;
      box-sizing: border-box;
    }

    .reincarnation-points-inline {
      font-size: 0.9em;
      font-weight: 500;
      color: var(--text-color);
    }

    .input-group {
      margin-bottom: 18px;
    }

    label {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
      font-weight: 500;
      color: var(--title-color);
      font-size: 1.05em;
    }

    input[type='text'],
    input[type='number'],
    select,
    textarea {
      width: 100%;
      padding: 10px 12px;
      border: 1px solid var(--border-color-light);
      border-radius: 0;
      background-color: var(--input-bg-color);
      color: var(--text-color);
      font-family: var(--font-body);
      font-size: 1em;
      box-sizing: border-box;
      transition: border-color 0.2s, box-shadow 0.2s;
      resize: vertical;
    }

    input[type='range'] {
      -webkit-appearance: none;
      appearance: none;
      width: calc(100% - 70px);
      height: 8px;
      background: var(--border-color-light);
      border-radius: 0;
      outline: none;
      cursor: pointer;
      vertical-align: middle;
      margin-right: 10px;
      display: inline-block;
    }

    input[type='range']::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 20px;
      height: 20px;
      border-radius: 0;
      background: var(--title-color);
      cursor: pointer;
      border: 2px solid var(--border-color-strong);
      transition: background 0.15s ease-in-out;
    }

    input[type='range']::-moz-range-thumb {
      width: 20px;
      height: 20px;
      border-radius: 0;
      background: var(--title-color);
      cursor: pointer;
      border: 2px solid var(--border-color-strong);
      transition: background 0.15s ease-in-out;
    }

    .level-control,
    .destiny-points-control {
      display: flex;
      align-items: center;
    }

    .level-control input[type='number'],
    .destiny-points-control input[type='number'] {
      width: 60px;
      text-align: center;
      padding: 5px 8px;
    }

    .attributes-container {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      margin-top: 10px;
    }

    .attribute-control {
      display: flex;
      align-items: center;
      justify-content: space-between;
      background-color: var(--input-bg-color);
      padding: 5px 10px;
      border: 1px solid var(--border-color-light);
    }

    .attribute-control .stat-name {
      font-weight: 500;
      flex-basis: 25%;
    }

    .attribute-control .stat-value {
      font-weight: bold;
      color: var(--title-color);
      flex-basis: 15%;
      text-align: center;
    }

    .attribute-control .ap-buttons {
      display: flex;
      align-items: center;
      flex-basis: 40%;
      justify-content: center;
    }

    .attribute-control .ap-btn {
      background-color: var(--button-bg-color);
      border: 1px solid var(--border-color-strong);
      color: var(--text-color);
      font-weight: bold;
      cursor: pointer;
      width: 25px;
      height: 25px;
      line-height: 22px;
      text-align: center;
      transition: background-color 0.2s;
    }

    .attribute-control .ap-btn:hover {
      background-color: #c6b8a5;
    }

    .attribute-control .ap-btn:disabled {
      background-color: #e0e0e0;
      cursor: not-allowed;
      opacity: 0.6;
    }

    .attribute-control .ap-input {
      width: 50px;
      text-align: center;
      border: none;
      background: transparent;
      margin: 0 5px;
      font-weight: 500;
      color: var(--points-color);
      -moz-appearance: textfield;
      appearance: textfield;
    }

    .attribute-control .ap-input::-webkit-outer-spin-button,
    .attribute-control .ap-input::-webkit-inner-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }

    ::placeholder {
      color: var(--placeholder-color);
      opacity: 1;
    }

    select:has(option[value='']:checked) {
      color: var(--placeholder-color);
    }

    input:focus,
    select:focus,
    textarea:focus {
      outline: none;
      border-color: var(--border-color-strong);
      box-shadow: 0 0 5px rgba(120, 90, 78, 0.4);
    }

    .custom-input {
      display: none;
      opacity: 0;
      transition: opacity 0.3s ease, margin-top 0.3s ease;
      margin-top: -10px;
    }

    .custom-input.show {
      display: block;
      opacity: 1;
      margin-top: 10px;
    }

    .conditional-display-group {
      display: none;
      opacity: 0;
      max-height: 0;
      overflow: hidden;
      margin-bottom: 0 !important;
      transition: opacity 0.4s ease, max-height 0.4s ease, margin-bottom 0.4s ease;
    }

    .conditional-display-group.show {
      display: block;
      opacity: 1;
      max-height: 250px;
      margin-bottom: 18px !important;
    }

    .skill-option {
      display: flex;
      align-items: flex-start;
      cursor: pointer;
      user-select: none;
      padding: 8px 10px;
      border: 1px solid var(--border-color-light);
      border-radius: 0;
      transition: background-color 0.2s, border-color 0.2s;
      flex-basis: 100%;
      box-sizing: border-box;
      background-color: var(--input-bg-color);
    }

    .skill-option:hover {
      background-color: rgba(220, 210, 190, 0.6);
      border-color: var(--border-color-strong);
    }

    .skill-option-content {
      display: flex;
      flex-direction: column;
      flex-grow: 1;
    }

    .skill-main-info {
      font-weight: 500;
      color: var(--title-color);
      font-size: 0.95em;
    }

    .skill-option .skill-description {
      opacity: 1;
      margin-top: 6px;
      font-size: 0.85em;
      color: var(--text-color);
      line-height: 1.3;
    }

    .skill-option input[type='checkbox'],
    .skill-option input[type='radio'] {
      margin-right: 8px;
      appearance: none;
      width: 16px;
      height: 16px;
      border: 1px solid var(--border-color-strong);
      border-radius: 0;
      background-color: #fff;
      position: relative;
      cursor: pointer;
      flex-shrink: 0;
    }

    .skill-option input[type='checkbox']:checked,
    .skill-option input[type='radio']:checked {
      background-color: var(--title-color);
      border-color: var(--title-color);
    }

    .skill-option input[type='checkbox']:checked::after,
    .skill-option input[type='radio']:checked::after {
      content: '✔';
      color: #fff;
      font-size: 11px;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }

    .skill-option input[type='checkbox']:checked,
    .skill-option input[type='radio']:checked {
      box-shadow: 0 0 5px rgba(120, 90, 78, 0.4);
    }

    .random-button {
      width: 100%;
      padding: 8px;
      margin-bottom: 10px;
      font-family: var(--font-body);
      font-weight: 500;
      font-size: 1em;
      color: var(--title-color);
      background-color: var(--button-bg-color);
      border: 1px solid var(--border-color-strong);
      border-radius: 0;
      cursor: pointer;
      text-align: center;
      transition: all 0.2s ease;
    }

    .random-button:hover {
      background-color: #c6b8a5;
    }

    .selection-control {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .selection-btn {
      padding: 10px 12px;
      font-family: var(--font-body);
      font-weight: 500;
      font-size: 1em;
      color: var(--title-color);
      background-color: var(--input-bg-color);
      border: 1px solid var(--border-color-light);
      border-radius: 0;
      cursor: pointer;
      text-align: left;
      transition: all 0.2s ease;
    }

    .selection-btn:hover {
      border-color: var(--border-color-strong);
      background-color: #e8e0d5;
    }

    .selection-summary {
      font-size: 0.85em;
      color: var(--text-color);
      padding-left: 5px;
    }

    .submit-button {
      width: 100%;
      padding: 12px;
      margin-top: 10px;
      font-family: var(--font-title);
      font-weight: 700;
      font-size: 1.2em;
      color: var(--title-color);
      background-color: var(--button-bg-color);
      border: 1px solid var(--border-color-strong);
      border-radius: 0;
      cursor: pointer;
      text-align: center;
      transition: all 0.2s ease;
    }

    .submit-button:hover {
      background-color: #c6b8a5;
      transform: translateY(-2px);
    }

    .rarity-common {
      color: #6c757d;
    }

    .rarity-uncommon {
    
    .rarity-uncommon, .tier-2 {
      color: #4caf50;
    }

    .rarity-rare {
    .rarity-rare, .tier-3 {
      color: #2196f3;
    }

    .rarity-epic {
      color: #9c27b0;
    }

    .rarity-legendary {
      color: #ffc107;
    }

    .rarity-mythic {
      color: #f44336;
    }

    .skill-main-info .rarity-common,
    .rarity-only {
      font-weight: bold;
      background: linear-gradient(to right, #f44336, #ffc107, #4caf50, #2196f3, #9c27b0, #f44336);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      animation: rainbow-animation 5s ease-in-out infinite;
      background-size: 400% 100%;
    }

    .skill-main-info .rarity-uncommon,
    .skill-main-info .rarity-rare,
    .skill-main-info .rarity-epic,
    .skill-main-info .rarity-legendary,
    .skill-main-info .rarity-mythic {
    .skill-main-info .rarity-mythic,
    .skill-main-info .tier-2,
    .skill-main-info .tier-3 {
      font-weight: bold;
    }

    @keyframes rainbow-animation {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }

    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgba(0, 0, 0, 0.6);
      animation: fadeIn 0.3s;
    }

    .modal-content {
      background-color: var(--bg-color);
      margin: 5% auto;
      padding: 25px;
      border: 2px solid var(--border-color-strong);
      width: 90%;
      max-width: 600px;
      /* max-width: 600px; */
      position: relative;
      animation: slideIn 0.3s;
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .modal-title {
      font-family: var(--font-title);
      font-size: 1.5em;
      color: var(--title-color);
      margin: 0;
    }

    .close-btn {
      color: var(--text-color);
      float: right;
      font-size: 28px;
      font-weight: bold;
      cursor: pointer;
    }

    .close-btn:hover,
    .close-btn:focus {
      color: var(--points-color);
      text-decoration: none;
    }

    .modal-tabs-container {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-bottom: 15px;
      padding-bottom: 10px;
      border-bottom: 3px solid var(--border-color-light);
    }

    .modal-filter-container {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 15px;
      padding-top: 10px;
    }

    .modal-filter-btn {
      padding: 5px 10px;
      font-family: var(--font-body);
      font-weight: 500;
      font-size: 0.9em;
      color: var(--text-color);
      background-color: var(--input-bg-color);
      border: 1px solid var(--border-color-light);
      border-radius: 0;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    
    .modal-filter-btn:hover {
      border-color: var(--border-color-strong);
      color: var(--title-color);
    }

    .modal-filter-btn.active {
      background-color: var(--title-color);
      color: var(--bg-color);
      border-color: var(--border-color-strong);
      font-weight: 700;
    }

    .modal-tab {
      padding: 6px 12px;
      font-family: var(--font-body);
      font-weight: 500;
      font-size: 0.95em;
      color: var(--text-color);
      background-color: transparent;
      border: none;
      border-bottom: 2px solid transparent;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .modal-tab:hover {
      color: var(--title-color);
    }

    .modal-tab.active {
      color: var(--title-color);
      border-bottom-color: var(--border-color-strong);
      font-weight: 700;
    }
    .accordion-group {
      border-bottom: 2px solid var(--border-color-light);
    }
    .accordion-group:last-child {
      border-bottom: none;
    }

    .accordion-header {
      
      width: 100%;
      padding: 2px 10px;
      font-family: var(--font-body);
      font-weight: 700;
      font-size: 1.05em;
      color: var(--title-color);
      background-color: transparent;
      border: none;
      text-align: left;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: background-color 0.2s;
      border-bottom: 2px solid var(--border-color-light);
    }
    
    .accordion-header:hover {
      background-color: rgba(220, 210, 190, 0.4);
    }

    .modal-options-list {
      display: flex;
      flex-direction: column;
      gap: 10px;
      max-height: 65vh;
      padding-right: 10px;
      overflow-y: auto;
    }

    .modal-footer {
      margin-top: 20px;
      text-align: right;
    }

    .modal-confirm-btn {
      padding: 10px 20px;
      font-family: var(--font-body);
      font-weight: 700;
      font-size: 1em;
      color: var(--title-color);
      background-color: var(--button-bg-color);
      border: 1px solid var(--border-color-strong);
      cursor: pointer;
      transition: background-color 0.2s;
    }

    .modal-confirm-btn:hover {
      background-color: #c6b8a5;
    }

    .accordion-header::after {
      content: '+';
      font-size: 1.2em;
      font-weight: bold;
      color: var(--text-color);
      transition: transform 0.3s ease;
    }

    .accordion-group.active .accordion-header::after {
      content: '−';
      transform: rotate(180deg);
    }

    .accordion-content {
      max-height: 0;
      overflow: hidden;
      opacity: 0;
      transition: max-height 0.4s ease-out, opacity 0.3s ease-in, padding 0.3s ease-out;
      padding: 0 10px;
    }
    
    .accordion-group.active .accordion-content {
      max-height: 45vh;
      overflow-y: auto;
      scrollbar-width: none;
      -ms-overflow-style: none;
      opacity: 1;
      padding: 5px 10px 15px 10px;
      transition: max-height 0.5s ease-in, opacity 0.4s ease-out, padding 0.4s ease-in;
    }
    .review-category-header {
        font-family: var(--font-title);
        font-size: 1.2em;
        color: var(--title-color);
        margin-top: 15px;
        margin-bottom: 10px;
        padding-bottom: 5px;
        border-bottom: 1px solid var(--border-color-strong);
    }
    .review-category-header:first-child {
        margin-top: 0;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
      }

      to {
        opacity: 1;
      }
    }

    @keyframes slideIn {
      from {
        transform: translateY(-30px);
        opacity: 0;
      }

      to {
        transform: translateY(0);
        opacity: 1;
      }
    }


    @media (max-width: 600px) {
      body {
        padding: 10px;
      }

      .creator-scroll {
        padding: 20px;
      }

      .main-title {
        font-size: 1.5em;
      }

      label {
        font-size: 1em;
      }

      .attributes-container {
        grid-template-columns: 1fr;
      }

      .modal-content {
        width: 85%;
        margin: 10% auto;
      }
    }
  </style>
</head>

<body>
  <div class="creator-scroll">
    <div class="main-title">命定之诗与黄昏之歌</div>

    <button id="randomizeAllButton" class="random-button">一键随机生成</button>
    <button id="resetButton" class="random-button"
      style="margin-top: 10px; margin-bottom: 20px; background-color: #e8e0d5;">重置所有选项</button>

    <div class="reincarnation-points" style="margin-bottom: 15px;">可用转生点: <span
        id="reincarnationPointsDisplay">300</span></div>
    <button id="randomizePointsButton" class="random-button" style="margin-bottom: 15px; width: 100%;">随机初始点数</button>

    <div class="input-group"><label for="nameInput">🖋️ 姓名</label><input type="text" id="nameInput"
        placeholder="别告诉我你叫“龙傲天”" /></div>
    <div class="input-group"><label for="genderInput">🌗 性别</label><select id="genderInput">
        <option value="" disabled selected>莉莉丝要知道怎么称呼你</option>
        <option value="男">男</option>
        <option value="女">女</option>
        <option value="雄性">雄性</option>
        <option value="雌性">雌性</option>
        <option value="custom">自定义</option>
      </select><input type="text" id="customGenderInput" class="custom-input" placeholder="想尝试点刺激的？" /></div>
    <div class="input-group"><label for="ageInput">⏳ 年龄</label><input type="number" id="ageInput"
        placeholder="好决定给你什么剧本" min="0" /></div>

    <div class="input-group">
      <label for="raceInput">🩸 种族 <span class="reincarnation-points-inline">剩余: <span
            class="reincarnation-points-value">300</span>点</span></label>
      <select id="raceInput">
        <option value="" disabled selected>确定不是隔壁村伪装的地精？</option>
        <option value="人类">人类</option>
        <option value="兽族">兽族</option>
        <option value="精灵">精灵 (-10点)</option>
        <option value="翼民">翼民 (-10点)</option>
        <option value="自然魔物(括号内自行编辑具体魔物/详见世界书)">自然魔物(括号内自行编辑具体魔物/详见世界书) (-10点)</option>
        <option value="亡灵种族(括号内自行编辑具体种类/详见世界书)">亡灵种族(括号内自行编辑具体种类/详见世界书) (-10点)</option>
        <option value="深渊魔族(括号内自行编辑具体种类/详见世界书)">深渊魔族(括号内自行编辑具体种类/详见世界书) (-20点)</option>
        <option value="custom">自定义 (-80点)</option>
      </select>
      <input type="text" id="customRaceInput" class="custom-input" placeholder="放心，你不是史莱姆就是自带金手指的废柴勇者，总之肯定有专属作弊器！" />
    </div>
    <div class="input-group">
      <label for="identityInput">👑 世间的起点 <span class="reincarnation-points-inline">剩余: <span
            class="reincarnation-points-value">300</span>点</span></label>
      <select id="identityInput">
        <option value="" disabled selected>开局一条狗？还是一个国？</option>
        <option value="沦为奴隶">沦为奴隶 (+20点)</option>
        <option value="自由平民">自由平民 (-0点)</option>
        <option value="中产阶级">中产阶级 (-20点)</option>
        <option value="贵族阶级">贵族阶级 (-40点)</option>
        <option value="游荡亡灵">游荡亡灵 (-0点)</option>
        <option value="野生魔物(魔兽)">野生魔物(魔兽) (-0点)</option>
        <option value="魔王残党">魔王残党 (+20点)</option>
        <option value="custom">自定义 (-80点)</option>
      </select>
      <input type="text" id="customIdentityInput" class="custom-input" placeholder="'父母'一栏写着'系统赠送'。" />
    </div>
    <div class="input-group">
      <label for="startLocationInput">🗺️ 起始地点 <span class="reincarnation-points-inline">剩余: <span
            class="reincarnation-points-value">300</span>点</span></label>
      <select id="startLocationInput">
        <option value="" disabled selected>新手村选得好，神装掉到老</option>
        <option value="大陆中东部区域-奥古斯提姆帝国">大陆中东部区域-奥古斯提姆帝国</option>
        <option value="大陆东南部区域-索伦蒂斯王国">大陆东南部区域-索伦蒂斯王国</option>
        <option value="大陆东北部区域-诺斯加德联盟">大陆东北部区域-诺斯加德联盟</option>
        <option value="大陆中西部区域-无尽风痕草原-卡拉什特里斯(兽族联盟)">大陆中西部区域-无尽风痕草原-卡拉什特里斯(兽族联盟)</option>
        <option value="大陆西南部区域-无尽树海-奥古斯提姆帝国-诺瓦·瓦伦蒂亚城">大陆西南部区域-无尽树海-奥古斯提姆帝国-诺瓦·瓦伦蒂亚城</option>
        <option value="大陆中央区域-神迹山脉-天空圣域高原-圣都梵尼亚">大陆中央区域-神迹山脉-天空圣域高原-圣都梵尼亚</option>
        <option value="大陆西南端-翡翠之心-艾尔文海姆(精灵王国)">大陆西南端-翡翠之心-艾尔文海姆(精灵王国)</option>
        <option value="大陆东北部沿海区域-伯伦斯法环联邦-雾晶港">大陆东北部沿海区域-伯伦斯法环联邦-雾晶港</option>
        <option value="大陆西南部区域-无尽树海-雨林中层区域">大陆西南部区域-无尽树海-雨林中层区域</option>
        <option value="大陆西南部区域-诺瓦尔河流域-主河道中游河底">大陆西南部区域-诺瓦尔河流域-主河道中游河底</option>
        <option value="大陆上空-泣歌云海-艾琉德雷姆·尼尔(泣空遗迹)">大陆上空-泣歌云海-艾琉德雷姆·尼尔(泣空遗迹)</option>
        <option value="大陆南端-悲鸣沼泽-伯恩·瑞瑟喃斯(骸响之都)-城门内">大陆南端-悲鸣沼泽-伯恩·瑞瑟喃斯(骸响之都)-城门内</option>
        <option value="大陆西南部区域-无尽树海-雨林中央-无尽深渊地城-地下23层">大陆西南部区域-无尽树海-雨林中央-无尽深渊地城-地下23层</option>
        <option value="无尽海东部-碎星群岛-蓝泪岛">无尽海东部-碎星群岛-蓝泪岛</option>
        <option value="custom">自定义</option>
      </select>
      <input type="text" id="customStartLocationInput" class="custom-input" placeholder="恭喜，被空投到魔王后院的菜地。" />
    </div>

    <div class="input-group" id="level-group" style="display: none;">
      <label for="levelInput">✨ 初始等级 <span class="reincarnation-points-inline">剩余: <span
            class="reincarnation-points-value">300</span>点</span></label>
      <div class="level-control"><input type="range" id="levelInputSlider" min="1" max="20" value="1" /><input
          type="number" id="levelInputNumber" min="1" max="20" value="1" /></div>
      <small>(当前等级消耗: <span id="levelCostDisplay">0</span> 点)</small>
    </div>
    <div class="input-group" id="attributes-group">
      <label>
        <div>🎲 初始属性 <small style="display: block; font-weight: normal; margin-top: 4px;">(剩余AP: <span
              id="apDisplay">5</span>)</small></div>
      </label>
      <button id="randomizeAttributesButton" class="random-button" style="margin-bottom: 10px;">随机分配AP</button>
      <div class="attributes-container"></div>
    </div>

    <div class="input-group">
      <label>⚔️ 初始装备 <span class="reincarnation-points-inline">剩余: <span
            class="reincarnation-points-value">300</span>点</span></label>
      <div class="selection-control"><button class="selection-btn" data-category="equipments">选择初始装备</button>
        <div class="selection-summary" id="equipmentsSummary">已选0件，消耗0点</div>
      </div>
    </div>
    <div class="input-group">
      <label>🎒 初始物品 <span class="reincarnation-points-inline">剩余: <span
            class="reincarnation-points-value">300</span>点</span></label>
      <div class="selection-control"><button class="selection-btn" data-category="items">选择初始物品</button>
        <div class="selection-summary" id="itemsSummary">已选0件，消耗0点</div>
      </div>
    </div>
    <div class="input-group">
      <label>💫 技能选择 <span class="reincarnation-points-inline">剩余: <span
            class="reincarnation-points-value">300</span>点</span></label>
      <div class="selection-control"><button class="selection-btn" data-category="skills">选择技能</button>
        <div class="selection-summary" id="skillsSummary">已选0件，消耗0点</div>
      </div>
    </div>
    <div class="input-group">
      <label>❤️ 初始红线对象 <span class="reincarnation-points-inline">剩余: <span
            class="reincarnation-points-value">300</span>点</span></label>
      <div class="selection-control"><button class="selection-btn" data-category="redThreads">选择初始红线对象(限定一个)</button>
        <div class="selection-summary" id="redThreadsSummary">已选0件，消耗0点</div>
      </div>
    </div>
    <div class="input-group">
      <label>🧭 初始背景</label>
      <div class="selection-control"><button class="selection-btn" data-category="backgrounds">选择初始背景...</button>
        <div class="selection-summary" id="backgroundsSummary">未选择</div>
      </div>
    </div>

    <div id="backgroundStoryGroup" class="input-group conditional-display-group">
      <label>📜 你的初始背景故事</label>
      <textarea id="backgroundStory" rows="4" placeholder="你选择了自定义开局，请在此处填写你的背景故事，这将作为游戏开局的引入..."></textarea>
    </div>
    <div class="input-group">
        <label for="reviewButton">📜 档案总览</label>
        <button id="reviewButton" class="selection-btn" style="text-align: center;">查看已选档案</button>
    </div>
    <div class="input-group">
      <label for="destinyPointsInput">💖 命运点数 <span class="reincarnation-points-inline">剩余: <span
            class="reincarnation-points-value">300</span>点</span></label>
      <div class="destiny-points-control">
        <input type="range" id="destinyPointsInputSlider" min="0" value="0" step="1" />
        <input type="number" id="destinyPointsInputNumber" min="0" value="0" step="1" />
      </div>
      <small>(1转生点 = 10命运点数)</small>
    </div>

    <button id="sendButton" class="submit-button">踏上旅程</button>
  </div>

  <div id="selectionModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="modalTitle" class="modal-title">选择</h2>
        <span class="close-btn">&times;</span>
      </div>
      <div id="modalTabsContainer" class="modal-tabs-container">
      </div>
      <div id="modalFilterContainer" class="modal-filter-container">
      </div>
      <div id="modalOptionsList" class="modal-options-list">
      </div>
      <div class="modal-footer">
        <button id="modalConfirmBtn" class="modal-confirm-btn">确认选择</button>
      </div>
    </div>
  </div>
  <div id="reviewModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="reviewModalTitle" class="modal-title">已选档案总览</h2>
        <span id="reviewCloseBtn" class="close-btn">&times;</span>
      </div>
      <div id="reviewModalOptionsList" class="modal-options-list">
      </div>
      <div class="modal-footer">
        <button id="reviewModalConfirmBtn" class="modal-confirm-btn">确认更改</button>
      </div>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const INITIAL_REINCARNATION_POINTS = 300;
      let currentReincarnationPoints = INITIAL_REINCARNATION_POINTS;
      let baseReincarnationPoints = INITIAL_REINCARNATION_POINTS;
      let isInitialLoad = true;

      const RARITY_MAP = {
        only: '唯一', common: '普通', uncommon: '优良', rare: '稀有', epic: '史诗', legendary: '传说', mythic: '神话',
        common_spell: '普通-法术', common_other: '普通-其他', common_prayer: '普通-祷告', common_combat_skill: '普通-战技', common_ritual: '普通-仪式',
      };
      const BACKGROUND_TYPE_MAP = {
        general: '通用背景',
        race: '种族限定',
        location: '地区限定',
      };
      const RARITY_PRIORITY = { common: 0, uncommon: 1, rare: 2, epic: 3, legendary: 4, mythic: 5 };

const ALL_POSSIBLE_EQUIPMENTS = [
  // 白 (Common, cost1-15)
  // 法师武器
    { name: '学徒法杖', type: '武器', cost: 15, rarity: 'common', description: '白蜡木杖身经简单打磨，笔直无饰，顶端略粗，新手魔法师的标配，执于手中。' },
    { name: '雕花木短杖', type: '武器', cost: 10, rarity: 'common', description: '桦木削成的短杖，杖身刻有简单的几何纹路，无附魔，适合戏法或基础咒语，便于携带，藏于袖中。' },
    { name: '占卜水晶球', type: '武器', cost: 13, rarity: 'common', description: '劣质水晶打磨的球体，内里浑浊且有杂质，无附魔，可用于基础占卜或作为施法媒介，置于皮袋中。' },

  // 牧师武器
    { name: '木制圣徽', type: '武器', cost: 7, rarity: 'common', description: '普通木料雕刻的太阳徽记，边缘粗糙，可作为施展神术的媒介，是见习牧师的身份证明，挂于颈上或握于手中。' },
    { name: '粗铁圣铃', type: '武器', cost: 9, rarity: 'common', description: '粗铁铸造的小型手铃，铃声沉闷，摇动时能引导微弱的神圣力量，用于简单的祈祷仪式，系于腰间。' },
    { name: '简易权杖', type: '武器', cost: 12, rarity: 'common', description: '硬木为柄，顶端镶嵌一块未经打磨的黄铜块，象征神权，用于增强祈祷效果，也可作为钝器使用，执于手中。' },

  // 近战武器
    { name: '精铁长剑', type: '武器', cost: 12, rarity: 'common', description: '由精铁反复锻打而成，剑体修长，开有血槽，韧性良好，适用于多种战斗场景，佩于腰间。' },
    { name: '宫廷刺剑', type: '武器', cost: 10, rarity: 'common', description: '精钢锻造的细长剑身，配有繁复的蝶形护手，轻巧灵活，是贵族决斗的常用武器，佩于腰间。' },
    { name: '手半剑', type: '武器', cost: 13, rarity: 'common', description: '优质铁材锻造，剑柄长度可供单手或双手握持，战术灵活多变，佩于腰侧。' },
    { name: '十字大剑', type: '武器', cost: 15, rarity: 'common', description: '精铁铸造的双刃重剑，配有长长的十字形护手，需双手挥动，威力巨大，负于背后。' },
    { name: '环首刀', type: '武器', cost: 10, rarity: 'common', description: '铁制单刃直身刀，刀柄末端带有一个铁环，重心靠前，劈砍有力，佩于腰间。' },
    { name: '弯刀', type: '武器', cost: 11, rarity: 'common', description: '铁质单刃弯刀，弧度适中，利于马背上的劈砍与划割，常见于炎热地带的战士，佩于腰侧。' },
    { name: '刺杀匕首', type: '武器', cost: 6, rarity: 'common', description: '精铁锻制，刃体短小轻薄且异常锋利，专为隐蔽和刺杀设计，藏于靴内或腰间。' },
    { name: '猎人砍刀', type: '武器', cost: 8, rarity: 'common', description: '宽厚铁刃的短柄砍刀，重心在前，适合劈砍植被与处理猎物，是野外生存的实用工具，别于腰后。' },
    { name: '双手巨斧', type: '武器', cost: 14, rarity: 'common', description: '沉重的双刃铁斧头，安装在坚固的木柄上，需双手挥动，破甲能力极强，负于背后。' },
    { name: '硬头锤', type: '武器', cost: 9, rarity: 'common', description: '铁铸的方形锤头，一端呈锥形，安装在木柄上，打击力集中，可有效对付盔甲，挂于腰际。' },
    { name: '链锤', type: '武器', cost: 11, rarity: 'common', description: '带刺的铁球通过铁链连接至握柄，挥动时能产生巨大冲击，是经典的破甲武器，缠于腰间。' },
    { name: '长柄战斧', type: '武器', cost: 12, rarity: 'common', description: '长木柄顶端配有厚重的单刃斧头，兼具攻击范围与杀伤力，适于战场上对抗多人，执于手中。' },
    { name: '制式长矛', type: '武器', cost: 8, rarity: 'common', description: '坚韧木杆配上简单的铁制枪头，长度优势使其利于在阵线中控制距离，通常直立持握。' },
    { name: '陌刀', type: '武器', cost: 15, rarity: 'common', description: '长柄双刃大刀，刀身宽阔，斩击范围广，是步兵对抗骑兵的利器，需双手执握。' },
    { name: '钩镰枪', type: '武器', cost: 13, rarity: 'common', description: '在长枪的枪刃侧面额外带有一个弯钩，可用于钩拉敌人或割断马腿，功能多样，执于手中。' },
    { name: '鞭刃', type: '武器', cost: 14, rarity: 'common', description: '由多节带刃的铁片以铁环连接而成，可如鞭般挥甩，也可收拢如剑，变幻莫测，缠于腰间。' },
    { name: '拳剑', type: '武器', cost: 10, rarity: 'common', description: '铁制H形握柄，两端延伸出锋利的短刃，适合近身缠斗刺杀，难以防御，藏于袖中。' },
    { name: '拳刺', type: '武器', cost: 5, rarity: 'common', description: '一体成型的铁制指虎，带有四个尖锐的短刺，能极大增强拳击的杀伤力，戴于手指。' },

  // 远程武器
    { name: '复合短弓', type: '武器', cost: 11, rarity: 'common', description: '木材与兽角层压复合制成的弓身，拉力适中，精度良好，是猎人与斥候的常用武器，挎于肩后。' },
    { name: '长弓', type: '武器', cost: 13, rarity: 'common', description: '由一整根紫杉木制成，弓身修长，射程远，需要较强的臂力才能拉开，执于手中。' },
    { name: '十字弩', type: '武器', cost: 15, rarity: 'common', description: '铁质的弩臂与木制弩托构成，通过机械结构上弦，精度高但装填缓慢，适合城防与狙击，挂于肩后。' },

  // 副手武器
    { name: '投石索', type: '副手', cost: 3, rarity: 'common', description: '由两股皮绳和一个皮兜组成，用于高速投掷石块，是最简易的远程装备，收于腰间。' },
    { name: '投掷短刺', type: '副手', cost: 5, rarity: 'common', description: '铁制纺锤形尖锐短刺，经过配重平衡，无任何附魔，适合快速投掷以骚扰敌人，藏于袖中。' },
    { name: '格挡匕首', type: '副手', cost: 6, rarity: 'common', description: '加宽的铁质匕首，带有向上弯曲的护手，专门用于格挡与反击，持于副手。' },
    { name: '小手斧', type: '副手', cost: 5, rarity: 'common', description: '短柄单刃铁斧，重量均衡，既可近身劈砍，也适合投掷，别于腰后。' },
    { name: '钩刀', type: '副手', cost: 7, rarity: 'common', description: '短柄单刃刀，刀尖处带有一个锐利的弯钩，可钩拉对手的武器或盔甲，挂于腰间。' },
    { name: '短鞭', type: '副手', cost: 4, rarity: 'common', description: '厚皮革编织而成的短柄软鞭，末端加重，主要用于抽打以扰乱对手节奏，卷于腰际。' },
   
  // 副手防具
    { name: '小圆盾', type: '副手', cost: 5, rarity: 'common', description: '直径约一臂长的小型铁面圆盾，轻便灵活，利于快速格挡对手的攻击，挽于前臂。' },
    { name: '结实的木盾', type: '副手', cost: 6, rarity: 'common', description: '多层木板压制并覆盖皮革的圆形盾牌，中央有铁质盾心，提供可靠的基础防护，挽于左臂。' },
    { name: '筝形盾', type: '副手', cost: 8, rarity: 'common', description: '上宽下窄的木质筝形设计，能有效保护躯干，是步兵冲锋时的标准配置，挽于左臂。' },
    { name: '塔盾', type: '副手', cost: 10, rarity: 'common', description: '与人等高的大型木质长方盾，边缘以铁皮加固，提供全面的防护但极为笨重，常立于地面作为掩体。' },
    { name: '臂铠', type: '副手', cost: 6, rarity: 'common', description: '由数片铁甲和皮带构成的臂甲，保护整个前臂，可用于格挡刀剑，缚于小臂。' },

  // 法袍
    { name: '学徒法袍', type: '防具', cost: 22, rarity: 'common', description: '经典的法师样式，一定程度上能证明你法师学徒的身份，厚实的黑色粗棉布裁剪而成，带有宽大的兜帽，能遮蔽身形，穿套于全身。' },
    { name: '旅行者斗篷', type: '防具', cost: 20, rarity: 'common', description: '粗麻布材质，连带一个大兜帽，能防风防雨，提供轻微的防护与保暖，穿套于全身。' },
   
  // 防具
    { name: '棉甲套装', type: '防具', cost: 20, rarity: 'common', description: '多层亚麻布或棉布缝合填充而成，提供最基础的防护，聊胜于无，，穿于上下身，保护身体。' },
    { name: '镶钉皮甲套装', type: '防具', cost: 28, rarity: 'common', description: '在硬质皮革的基底上镶嵌了密集的铁钉，在保持灵活性的同时增强了对劈砍的防护，穿于上下身，保护身体。' },
    { name: '皮革头盔', type: '防具', cost: 5, rarity: 'common', description: '硬化皮革缝制而成的简易头盔，仅能覆盖头顶，提供最基础的冲击防护，戴于头部。' },
    { name: '铁质护鼻盔', type: '防具', cost: 5, rarity: 'common', description: '锅形的铁盔，前方铆接一根向下的铁条以保护鼻梁，是军队中的常见装备，戴于头顶。' },
    { name: '皮手套', type: '防具', cost: 5, rarity: 'common', description: '鞣制过的厚实皮革缝制，保护手掌与手指，防止武器磨损，戴于双手。' },
    { name: '铁质护手', type: '防具', cost: 5, rarity: 'common', description: '覆盖手背的铁片，通过皮带固定，能防护手部在格挡时受到的劈砍，戴于手部。' },
    { name: '皮革靴', type: '防具', cost: 5, rarity: 'common', description: '牛皮制成的结实短靴，靴底较厚，能保护脚部并适应长途旅行，穿于双脚。' },
    { name: '铁质护足', type: '防具', cost: 5, rarity: 'common', description: '由多块铰接铁片构成的足部护甲，通常套在靴子外面，保护双脚。' },

  // 饰品
    { name: '银戒指', type: '饰品', cost: 4, rarity: 'common', description: '普通的银质指环，设计简单无纹饰，可作为附魔的基底或用作信物，戴于手指。' },
    { name: '皮制护符', type: '饰品', cost: 3, rarity: 'common', description: '皮绳系着一个小皮袋，内装一些草药或祝福石片，提供心理安慰，可用于附魔，挂于颈部。' },
    { name: '铜质手镯', type: '饰品', cost: 2, rarity: 'common', description: '铜料打造的开口手镯，做工粗糙，但十分耐用，是佣兵和冒险者中常见的饰品，戴于手腕。' },
    { name: '骨制项链', type: '饰品', cost: 5, rarity: 'common', description: '用野兽的牙齿或小块骨头串成，象征着猎人的勇气与狩猎技能，挂于胸前。' },
    { name: '镶嵌宝石的胸针', type: '饰品', cost: 13, rarity: 'common', description: '银质的叶形胸针，中央镶嵌着一颗廉价的小宝石，能增强佩戴者的魅力，别于胸前。' },

  // 绿 (Uncommon, cost16-30)
  // 法师武器
    { name: '白橡木法杖', type: '武器', cost: 30, rarity: 'uncommon', description: '百年白橡木树心雕琢的法杖，杖身修长纤细，附魔专注+1，略微增强魔法效果并加速施法，拄于右手。' },
    { name: '学徒魔导书', type: '武器', cost: 27, rarity: 'uncommon', description: '硬质皮封面，书角以黄铜包裹，记录了数个基础法术，附魔智识+1，能帮助记忆法术，减少施法失败率，持于副手。' },
    { name: '火焰水晶', type: '武器', cost: 29, rarity: 'uncommon', description: '切割过的低纯度火水晶，被固定在黄铜底座上，附魔火焰亲和+1，能微弱增强火焰法术的威力，挂于腰间。' },

   
  // 牧师武器
    { name: '祷告石锤', type: '武器', cost: 24, rarity: 'uncommon', description: '坚硬花岗岩打磨成的锤头，刻有基础的祈祷符文，附魔专注+1，能更好地引导神术能量，挂于腰际。' },
    { name: '白银圣铃', type: '武器', cost: 26, rarity: 'uncommon', description: '纯银铸造的精致手铃，摇动时铃声清脆悦耳，附魔祝福+1，能提升祝福类神术的效果，系于腰间。' },
    { name: '圣言书卷', type: '武器', cost: 28, rarity: 'uncommon', description: '抄录着基础祷文的羊皮纸卷轴，卷轴两端以镀银木材固定，附魔虔诚+1，诵读时可增强信仰之力，持于副手。' },
   
  // 近战武器
    { name: '钢锋长剑', type: '武器', cost: 28, rarity: 'uncommon', description: '百炼精钢锻造，笔直剑身带有清晰的血槽，附魔锋利+1，平衡性极佳，是老练战士的可靠选择，佩于腰间。' },
    { name: '蜂鸟刺剑', type: '武器', cost: 26, rarity: 'uncommon', description: '百炼钢锻造的极细剑身，护手镀金并雕有花纹，附魔精准+1，突刺速度极快，难以格挡，佩于腰间。' },
    { name: '碎甲战锤', type: '武器', cost: 26, rarity: 'uncommon', description: '钢制的多棱角锤头，配以坚固的硬木长柄，附魔破甲+1，重心靠前，专为摧毁重甲而设计，双手持握。' },
    { name: '迅捷手半剑', type: '武器', cost: 27, rarity: 'uncommon', description: '精钢锻造的轻量化剑身，剑柄可供单双两用，附魔迅捷+1，能微弱提升攻击速度，佩于腰侧。' },
    { name: '新月弯刀', type: '武器', cost: 26, rarity: 'uncommon', description: '优质精钢打造的弯刃，拥有优美的新月弧线，附魔撕裂+1，能造成持续流血的伤口，佩于腰侧。' },
    { name: '破甲长矛', type: '武器', cost: 25, rarity: 'uncommon', description: '硬木长杆配上三棱形精钢枪头，附魔穿刺+1，其长度优势与穿透力使其易于穿透装甲，执于手中。' },
    { name: '碎颅巨斧', type: '武器', cost: 29, rarity: 'uncommon', description: '巨大的精钢双刃斧头，斧柄经过加固，附魔破甲+1，专为破坏重型护甲与坚固工事而设计，负于背后。' },
    { name: '流星链锤', type: '武器', cost: 24, rarity: 'uncommon', description: '比常规更大的带刺铁球，通过加固的铁链连接，附魔冲击+1，挥动时冲击力巨大，适于破甲，缠于腰间。' },
    { name: '毒蛇拳剑', type: '武器', cost: 22, rarity: 'uncommon', description: '精钢打造的H形握柄，双刃涂有弱效麻痹毒素，附魔迅捷+1，提升攻击速度，藏于袖中。' },
    { name: '影袭匕首', type: '武器', cost: 20, rarity: 'uncommon', description: '黑铁锻制的无反光匕首，刃体轻薄，附魔精准+1，能微弱提升造成致命一击的几率，藏于靴内或腰间。' },
    { name: '裂铠钩镰枪', type: '武器', cost: 28, rarity: 'uncommon', description: '精钢枪头侧面焊接了强化的弯钩，附魔钩拉+1，更易于钩住并撕裂敌人的铠甲，执于手中。' },
    { name: '斩马陌刀', type: '武器', cost: 30, rarity: 'uncommon', description: '加长加宽的精钢刀刃，安装在坚韧的长杆上，附魔斩击+1，巨大的斩击范围使其成为对抗骑兵的噩梦，需双手执握。' },
    { name: '撼地硬头锤', type: '武器', cost: 23, rarity: 'uncommon', description: '实心精钢打造的锤头，表面布满凸起，附魔粉碎+1，能轻易击碎骨骼与岩石，挂于腰际。' },
   
  // 远程武器
    { name: '鹰眼长弓', type: '武器', cost: 28, rarity: 'uncommon', description: '杉木与角复合层压制成，弓梢雕刻着鹰眼符文，附魔精准+1，射程与精度均超越普通长弓，挎于肩后。' },
    { name: '燧发手铳', type: '武器', cost: 30, rarity: 'uncommon', description: '黄铜枪管与胡桃木枪托，采用后置装药的燧发击锤结构，附魔稳定+1，能略微减少射击时的偏差，收于腰侧枪套。' },
    { name: '猎手复合弩', type: '武器', cost: 29, rarity: 'uncommon', description: '钢制弩臂与硬木弩托，结构经过优化，附魔精准+1，精度极高但装填速度依旧缓慢，挂于肩后。' },
    { name: '线膛燧发步枪', type: '武器', cost: 30, rarity: 'uncommon', description: '钢制长枪管内刻有膛线，配有木制枪托，附魔精准+1，能进行超远距离的精准射击，执于手中。' },
    { name: '精准飞刀', type: '武器', cost: 18, rarity: 'uncommon', description: '一套三柄的精钢飞刀，经过精心平衡，附魔精准+1，极大地提升了投掷的命中率，藏于袖中。' },
   
  // 副手武器
    { name: '格挡短剑', type: '副手', cost: 19, rarity: 'uncommon', description: '加宽的钢制剑身与大型碟形护手，经过韧性处理，附魔格挡+1，专为招架重击而设计，持于副手。' },
    { name: '护卫匕首', type: '副手', cost: 20, rarity: 'uncommon', description: '精钢锻造，带有宽大的S形护手，附魔格挡+1，在格挡的同时能有效反击，持于副手。' },
    { name: '飞掷手斧', type: '副手', cost: 18, rarity: 'uncommon', description: '短柄单刃精钢斧，斧身轻巧，附魔投掷+1，投掷时飞行轨迹更稳定，别于腰后。' },
    { name: '破甲钩刀', type: '副手', cost: 21, rarity: 'uncommon', description: '短柄带钩单刃，由精钢打造，附魔破甲+1，钩刃能更有效地撕开铁甲缝隙，挂于腰间。' },
    { name: '刺棘短鞭', type: '副手', cost: 17, rarity: 'uncommon', description: '皮革编织的鞭身中镶嵌了细小的钢刺，附魔扰乱+1，抽打时能给敌人造成持续的骚扰，卷于腰际。' },
   
  // 副手防具
    { name: '钢制鸢盾', type: '副手', cost: 22, rarity: 'uncommon', description: '橡木盾体正面覆盖了一层薄钢片，呈水滴形，附魔坚韧+1，防护面积大且更为坚固，挽于左臂。' },
    { name: '百炼圆盾', type: '副手', cost: 24, rarity: 'uncommon', description: '由百炼精钢冲压而成的小型圆盾，轻便灵活，附魔格挡+1，能更轻松地偏转攻击，挽于前臂。' },
    { name: '格挡臂铠', type: '副手', cost: 23, rarity: 'uncommon', description: '多层精钢甲片铆接而成，完全包裹前臂，附魔防护+1，在格挡时能提供更强的保护，缚于小臂。' },
    { name: '巨熊塔盾', type: '副手', cost: 30, rarity: 'uncommon', description: '大型精钢包边盾牌，正面绘有熊头纹章，附魔坚韧+1，提供全面的防护，但极为笨重，立于地面。' },
   
  // 法袍
    { name: '法师长袍', type: '防具', cost: 50, rarity: 'uncommon', description: '经典的法师样式，一定程度上能证明你法师的身份，厚实的蓝色天鹅绒制成，袖口和衣边绣有银线魔法纹路，附魔专注+1，能微弱提升法术效果，穿套于全身。' },
   
  // 防具
    { name: '隐匿皮甲套装', type: '防具', cost: 55, rarity: 'uncommon', description: '染成黑色的柔软皮革缝制，剪裁贴身，附魔隐匿+1，能微弱降低行动时发出的噪音，穿于上下身，保护身体。' },
    { name: '链甲套装', type: '防具', cost: 55, rarity: 'uncommon', description: '由数千个精钢环编织而成的全身链甲套装，附魔坚韧+1，能有效防御切割与劈砍，穿于上下身，保护身体。' },
    { name: '骑士板甲套装', type: '防具', cost: 60, rarity: 'uncommon', description: '一体成型的精钢板甲，附魔坚韧+1，防御力极强，是骑士的核心护具，穿于上下身，保护身体。' },
    { name: '鳞甲套装', type: '防具', cost: 55, rarity: 'uncommon', description: '将大量小型钢片像鳞片一样层叠固定在皮甲上，附魔防护+1，能有效防御劈砍，穿于上下身，保护身体。' },
    { name: '旅者皮衣套装', type: '防具', cost: 50, rarity: 'uncommon', description: '硬质皮革缝制，内侧有柔软衬垫，附魔耐力+1，能减轻长途跋涉带来的疲劳，穿于上下身，保护身体。' },
    { name: '守护者面盔', type: '防具', cost: 17, rarity: 'uncommon', description: '精钢打造的封闭式头盔，完全覆盖头部和面部，附魔防护+1，提供全面的头部防护，戴于头部。' },
    { name: '强化护鼻盔', type: '防具', cost: 18, rarity: 'uncommon', description: '钢制头盔带有一个可活动的护鼻，内衬加厚皮革，附魔防护+1，在不影响视野的情况下提升了防护性，戴于头部。' },
    { name: '巨熊之力手套', type: '防具', cost: 18, rarity: 'uncommon', description: '鞣制熊皮制成，手背处缝有加固的铁片，附魔力量+1，能微弱提升使用者的抓握力量，戴于双手。' },
    { name: '铁握板甲手套', type: '防具', cost: 22, rarity: 'uncommon', description: '由多块精钢甲片铰接而成，完全覆盖手部，附魔力量+1，能显著增强拳击的力量，戴于双手。' },
    { name: '旅者长靴', type: '防具', cost: 19, rarity: 'uncommon', description: '高筒皮革靴，靴底坚固耐磨，附魔耐力+1，能减少长途旅行中的疲劳感，穿于双脚。' },
    { name: '镶钢板甲靴', type: '防具', cost: 21, rarity: 'uncommon', description: '皮革靴身的关键部位，如脚背和脚踝，都镶嵌了钢片，附魔稳固+1，提供了额外的保护，穿于双脚。' },
    { name: '重装板甲靴', type: '防具', cost: 27, rarity: 'uncommon', description: '完全由精钢甲片构成的重型战靴，附魔稳固+1，能有效防御下段攻击，代价是牺牲了灵活性，穿于双脚。' },
   
  // 饰品
    { name: '精准指环', type: '饰品', cost: 18, rarity: 'uncommon', description: '银环上镶嵌着一颗打磨过的猫眼石，附魔精准+1，能微弱提升远程攻击的稳定性，戴于手指。' },
    { name: '防护项链', type: '饰品', cost: 19, rarity: 'uncommon', description: '银链悬挂着一个经过圣水净化的微缩盾牌吊坠，附魔格挡+1，能自动格挡一次微弱的物理伤害，挂于颈部。' },
    { name: '敏捷靴刺', type: '饰品', cost: 18, rarity: 'uncommon', description: '安装在靴跟的钢制马刺，附魔敏捷+1，能微弱提升使用者的移动速度，装于靴跟。' },
    { name: '守护护符', type: '饰品', cost: 18, rarity: 'uncommon', description: '银质的圆形护身符，刻有守护法阵，附魔防护+1，能自动生成一个临时结界格挡微弱的法术伤害，挂于颈部。' },

 // 蓝 (Rare, cost31-45)
 // 法师武器
    { name: '七光祈愿诗', type: '武器', cost: 42, rarity: 'rare', description: '以整块月光石细致打磨的单手长剑，象牙白的剑身刻有增幅魔法的彩色符文，七色宝石点缀其上。附魔了“多重法术增效”，既可挥砍亦可施法，在咏唱咒文时会散发流光溢彩的美感。佩于腰间。' },
    { name: '风暴之核法球', type: '武器', cost: 44, rarity: 'rare', description: '包裹在秘银框架中的风眼石，球体核心处有微型气旋在旋转。附魔了“风暴之力”，能增强风系法术的范围与冲击力，并小幅提升施法速度。悬浮于手边。' },
    { name: '奥术聚焦法杖', type: '武器', cost: 45, rarity: 'rare', description: '由抛光黑檀木制成，杖头镶嵌着一枚切割精巧的蓝宝石，杖身缠绕着细密的银丝符文。附魔了“奥术涌动”，能小幅提升持有者的法术强度与施法速度。是中阶法师们梦寐以求的施法媒介。执于手中。' },

 // 牧师武器
    { name: '圣骨圣印记', type: '武器', cost: 40, rarity: 'rare', description: '以一位殉道圣徒的指骨为核心，包裹在纯银铸造的太阳徽记之中，整体散发着柔和的圣光。附魔了“神圣加护”，能显著增强治疗与防护类神术的效果，握于手中或作为圣物佩戴。' },
    { name: '天使之声圣铃', type: '武器', cost: 38, rarity: 'rare', description: '以稀有的音银矿铸造，铃声清澈悠远，仿佛经过天使祝福。附魔了“圣音共鸣”，摇动时能对亡灵和恶魔造成范围性的神圣伤害，并净化负面状态，系于腰间。' },
    { name: '审判钉锤', type: '武器', cost: 41, rarity: 'rare', description: '秘银打造的单手钉锤，锤头呈星芒状，中心镶嵌着一枚净化的光水晶。附魔了“圣光冲击”，击中敌人时会爆发小范围的神圣能量，对邪恶生物有额外伤害，挂于腰际。' },

 // 近战武器
    { name: '炽焰附魔长剑', type: '武器', cost: 42, rarity: 'rare', description: '百炼钢精心锻造的剑身，十字护手中央镶嵌着一枚炽热的红宝石。附魔了“火焰之力”，挥舞时剑刃会缠绕高温流炎，对敌人造成持续灼烧伤害。是喜爱狂野攻势的战士之选。佩于腰间。' },
    { name: '圣光十字大剑', type: '武器', cost: 42, rarity: 'rare', description: '镀银钢铁铸造的宽刃大剑，剑身厚重，中心蚀刻着光芒圣徽。附魔了“圣光灌注”，能对亡灵与恶魔生物造成额外的神圣伤害。是圣殿骑士的标准配装。负于背后。' },
    { name: '熔岩重剑', type: '武器', cost: 43, rarity: 'rare', description: '黑钢与火山岩融合锻造的宽刃巨剑，剑身中心嵌有一枚跳动的熔火核心。附魔了“熔岩爆发”，重击地面时能产生小范围的岩浆喷溅。破坏力惊人但极为沉重。负于背后。' },
    { name: '潮汐三叉戟', type: '武器', cost: 42, rarity: 'rare', description: '以深海寒铁锻造，三个戟刃如波浪般起伏，中心镶嵌着纯净的海蓝宝石。附魔了“潮汐之力”，攻击时能掀起强烈的水流冲击，扰乱敌人阵脚。是海洋神殿护卫的武器。执于手中。' },
    { name: '风暴战斧', type: '武器', cost: 40, rarity: 'rare', description: '陨铁打造的对称双面战斧，斧面光滑，中心镶嵌着一枚微缩的风眼宝石。附魔了“旋风斩击”，全力挥舞时能够在周身产生强劲的气旋。需要双手才能驾驭。双手持握。' },
    { name: '冰霜使者战斧', type: '武器', cost: 40, rarity: 'rare', description: '极北寒铁铸成的双刃战斧，斧面天然覆盖着一层难以融化的冰霜。附魔了“冰霜能量”，挥砍时释放的冻气有几率冻结敌人的伤口，延缓其行动。负于背后。' },
    { name: '雷霆之锤', type: '武器', cost: 38, rarity: 'rare', description: '由一整块陨铁打造的方形锤头，表面镶嵌着数颗不规则的雷晶石。附魔了“雷电冲击”，击中目标时会迸发耀眼的电弧，能够小幅震退敌人。挂于腰际。' },
    { name: '月光双刃', type: '武器', cost: 38, rarity: 'rare', description: '月光金属熔铸而成的弧形双刀，刃面在暗处会流动着清冷的微光。附魔了“月光斩击”，使其在夜间的攻击力得到显著提升。是月精灵斥候的挚爱。交叉负于背后。' },
    { name: '暗影匕首', type: '武器', cost: 36, rarity: 'rare', description: '陨铁混合黑曜石粉末锻造的漆黑刃身，几乎不反射任何光线。附魔了“暗影侵蚀”，造成伤害的同时能够暂时削弱敌人的力量。是刺客执行任务的理想工具。藏于靴内。' },
    { name: '荆棘鞭刃', type: '武器', cost: 35, rarity: 'rare', description: '由数十个锋利钢片通过魔化荆棘链接而成的柔性武器，可鞭可刺。附魔了“撕裂缠绕”，攻击时能汲取少量生命力反哺持有者。缠于腰间。' },

 // 远程武器
    { name: '魔导步枪·鹰隼', type: '武器', cost: 45, rarity: 'rare', description: '精致胡桃木枪托与钢制长枪管的完美结合，内置微型魔晶石作为动力源。附魔了“精准射击”，是进行超远距离狙击的致命利器。挂于肩后。' },
    { name: '赤焰手炮', type: '武器', cost: 44, rarity: 'rare', description: '青铜铸造的短管手炮，枪身粗犷，以大型魔晶石作为激发装置。附魔了“爆裂射击”，射出的弹丸在接触目标后会产生小范围的火焰爆炸。挂于腰侧。' },
    { name: '风语者长弓', type: '武器', cost: 43, rarity: 'rare', description: '白蜡木与精灵藤蔓制成的弓身，中央镶嵌着一枚通透的风晶石。附魔了“风之指引”，射出的箭矢会附加气旋，显著提升飞行速度与精度。挎于肩后。' },
    { name: '魔能左轮·毒蛇', type: '武器', cost: 41, rarity: 'rare', description: '精钢锻造的六发转轮手枪，握把处有蛇鳞纹理，采用魔晶石击发装置。附魔了“穿透弹幕”，子弹能穿透常规护甲和魔法屏障。收于腰侧枪套。' },
    { name: '幽魂手枪', type: '武器', cost: 39, rarity: 'rare', description: '黑檀木握把与镂空银制枪身的奇特组合，能直接击发灵魂能量。附魔了“灵魂汲取”，伤害敌人的同时能为使用者恢复少量魔力。收于腰侧。' },
    { name: '雷霆投枪', type: '武器', cost: 37, rarity: 'rare', description: '坚硬的铁木枪杆与钢制三棱枪尖，枪尖后部镶嵌着一枚雷晶石。附魔了“闪电投掷”，投掷后可自动返回使用者手中，无需回收。负于背后。' },
    { name: '魔晶手弩', type: '武器', cost: 37, rarity: 'rare', description: '紧凑的钢制弩身，以魔晶石为动力源，可实现快速上弦。附魔了“追踪箭矢”，射出的弩箭能小幅度自动修正轨迹，提高命中率。绑于小臂。' },
  
 // 副手武器
    { name: '暗影格斗爪', type: '副手', cost: 34, rarity: 'rare', description: '与臂甲一体的黑钢利爪，爪刃锋利，护臂坚固。附魔了“暗影撕裂”，格挡成功后的反击会附带暗影伤害，令敌人难以防御。戴于副手。' },
    { name: '闪电投刃', type: '副手', cost: 31, rarity: 'rare', description: '边缘锋利的精钢圆刃，中心镶嵌着雷晶石，整体平衡极佳。附魔了“闪电回旋”，投掷后能自动返回，并电击路径上的所有敌人。藏于袖中。' },

 // 副手防具
    { name: '圣光护符盾', type: '副手', cost: 37, rarity: 'rare', description: '银制的小型鸢盾，盾面中心镶嵌着一枚散发柔光的圣晶石。附魔了“神圣守护”，能有效抵抗黑暗与亡灵能量的侵蚀。战斗时挽于手臂，平时可作护符挂于胸前。' },
    { name: '符文鸢盾', type: '副手', cost: 36, rarity: 'rare', description: '坚韧橡木制成的鸢形盾牌，表面覆盖着秘银薄片，其上雕刻着密集的防护符文。附魔了“魔法偏转”，有一定几率使指向性法术偏离轨道。挽于左臂。' },
    { name: '奥术典籍', type: '副手', cost: 35, rarity: 'rare', description: '幼龙皮制成的封面，书页由银箔制成，书脊处镶嵌着幽蓝水晶。附魔了“法术护盾”，能自动格挡一次低级法术的攻击。持于副手。' },
    { name: '风暴招架器', type: '副手', cost: 35, rarity: 'rare', description: '轻质合金打造的臂甲，外侧有数道精密的导流槽。附魔了“风力偏转”，能有效改变远程物理攻击的弹道，保护使用者。绑于小臂。' },
    { name: '荆棘圆盾', type: '副手', cost: 34, rarity: 'rare', description: '钢铁铸造的圆形盾牌，盾面遍布淬毒的魔化荆棘尖刺。附魔了“荆棘反伤”，在成功格挡近战攻击时，会将部分伤害反射给攻击者。挽于前臂。' },
    { name: '烈焰护手', type: '副手', cost: 33, rarity: 'rare', description: '由火蜥蜴的皮革制成，手背处镶嵌着一枚温热的红宝石。附魔了“火焰吸收”，可抵挡火系伤害并将其转化为能量，用于下一次攻击。戴于副手。' },
    { name: '冰晶小盾', type: '副手', cost: 32, rarity: 'rare', description: '由深层冰川的冰核锻造的透明圆盾，盾体坚硬无比，寒气四溢。附魔了“冰霜反射”，承受攻击时能将寒气导入攻击者的武器，短暂冻结对方。挽于前臂。' },

 // 法袍
    { name: '奥术导师法袍', type: '防具', cost: 80, rarity: 'rare', description: '深蓝色天鹅绒与银丝线织成的华美法袍，袖口与领口绣有星辰图案，镶嵌多颗蓝宝石。附魔了“奥术增效”，能显著提升法术效果与魔力回复速度。穿套于全身。' },
    { name: '元素庇护长袍', type: '防具', cost: 75, rarity: 'rare', description: '以秘银丝线与防火布料混纺织成，布料上流动着四色元素的微光。附魔了“元素抗性”，能小幅抵抗水、火、风、土、雷、冰、光、暗元素的伤害。穿套于全身。' },
  
 // 防具
    { name: '骑士板甲套装·坚毅', type: '防具', cost: 85, rarity: 'rare', description: '以精钢锻造成型的板甲套装，表面打磨光滑，边缘雕刻着守护符文。附魔了“物理抗性”，能有效减少穿着者受到的挥砍与钝击伤害。是战场前线人员的可靠保障。穿于上下身，保护身体。' },
    { name: '元素抵抗链甲套装', type: '防具', cost: 85, rarity: 'rare', description: '由数千个细小的秘银环编织而成，环间镶嵌着代表四元素的微小宝石。附魔了“元素平衡”，能均衡地抵抗各类元素伤害，泛用性强。穿于上下身，保护身体。' },
    { name: '影遁皮甲套装', type: '防具', cost: 85, rarity: 'rare', description: '用暗影豹的毛皮缝制，关键部位镶嵌着吸收光线的黑曜石。附魔了“阴影隐匿”，能让使用者更容易地融入阴影，躲避敌人的侦查。穿于上下身，保护身体。' },
    { name: '巨熊之力链甲套装', type: '防具', cost: 85, rarity: 'rare', description: '精钢链甲套装，织网编织着象征力量的巨熊符文。附魔了“力量增强”，能显著提升穿着者的爆发力与冲击力。穿于上下身，保护身体。' },
    { name: '遁风游侠皮甲套装', type: '防具', cost: 85, rarity: 'rare', description: '由魔化丝绸与软皮缝制，镶嵌着轻盈的风晶石。附魔了“轻身术”，能让穿着者的移动更加迅速，闪避更加灵敏。穿于上下身，保护身体。' },
    { name: '谎言假面', type: '防具', cost: 38, rarity: 'rare', description: '一张轻薄的、可以完美贴合面部的秘银面具。佩戴后，可以完美隐藏你的微表情，并对精神系的探查魔法有极高的抗性。还能让你在说谎时心跳和体温都不会有任何变化。' },
    { name: '龙鳞头盔', type: '防具', cost: 38, rarity: 'rare', description: '用亚种火飞龙的鳞片与精钢锻造而成的全覆式头盔，带有可开合的面甲。附魔了“火焰抗性”，能有效抵抗高温环境与火焰法术的伤害。戴于头部。' },
    { name: '洞察头冠', type: '防具', cost: 35, rarity: 'rare', description: '由秘银打造的简约头冠，眉心处镶嵌着一颗纯净的蓝宝石。附魔了“法术洞察”，能帮助佩戴者更快地感知和解析周围的魔法波动。戴于额头。' },
    { name: '符文皮帽', type: '防具', cost: 33, rarity: 'rare', description: '由魔化野牛皮缝制而成，帽檐内侧刻满了微型警示符文。附魔了“法术警觉”，当侦测到恶意的魔法波动时，符文会发出微光预警。戴于头部。' },
    { name: '铁握之力护手', type: '防具', cost: 37, rarity: 'rare', description: '布满划痕的精钢护手，指关节和手背处雕刻着力量符文。附魔了“蛮力”，能显著提升佩戴者的抓握与打击力量。戴于双手。' },
    { name: '法师之手手套', type: '防具', cost: 34, rarity: 'rare', description: '银色丝绸编织而成，手背处用奥术水晶粉末绣出了复杂的魔法阵。附魔了“施法加速”，能提升需要手势施法时的速度与流畅度。戴于双手。' },
    { name: '风行者长靴', type: '防具', cost: 36, rarity: 'rare', description: '由柔软的鹿皮制成，靴底刻有风系符文，两侧镶嵌着风晶石。附魔了“疾行”，能提升移动速度并消除脚步声，适合快速潜行。穿于双脚。' },
    { name: '旅行者秘法护腿', type: '防具', cost: 35, rarity: 'rare', description: '耐磨皮革与帆布制成的实用护腿，内侧口袋里藏着一枚微小的空间宝石。附魔了“减轻负担”，能极大缓解长途跋涉带来的疲劳感。穿于腿部。' },
    { name: '岩石践踏者', type: '防具', cost: 35, rarity: 'rare', description: '硬化皮革与钢板结合制成的重型战靴，靴底厚重如岩石。附魔了“稳固”，能让穿着者在冲击下稳如磐石，难以被击退或摔倒。穿于双脚。' },
    { name: '水行靴', type: '防具', cost: 33, rarity: 'rare', description: '由防水的海兽皮革制成，靴边镶嵌着数颗水蓝宝石。附魔了“水上行走”，能让使用者在水面上短时间站立或行走。穿于双脚。' },
  
 // 饰品
    { name: '生命守护项链', type: '饰品', cost: 38, rarity: 'rare', description: '秘银链条串起一颗色泽温润的生命宝石，散发着柔和的绿光。附魔了“生命活力”，能缓慢而持续地治愈佩戴者的伤势。挂于颈部。' },
    { name: '法师护盾发生器', type: '饰品', cost: 37, rarity: 'rare', description: '银制圆盘上镶嵌着多颗充能水晶，构成一个微型魔法阵。附魔了“法力护盾”，在遭受攻击时会自动生成一个临时的魔法护盾进行防御。挂于腰间。' },
    { name: '雷霆之力手镯', type: '饰品', cost: 36, rarity: 'rare', description: '粗糙的钢制手镯，表面镶嵌着一颗随时可能迸发电流的雷晶石。附魔了“雷电之力”，佩戴者的物理攻击有一定几率附加电击效果。戴于手腕。' },
    { name: '精准瞄准镜', type: '饰品', cost: 35, rarity: 'rare', description: '黄铜镜筒与多层水晶镜片构成的精密炼金造物。附魔了“鹰眼术”，能大幅提升远程武器的瞄准精度与有效射程。装于枪械或弓弩上。' },
    { name: '元素抗性护符', type: '饰品', cost: 34, rarity: 'rare', description: '五色宝石环绕着一枚银制的圆形护符，象征着五种主要元素。附魔了“元素防护”，能均衡地提升对各类元素伤害的抗性。挂于胸前。' },
    { name: '暗影隐匿徽章', type: '饰品', cost: 33, rarity: 'rare', description: '由黑铁铸造的乌鸦形态徽章，表面雕刻着复杂的潜行符文。附魔了“阴影融合”，能帮助佩戴者更好地融入阴影，降低被发现的几率。别于衣内。' },
    { name: '奥术能量指环', type: '饰品', cost: 32, rarity: 'rare', description: '简约的银环上镶嵌着一颗切割完美的奥术水晶。附魔了能量涌动，能够持续为佩戴者恢复少量魔力，是法师续航的保障。戴于手指。' },
    { name: '敏捷之羽靴刺', type: '饰品', cost: 31, rarity: 'rare', description: '固定在靴跟的钢制马刺，末端点缀着一根轻盈的狮鹫羽毛。附魔了“灵动”，能提升佩戴者的闪避能力与身体平衡感。装于靴跟。' },
      ];

      const ALL_POSSIBLE_ITEMS = [
        { name: '邂逅的黄金罗盘', type: '消耗品', cost: 0, rarity: 'only', description: '一次性消耗品。你可以设定几个关键词（如种族、外貌、性格、身份、潜力、特长、性癖等），罗盘将立刻为你导航，并创造一个极高质量的、仿佛命中注定般的初见场景，让你与符合条件的“高潜力目标”相遇。' },

        // 白 (Common, 1-10)
        { name: '一点点钱', type: '货币', cost: 10, rarity: 'common', description: '初始自带10金币。' },
        { name: 'D级冒险者徽章', type: '其他物品', cost: 5, rarity: 'common', description: '一枚由黑铁铸造的徽章，上面刻有交叉的剑与盾牌浮雕和清晰的字母D，代表你D级冒险者的身份，你可以凭借它在冒险者公会接取D级及以下的任务委托。' },
        { name: '精灵的干粮', type: '消耗品', cost: 5, rarity: 'common', description: '一种轻便且营养丰富的口粮，一份就能提供一整天的能量。数量20。' },
        { name: '微弱治疗药剂', type: '消耗品', cost: 10, rarity: 'common', description: '第一层级的冒险者不太舍得用的保命药水，快速恢复少量HP。数量5' },
        { name: '微弱法力恢复药剂', type: '消耗品', cost: 10, rarity: 'common', description: '第一层级的冒险者用起来会心疼的恢复药水，快速恢复少量MP。数量5' },

        // 绿 (Uncommon, 11-20)
        { name: '一些钱', type: '货币', cost: 20, rarity: 'uncommon', description: '初始自带25金币。' },
        { name: 'C级冒险者徽章', type: '其他物品', cost: 11, rarity: 'uncommon', description: '一枚由青铜铸造的徽章，上面刻有交叉的剑与盾牌浮雕和清晰的字母C，代表你C级冒险者的身份，你可以凭借它在冒险者公会接取C级及以下的任务委托。' },
        { name: '治疗药剂', type: '消耗品', cost: 20, rarity: 'uncommon', description: '第二层级的冒险者不太舍得用的保命药水，快速恢复中量HP。数量5' },
        { name: '法力恢复药剂', type: '消耗品', cost: 20, rarity: 'uncommon', description: '第二层级的冒险者用起来会心疼的恢复药水，快速恢复中量MP。数量5' },
        { name: '猫眼药剂', type: '消耗品', cost: 20, rarity: 'uncommon', description: '一瓶浑浊的黄色液体，喝下后能在黑暗中视物，持续一个小时。副作用是瞳孔会变成猫一样的竖瞳。数量5' },
        { name: '万能钥匙', type: '其他物品', cost: 15, rarity: 'uncommon', description: '据说能打开世界上大多数的锁，但对魔法锁无效。' },
        { name: '空白的魔法卷轴', type: '消耗品', cost: 12, rarity: 'uncommon', description: '可以将一个你已掌握的法术封印其中，以供日后使用，或者拿去卖钱。数量2。' },
        { name: '古旧神秘的地图', type: '其他物品', cost: 15, rarity: 'uncommon', description: '一张古老地图的一部分，指向一个未知的宝藏或地点。' },
        { name: '便携式炼金帐篷', type: '其他物品', cost: 16, rarity: 'uncommon', description: '一个看起来只有巴掌大的皮袋，但解开绳子扔在地上，它会在一分钟内自动展开成一个可以容纳三人的标准帐篷。帐篷材质经过防火和防水处理，能抵御一般的风雨。收起时只需按动帐篷中央的符文石即可。' },
        { name: '炼金术士的入门套装', type: '其他物品', cost: 20, rarity: 'uncommon', description: '包含一套基础的炼金设备和十几种常见魔法草药与魔法矿物粉末的套装，可以制作普通品质的炼金物品和药剂。' },
        { name: '锻造工匠士的入门套装', type: '其他物品', cost: 20, rarity: 'uncommon', description: '包含一套基础的锻造工具和十几种金属材料的套装，可以制作并维护普通品质的装备。' },

        // 蓝 (Rare, 21-35)
        { name: '不算少的钱', type: '货币', cost: 30, rarity: 'rare', description: '初始自带200金币。' },
        { name: '便携式传送卷轴', type: '消耗品', cost: 21, rarity: 'rare', description: '可以让你瞬间返回你标记过的安全地点，一次性使用。' },
        { name: '水下呼吸药剂', type: '消耗品', cost: 20, rarity: 'rare', description: '喝下后能让你在水中呼吸，但无法让你免疫水中的暗流和水压影响，持续时间3小时。数量5。' },
        { name: '进阶治疗药剂', type: '消耗品', cost: 25, rarity: 'rare', description: '能迅速恢复大量HP的红色药水。数量5。' },
        { name: '进阶法力恢复药剂', type: '消耗品', cost: 25, rarity: 'rare', description: '能迅速恢复大量MP的蓝色药水。数量5。' },
        { name: '永夜巡游者之哨', type: '其他物品', cost: 30, rarity: 'rare', description: '一支黑曜石魔法哨笛，吹响后从亡灵位面中召唤【幽夜座驾】，一辆由两匹幽魂驹牵引的豪华马车。' },
        { name: '炼金术师套装', type: '其他物品', cost: 35, rarity: 'rare', description: '一套包含了魔法坩埚、水晶试管、水晶药剂瓶、魔能萃取器、附魔刻刀、魔纹校能器和魔纹探针等多种炼金和附魔工具，以及几十种常见魔法草药与魔法矿物粉末的套装。支持优良及以下品质的炼金物品和药剂的制作。' },
        { name: '锻造工匠套装', type: '其他物品', cost: 35, rarity: 'rare', description: '一套包含了自洁磨具、除垢刷具、护养油匣、矫形台钳、定型锻锤、工件夹钳、小型承力砧台、小型恒温淬火槽、便携风箱等多种锻造工具和十几种魔法金属粉末的套装。支持制作并维护优良及以下品质的装备。' },
        { name: '野外生存套装', type: '其他物品', cost: 40, rarity: 'rare', description: '包含各种采集工具和野外生存工具(魔力点火器、剥皮小刀、多功能铲、伐木斧、采矿镐、便携厨具和餐具等)、以及丰富的生活物资(备用衣物、清洁用品、隔水防寒布料、毛毯、睡袋、帐篷、各类食材、盐和香料等)的套装。便于物资采集和野外生存。' },

        // 紫 (Epic, 36-50)
        { name: '很多钱', type: '货币', cost: 50, rarity: 'epic', description: '初始自带20白金币。' },
        { name: '思念水晶', type: '其他物品', cost: 40, rarity: 'epic', description: '一掌可握的心形深红魔法水晶。心中思念着目标消耗500MP，水晶会捕捉对方的灵魂波动，在对方面前投影出一个魔法屏幕，进行视频通话。' },
        { name: '古代炼金傀儡核心', type: '材料', cost: 36, rarity: 'epic', description: '古代魔像的动力核心，蕴含着强大的能量，是制作高级炼金傀儡的关键材料。' },
        { name: '恶作剧卡牌', type: '其他物品', cost: 50, rarity: 'epic', description: '一套虚幻的恶作剧卡牌，消耗50FP，在意识空间中抽选出卡牌并锁定一个目标后，使用命运的力量让目标遭遇恶作剧效果（例如:平地摔、连续打嗝、袜带脱落、衣缝开裂、腰带脱落、口吃结巴、失禁、手滑丢物、纽扣崩飞、胸罩滑落、内裤滑落、连续放屁等）。恶作剧的快乐，是无价的！' },

        // 金 (Legendary, 51-100)
        { name: '很多很多钱', type: '货币', cost: 90, rarity: 'legendary', description: '初始自带250白金币。' },
        { name: '雾雨街13号地契', type: '其他物品', cost: 100, rarity: 'legendary', description: '诺瓦·瓦伦蒂亚城市政厅公正的魔法契约，证明你对雾雨街13号房产的所有权。位于诺瓦·瓦伦蒂亚的平民区的一栋3层大型公寓，每层拥有10个房间，适合用来出租。第一层的房间较为简陋和狭窄、没有厨房和独立厕所，在1层走廊尽头有公共盥洗室；第二层的房间装修普通而实用，适合3口之家居住，没有厨房，拥有独立厕所；第三层的房间装修精致，拥有独立的卫浴和微型炉灶、较为清净，适合独居的富裕客户。' },
        { name: '定制魔导浮空平台', type: '其他物品', cost: 100, rarity: 'legendary', description: '伯伦斯法环出品并对外销售的奢侈品方形浮空平台，面积约600平方米，魔晶动力核心，可浮空半米左右，并可自由移动航行。已在其上建设砖石结构的奢华双层独栋别墅。可自行修改别墅内部布局(此处按需求自行修改内部房间/布置/装修/拓展工作室)。' },
        { name: '一瓶亚龙之血', type: '其他物品', cost: 60, rarity: 'legendary', description: '一小瓶纯度颇高的亚龙血液，饮用后能永久性让你的某项属性+1。或许你也可以找到精通血脉改造技术的炼金术师尝试一种新的可能。' },

        // 红 (Mythic, 100+)
        { name: '建国契约', type: '其他物品', cost: 250, rarity: 'mythic', description: '一张古老的神力契约，持有者可以凭借它在无主之地上建立一个受法则和神祗承认的世俗国家。' },
        { name: '翠玉录-伪', type: '其他物品', cost: 250, rarity: 'mythic', description: '一块隐藏在你意识海中的石板，一位伟大的起源炼金术师对炼金术原点的摹刻，创造的法则铭刻在其上。能支持制作、修改、改进或研发所有种类和品质的物品、道具和装备。你能凭借其力量徒手进行所有种类和形式的炼金，只需要付出足够的sp、mp、hp，每次使用必定消耗三者其中一至少60%的存量，仅限当前层级。跨层级操作会导致随机支付一条肢体。**请谨记，等价交换。**' }
      ];

      const ALL_POSSIBLE_SKILLS = [
        // common_combat_skill: '普通-战技',
        { name: '初级徒手战斗掌握', type: '被动', cost: 10, rarity: 'common_combat_skill', description: '掌握了最基础的徒手战斗技巧，毫无流派可言，但至少懂得最基础的发力方式。' },
        { name: '初级剑术掌握', type: '被动', cost: 10, rarity: 'common_combat_skill', description: '掌握了最基础的剑术，至少挥剑时不会砍伤自己了。' },
        { name: '初级破甲武器掌握', type: '被动', cost: 10, rarity: 'common_combat_skill', description: '掌握了最基础的手斧、单手锤等破甲武器的使用方式，至少拎起锤子砸下去的时候不会震伤自己的手腕了。' },
        { name: '初级长柄武器掌握', type: '被动', cost: 10, rarity: 'common_combat_skill', description: '掌握了最基础的长柄武器使用方式，至少不会在挥动长柄时扭到自己的手了。' },
        { name: '初级弓弩掌握', type: '被动', cost: 10, rarity: 'common_combat_skill', description: '掌握了最基础的弓弩使用方式，至少可以射一射固定靶了。' },
        { name: '初级火枪掌握', type: '被动', cost: 10, rarity: 'common_combat_skill', description: '掌握了最基础的火枪使用方式，至少可以射一射固定靶了，装药时手别抖！' },
        { name: '健壮体魄', type: '被动', cost: 10, rarity: 'common_combat_skill', description: '轻微增加抗击打能力和韧性。HP上限+200。' },
        { name: '冲锋', type: '主动', cost: 10, rarity: 'common_combat_skill', description: '快速突进并击倒一名敌人，造成小范围震慑。消耗50SP。' },
        { name: '招架反击', type: '主动', cost: 10, rarity: 'common_combat_skill', description: '使用武器或盾牌招架一次攻击后，快速挥舞武器进行一次反击。消耗50SP。' },
        { name: '蓄力射击', type: '主动', cost: 15, rarity: 'common_combat_skill', description: '消耗体力，对单体目标进行一次蓄力射击，视目标的护甲和防御可能造成贯穿效果。消耗50SP。' },
        { name: '蓄力打击', type: '主动', cost: 15, rarity: 'common_combat_skill', description: '消耗体力，短暂蓄力后对单体目标进行一次强力攻击，使用重型武器时伤害会获得加值。消耗50SP。' },
        { name: '精准命中', type: '被动', cost: 18, rarity: 'common_combat_skill', description: '大幅提升攻击的准确性，暴击几率增加。' },
        { name: '阴影步', type: '主动', cost: 20, rarity: 'common_combat_skill', description: '融入阴影，进行短距离的瞬间移动，用于突袭或脱战。消耗10SP,40MP。' },
        { name: '箭步圆舞', type: '主动', cost: 20, rarity: 'common_combat_skill', description: '向前迅速踏步，接着蹲身蓄力后使用武器横扫周身。消耗40SP。' },
        { name: '剑刃连击', type: '主动', cost: 25, rarity: 'common_combat_skill', description: '挥舞剑刃类武器进行极快速的连续两次横斩。消耗45SP。' },
        { name: '风暴足', type: '主动', cost: 35, rarity: 'common_combat_skill', description: '单脚跺地在周身小范围卷起旋风，小幅击退近身敌人。消耗35SP。' },
        { name: '撼地', type: '主动', cost: 35, rarity: 'common_combat_skill', description: '短暂蓄力后使用重型武器砸地，使周身小体型敌人失衡，然后立刻挥舞武器进行一次回旋横扫攻击。消耗60SP。' },
        { name: '狮子斩', type: '主动', cost: 35, rarity: 'common_combat_skill', description: '蓄力后朝前方跳跃，用武器进行一次强力敲击，使用重型武器时伤害会获得加值。消耗70SP。' },
        { name: '鲜血斩击', type: '主动', cost: 35, rarity: 'common_combat_skill', description: '以自身鲜血附魔剑刃，挥出血刃造成一次极限8米的远程伤害。消耗25hp。' },
        { name: '辉石迅击', type: '主动', cost: 35, rarity: 'common_combat_skill', description: '剑覆辉石，横扫放出极限6米的短程光刃。消耗40MP。' },
        { name: '真空斩', type: '主动', cost: 50, rarity: 'common_combat_skill', description: '蓄力后挥出强力的直线剑气，极限15米射程。消耗100SP。' },
        { name: '英勇战吼', type: '主动', cost: 50, rarity: 'common_combat_skill', description: '发出震耳欲聋的战吼，激励友军并击退敌人，短暂提升团队士气。消耗150SP。' },

        // common_spell: '普通-法术'
        { name: '初级元素亲和', type: '被动', cost: 10, rarity: 'common_spell', description: '你能够初步感知并引导水、火、风、土、雷、冰、光、暗元素。评价:元素亲和是塑能学派元素法师们的基础天赋，“初级”代表你的这份天赋足够微弱和低劣，甚至无法分辨出到底你对哪种元素的亲和度更高。' },
        { name: '初级死亡亲和', type: '被动', cost: 10, rarity: 'common_spell', description: '你能够初步感知并引导死亡能量和负能量，并能够学会和使用粗浅的亡灵法术和诅咒法术。评价:死亡亲和是亡灵学派死灵法师和诅咒师的基础天赋，“初级”代表你的这份天赋足够微弱和低劣。' },
        { name: '初级抗拒之魂', type: '被动', cost: 10, rarity: 'common_spell', description: '你能够初步理解保护、阻碍与驱逐的真意，并能够学会和使用粗浅的保护法术、阻碍法术和驱逐法术。评价：抗拒之魂是防护学派防护法师的基础天赋，"初级"代表你的这份天赋足够微弱和低劣。' },
        { name: '初级次元支配', type: '被动', cost: 10, rarity: 'common_spell', description: '你能够初步感知到异次元共鸣和生物灵魂，并能够学会和使用粗浅的召唤法术、支配生物法术、以及空间法术。评价：次元支配是咒法学派咒法师的基础天赋，"初级"代表你的这份天赋足够微弱和低劣。' },
        { name: '初级预兆', type: '被动', cost: 10, rarity: 'common_spell', description: '你能够初步感知命运的轨迹和丝线，并能够学会和使用粗浅的预言法术和侦测法术。评价:预兆是预言学派预言学者们的基础天赋，“初级”代表你的这份天赋足够微弱和低劣。' },
        { name: '初级魅惑灵光', type: '被动', cost: 10, rarity: 'common_spell', description: '你能够初步感知生命灵魂的律动，魅力有轻微的提升，并能够学会和使用粗浅的惑控法术和欺瞒法术。评价：魅惑灵光是惑心学派惑控师的基础天赋，"初级"代表你的这份天赋足够微弱和低劣。' },
        { name: '初级镜之心', type: '被动', cost: 10, rarity: 'common_spell', description: '你能够初步分辨想象和现实的边界，并能够学会和使用粗浅的幻术与镜像法术。评价：镜之心是幻象学派幻术师的基础天赋，"初级"代表你的这份天赋足够微弱和低劣。' },
        { name: '初级物质转化', type: '被动', cost: 10, rarity: 'common_spell', description: '你能够初步理解“物质”的本质，并能够学会和使用粗浅的变化法术和炼金术。评价：物质转化是变化学派变形学者和炼金术师的基础天赋，"初级"代表你的这份天赋足够微弱和低劣。' },
        { name: '魔法伎俩', type: '主动', cost: 10, rarity: 'common_spell', description: '你可以消耗微少的魔力，使用出例如:点燃火苗、小型幻象、魔法烟花、一小捧水、一阵微风等没什么威力但是还算实用的魔法效果。消耗10MP。' },
        { name: '德鲁伊伎俩', type: '主动', cost: 10, rarity: 'common_spell', description: '你可以消耗微少的以太，使用出例如:预测未来6小时天气、让种子瞬间发芽、制造小花或落叶、关闭或打开花瓣等微小影响的自然效果。消耗10MP。' },
        { name: '星光', type: '主动', cost: 10, rarity: 'common_spell', description: '消耗魔力在头顶创造出蓝色的微小光源，照亮周围区域，在黑暗环境中提供持续照明，持续一小时。消耗10mp。' },
        { name: '法师之手', type: '主动', cost: 20, rarity: 'common_spell', description: '使用魔力凝聚一只无形的手，可以远程抓取或移动最多1kg物品、开锁或拿取小物品，持续10分钟。消耗10MP。' },
        { name: '次级幻影', type: '主动', cost: 15, rarity: 'common_spell', description: '你可以创造一个不超过2立方的静止幻影，可以发出声音，持续1分钟，可提前取消。消耗20MP。' },
        { name: '奥术飞弹', type: '主动', cost: 10, rarity: 'common_spell', description: '使用纯粹的魔力迅速凝聚一颗小型的深蓝色奥术飞弹射向目标，飞弹具有轻微的追踪效果，极限射程50米。消耗20MP。' },
        { name: '辉石迅魔砾', type: '主动', cost: 30, rarity: 'common_spell', description: '快速发射小型辉石魔砾，造成少量的纯粹魔力伤害。消耗30mp。' },
        { name: '护盾术', type: '主动', cost: 20, rarity: 'common_spell', description: '为你自己或一名队友制造一个魔力护盾，吸收最高200点伤害。消耗50MP。' },
        { name: '侦测魔法', type: '主动', cost: 50, rarity: 'common_spell', description: '侦测半径20米内的魔法陷阱与生物。消耗100MP。' },
        { name: '秘法锁', type: '主动', cost: 50, rarity: 'common_spell', description: '你触碰一个关着的门、窗、容器或出入口，并使目标被魔法上锁。秘法锁无法被任何非魔法方式解锁。消耗150MP。' },
        { name: '勇气', type: '主动', cost: 30, rarity: 'common_spell', description: '使目标在60秒内不会逃跑，并让目标的生命值和体力值上限提高一小部分，对方如果精神属性比你高且进行抗拒则会失效。惑心学派的小伎俩。消耗50MP。' },
        { name: '愤怒', type: '主动', cost: 30, rarity: 'common_spell', description: '使目标在60秒内会攻击所有看得见的任何东西，对方如果精神属性比你高且进行抗拒则会失效。惑心学派的小伎俩。消耗50MP。' },
        { name: '平静', type: '主动', cost: 30, rarity: 'common_spell', description: '使目标会停止攻击30秒，对方如果精神属性比你高且进行抗拒则会失效。惑心学派的小伎俩。消耗50MP。' },
        { name: '恐惧', type: '主动', cost: 30, rarity: 'common_spell', description: '使目标会感到恐惧并立刻逃跑30秒，对方如果精神属性比你高且进行抗拒则会失效。惑心学派的小伎俩。消耗50MP。' },
        { name: '火蛇术', type: '主动', cost: 35, rarity: 'common_spell', description: '经典的塑能学派法术，控制烈焰如蟒蛇般缠绕攻击单体目标，在30秒内持续造成火属性伤害和效果。消耗80MP。' },
        { name: '奥术洪流', type: '主动', cost: 35, rarity: 'common_spell', description: '凝聚纯粹的魔力对单体目标发射亮蓝色的魔力光束，附带微弱的冲击效果。消耗80MP。' },
        { name: '闪电斗篷', type: '主动', cost: 35, rarity: 'common_spell', description: '在自身周围生成跟随自身的微型闪电风暴，对附近的敌人造成雷电伤害，持续60秒。消耗80MP。' },
        { name: '骸骨之矛', type: '主动', cost: 40, rarity: 'common_spell', description: '由死亡能量凝聚成骨矛，飞速射向目标，附带轻度的贯穿效果。消耗100MP。' },
        { name: '冰冻射线', type: '主动', cost: 40, rarity: 'common_spell', description: '发射一道冰冷的射线，对目标造成寒冰属性伤害，并造成霜冻效果降低其行动速度。消耗100MP。' },
        { name: '烈焰射线', type: '主动', cost: 40, rarity: 'common_spell', description: '发射一道炽热的射线，对目标造成火焰属性伤害，并持续造成灼伤效果和伤害。消耗100MP。' },
        { name: '燃烧之手', type: '主动', cost: 40, rarity: 'common_spell', description: '一片稀薄的火焰将从你伸展的指尖向前射出。每个处于3米锥形内的目标受到火焰伤害和效果。消耗100MP。' },
        { name: '电爪', type: '主动', cost: 40, rarity: 'common_spell', description: '闪电从你的手中跃出，电击你尝试碰触的目标，对目标进行一次近战闪电属性法术攻击，附带麻痹效果。消耗100MP。' },
        { name: '魔法辉剑', type: '主动', cost: 40, rarity: 'common_spell', description: '召唤一次性的三柄悬浮周身的魔力辉剑，自动追踪并射向附近的目标，造成纯粹的魔法伤害。消耗120mp。' },
        { name: '辉石大魔砾', type: '主动', cost: 45, rarity: 'common_spell', description: '发射大型辉石魔砾，对目标造成较高的纯粹魔力伤害，附带贯穿效果。消耗120mp。' },
        { name: '能量箭矢', type: '主动', cost: 50, rarity: 'common_spell', description: '以弓为媒介，拉开弓弦凝聚能量箭矢。基础的能量箭矢为使用纯粹魔力凝聚的奥术箭矢。当持有元素亲和时可以凝聚对应的元素能量箭矢，会附带对应的元素效果(如霜冻、麻痹、凝滞等效果)。消耗150MP。' },
        { name: '元素激流', type: '主动', cost: 50, rarity: 'common_spell', description: '操作魔力并运用自身的元素亲和，迅速凝聚一道小型的元素激流，疾速射向目标，可对目标进行小幅度的追踪。射出时元素激流会根据自身的元素属性具现为相应的元素形态（如炽焰激流、锐利风刃、跃动雷链、穿刺冰锥、湍水激流、浊土激流、辉光射线、暗蚀飞弹等），命中时造成相应的元素伤害并附带微弱的元素效果（如点燃、撕裂、麻痹、霜冻、冲击、沉滞、净化、侵蚀）。评价:一个稀有且全面的塑能学派元素魔法。消耗120MP。' },
        { name: '匕首之云', type: '主动', cost: 60, rarity: 'common_spell', description: '你指定一点,在以该点为中心的5米立方区域内咒唤出旋转的魔力匕首。持续至多1分钟,消耗200MP。' },
        { name: '粉碎音波', type: '主动', cost: 65, rarity: 'common_spell', description: '你指定一点释放一阵持续10秒的震耳欲聋的噪音。以该点为中心半径3米球状区域内的所有目标受到魔力伤害和音波震荡的物理伤害。消耗250MP。' },
        { name: '召唤不眠骸骨', type: '主动', cost: 65, rarity: 'common_spell', description: ' 撕裂一道通往亡灵位面的裂隙，召唤出一只在徘徊在【无尽骸骨荒野】上的【不眠骸骨】为你作战，持续至主动解除或骨架溃散。【不眠骸骨】的等级始终与你【当前等级】保持一致，可召唤的【不眠骸骨】种类和形态受你【死亡亲和】技能等级影响。评价:一个极其稀有、充满了无限可能性的亡灵学派召唤法术，成长性极高，但受施法者自身实力限制极大。消耗500MP+。' },
        { name: '召唤星界生物', type: '主动', cost: 65, rarity: 'common_spell', description: '  打开一道通往无垠星界的通道，召唤一只未知的【星界生物】为你作战，持续至主动解除或能量耗尽。【星界生物】的等级始终与你【当前等级】保持一致，其形态、种类和能力取决于你【次元共鸣】技能的等级和你所拥有的【次元道标】（例如特定的亲和或血脉）。评价:一个极其稀有、充满了无限可能性的咒法学派召唤法术，成长性极高，但受施法者自身的实力限制极大。消耗500MP+。' },
        { name: '召唤元素仆役', type: '主动', cost: 65, rarity: 'common_spell', description: ' 打开一道元素裂隙，从中召唤出一只【元素仆役】为你作战，持续至主动解除或消散。【元素仆役】的等级将始终与你【当前等级】保持一致，可召唤的使魔种类和形态受你持有的【元素亲和】种类影响。评价:一个相当常见但全面的咒法学派召唤法术，成长性极高，但受施法者自身实力限制极大。消耗300MP。' },
        { name: '召唤战争骷髅小队', type: '主动', cost: 80, rarity: 'common_spell', description: ' 撕裂一道通往亡灵位面的裂隙，从【枯骨平原】召唤出一支【战争骷髅小队】为你作战，持续至主动解除或骨架溃散。【战争骷髅小队】由1名骷髅射手、1名骷髅狂战士（持骨制双刃战斧和投矛）和1名剑盾骷髅组成。【战争骷髅小队】的等级始终与你【当前等级】保持一致。评价:一个常规的低阶亡灵学派召唤法术，召唤骷髅大军的第一步，但只有骷髅。消耗300MP。' },

        // common_prayer: '普通-祷告'
        { name: '祝福圣水', type: '主动', cost: 10, rarity: 'common_prayer', description: '使用制造圣水为队友恢复少量生命值，并可以净化部分毒性。消耗50MP。' },
        { name: '祝福武器', type: '主动', cost: 20, rarity: 'common_prayer', description: '提升武器攻击力，并让其获得神圣属性，持续一小时。消耗100MP。' },
        { name: '祝福护甲', type: '主动', cost: 20, rarity: 'common_prayer', description: '提升护甲防御力，并让其获得神圣属性，持续一小时。消耗100MP。' },
        { name: '圣焰', type: '主动', cost: 10, rarity: 'common_prayer', description: '火焰般的光辉向10米内你所能看见的一个生物降下,消耗50MP。' },
        { name: '光导箭', type: '主动', cost: 20, rarity: 'common_prayer', description: '一道闪耀光束击向20米内你所选择的一个生物,目标将受到光耀伤害,下一次对该目标进行的攻击检定具有优势,消耗100MP。' },
        { name: '命令术', type: '主动', cost: 20, rarity: 'common_prayer', description: '你对10米内你所能看见的一个生物说出一个单词命令。目标必须成功通过一次感知豁免，否则将在它的下个回合遵循该命令。,消耗100MP。' },
        { name: '祝福术', type: '主动', cost: 20, rarity: 'common_prayer', description: '你触碰一个自愿生物。目标在下一次鉴定中获得加值,消耗100MP。' },
        { name: '治愈真言', type: '主动', cost: 20, rarity: 'common_prayer', description: '10米内你所选且你能看见的一个生物回复一定量的生命值,消耗100MP。' },
        { name: '沉默术', type: '主动', cost: 40, rarity: 'common_prayer', description: '5分钟内，任何声音都无法在10米内你所选择一点为中心的5米半径球体内被制造或传入其中，在里面不可能施放需要声音构材的法术,消耗200MP。' },
        { name: '诚实之域', type: '主动', cost: 40, rarity: 'common_prayer', description: '你以你所为中心创造出一个5米半径球体范围，能够抵御谎言的魔法领域。,消耗200MP。' },
        { name: '次级复原术', type: '主动', cost: 40, rarity: 'common_prayer', description: '你触碰一个生物，并结束影响着它的任一个疾病或状态,消耗200MP。' },
        { name: '目盲/耳聋术', type: '主动', cost: 40, rarity: 'common_prayer', description: '选择10米内你所能看见的一个生物以让它进行一次体质豁免。若它失败，则目标将在1分钟内目盲或耳聋（由你选择）,消耗200MP。' },
        { name: '守护联结', type: '主动', cost: 40, rarity: 'common_prayer', description: '此法术守护着你触碰的一个自愿生物，且在你和目标之间创造一道神秘的链接直到法术结束,消耗200MP。' },
        { name: '治愈祈祷', type: '主动', cost: 40, rarity: 'common_prayer', description: '最多六个10米内你所选择且你能看见的生物回复一定量的生命值。,消耗200MP。' },
        { name: '卜筮', type: '主动', cost: 40, rarity: 'common_prayer', description: '你从另一个世界的存在接受到一个预兆，揭露关于你在接下来30分钟内预计去做的一件具体行动的结果,消耗200MP。' },
        { name: '至圣斩', type: '主动', cost: 50, rarity: 'common_prayer', description: '你攻击的目标受到额外光耀伤害。若目标为邪恶阵营、深渊生物、诅咒生物或亡灵生物，则此次伤害必定暴击。消耗380MP。' },
        { name: '圣域术', type: '主动', cost: 50, rarity: 'common_prayer', description: '你以你所为中心创造出一个5米半径球体范围，友方单位获得优势，消耗150MP。' },
        { name: '祝福光环', type: '被动', cost: 50, rarity: 'common_prayer', description: '散发神圣光芒，提升少许附近友军的士气、攻击力和防御力。' },
        {"name": "恢复","type": "主动","cost": 20,"rarity":"common_prayer","description": "恢复自身一定量生命值，消耗60MP"},
        {"name": "燃火","type": "主动","cost": 15,"rarity":"common_prayer","description": "从手中引发瞬间燃烧的火焰进行近距离攻击，可蓄力造成更高伤害，消耗30MP"},
        {"name": "紧急恢复","type": "主动","cost": 18,"rarity":"common_prayer","description": "能在行动时执行，些微恢复自身生命值，消耗45MP"},
        {"name": "圣防护","type": "主动","cost": 22,"rarity":"common_prayer","description": "赋予对象一层神圣帷幕提升自身魔法、精神防护，持续一定时间，消耗55MP"},
        {"name": "雷电枪","type": "主动","cost": 25,"rarity":"common_prayer","description": "向前方发射雷电，击中小型怪后有僵直，可蓄力增加一段伤害，消耗70MP"},
        {"name": "血焰刀刃","type": "主动","cost": 23,"rarity":"common_prayer","description": "在右手武器上附上血焰，攻击时引发燃烧并累积出血，持续一定时间，消耗65MP"},
        {"name": "毒雾","type": "主动","cost": 25,"rarity":"common_prayer","description": "在前方形成一片毒雾，对雾中目标施加中毒累积，消耗40MP"},
        {"name": "火焰啊，赐予我力量！","type": "主动","cost":26,"rarity":"common_prayer","description": "使用后30秒内，提升自身物理和火属性伤害，加快精力回复，消耗75MP"},
        { name: '圣域', type: '主动', cost: 50, rarity: 'common_prayer', description: '将武器插地生成半径5米的光环，持续回血，敌人入内受光伤。消耗120SP，100MP' },

        // common_ritual: '普通-仪式'

        // common_other: '普通-其他'
        { name: '初级炼金术', type: '被动', cost: 20, rarity: 'common_other', description: '掌握基础炼金原理，能够配制普通品质的药剂、爆炸粉末，加工并处理普通品质的炼金材料。评价:基础中的基础，而且不包括附魔能力。' },
        { name: '初级锻造术', type: '被动', cost: 20, rarity: 'common_other', description: '学会熔炼与锤打常见金属，可打造普通品质的武器、工具与护甲，或是修复其上的轻微磨损。评价:基础中的基础，而且不包括附魔能力。' },
        { name: '次级附魔术', type: '被动', cost: 50, rarity: 'common_other', description: '学会在武器或护具上镌刻简易符文，可以赋予普通品质装备和物品最低级的附魔效果(如微光、轻盈、保温等)，最低级的附魔不提供任何战斗能力方面的加持，也不可能出现属性加值。评价:下一步是学会初级附魔术，小子。' },
        { name: '图腾雕刻', type: '主动', cost: 45, rarity: 'common_other', description: '以灵木或兽骨为材，雕刻多种简易的普通品级先祖图腾，赋予范围内盟友持续祝福效果。' },
        { name: '草药辨识', type: '被动', cost: 10, rarity: 'common_other', description: '通过色泽、气味与纹理辨认大部分常见草药，了解其基础效用、毒性及简易配伍方式。' },
        { name: '超凡感知', type: '被动', cost: 30, rarity: 'common_other', description: '感官能力得到极大强化，能够借助以太察觉常人无法察觉的信息和危险。' },
        { name: '语言大师', type: '被动', cost: 15, rarity: 'common_other', description: '能够快速学习并流利掌握任何遇到的语言。' },
        { name: '净化饮食', type: '主动', cost: 20, rarity: 'common_other', description: '以你在所选10米内一点为中心，1.5米半径球体内的所有非魔法的食物和饮料被净化，且变得没有毒素和疾病。消耗100MP。' },
        { name: '透视', type: '主动', cost: 30, rarity: 'common_other', description: '视觉可以直接穿透总计4米厚度的障碍物，直接看到建筑内部或人体内部，持续30秒，无法穿透带有魔法防御的目标。以人为目标释放时，对方如果精神属性比你高且进行抗拒则会失效。消耗40MP。' },
        { name: '敲击术', type: '主动', cost: 30, rarity: 'common_other', description: '选择一个射程内你所能看见的一个物体。被寻常锁关住、钉住、或闩住的物体将被解锁、解封、或被解闩。如果该物体被复数道锁给锁上，则只有其中一个会被解锁。消耗100MP。' },
      ];

      const ALL_POSSIBLE_RED_THREADS = [
        // 第一层级 (1-4级, 30点)
        { name: '艾琳', type: '第一层级', cost: 30, description: '第一层级/普通层级; 等级:15; 种族:人类; 身份:城镇卫兵家的女儿; 职业:见习牧师学徒; 性格:开朗、善良、有点冒失。; 喜爱:她对你抱有纯真的憧憬与爱慕。喜欢为你烤制各种口味的面包，并期待获得你的称赞。在你受伤时，会慌张又认真地为你包扎伤口。喜欢在闲暇时坐在你身边，听你讲述冒险的故事。; 外貌与特质:一头温暖的亚麻色短发，脸上有点小雀斑，澄澈的棕色眼眸里总是闪烁着活力的光芒。身形娇小，身上总带着一股淡淡的麦香。; 衣物装饰:朴素的村女服饰。; 角色装备:暂无。; 是否缔结红线:是; 好感度:250; 羁绊技能:【主动/爱心面包】:每日一次，艾琳为你烤制一个充满爱心的面包，食用后获得一个持续1小时的【微弱生命恢复】效果。【被动/慰藉之心】:艾琳的陪伴让你感到安心，你的负面精神状态（如恐惧、混乱）抗性微量提升。' },
        { name: '菲娜', type: '第一层级', cost: 30, description: '第一层级/普通层级; 等级:15; 种族:精灵; 身份:精灵平民; 职业:采药人/猎人学徒; 性格:文静、害羞、对外界充满好奇。; 喜爱:她将你视为重要的朋友与依靠，这份感情正悄悄转变为爱意。喜欢和你一起在林间漫步，为你指认各种奇特的植物。虽然不善言辞，但会用弓箭默默守护你的背后。当你注视她时，她会羞涩地低下头，耳尖微微泛红。; 外貌与特质:柔顺的翠绿色长发，用藤蔓简单束起，尖尖的耳朵格外灵动，碧绿的眼眸如林中清泉。身姿纤细。; 衣物装饰:便于活动的皮甲和绿色短裙。; 角色装备:小巧的木弓。; 是否缔结红线:是; 好感度:280; 羁绊技能:【主动/林间低语】:消耗少量魔力，让菲娜与周围的植物沟通，可以探知附近小范围内的生物动向。【被动/自然亲和】:在森林或草地环境中，菲娜的体力恢复速度微量提升。' },
        { name: '米可', type: '第一层级', cost: 30, description: '第一层级/普通层级; 等级:15; 种族:兽族(猫族); 身份:贫民/流浪儿; 职业:佣兵团新手杂役; 性格:警惕、机灵、外冷内热。; 喜爱:你是在她最困难时给予温暖的人，她已将你认定为唯一的家人和主人。喜欢蜷缩在你怀里睡觉，发出满足的咕噜声。会把偷来的“宝物”（通常是亮晶晶的小玩意）献给你。允许你抚摸她敏感的耳朵和尾巴，这是她表达最高信任的方式。; 外貌与特质:蓬松的黑色短发下，一双灵动的金色猫瞳格外显眼，头顶有对黑色的猫耳，身后是同样颜色的尾巴。身材瘦小，动作敏捷。; 衣物装饰:打满补丁但很干净的旧衣服。; 角色装备:暂无。; 是否缔结红线:是; 好感度:300; 羁绊技能:【主动/灵巧之爪】:每日三次，米可可以为你开锁一个简易的锁具或尝试偷窃一件价值不高的物品。【被动/夜行者】:在夜晚或昏暗环境下，米可进行潜行时更不容易被发现。' },
        { name: '露娜', type: '第一层级', cost: 30, description: '第一层级/普通层级; 等级:15; 种族:翼族; 身份:翼民平民/信使; 职业:信使学徒; 性格:活泼、乐观、有些路痴。; 喜爱:她深深地迷恋着你，认为你是地面上最帅气、最强大的人。喜欢从空中盘旋而下，给你一个惊喜的拥抱。喜欢让你梳理她翅膀上的羽毛，这会让她感到非常舒服和亲密。经常会分享一些道听途说但并不准确的“重要情报”给你。; 外貌与特质:天蓝色的齐肩短发，蔚蓝的眼眸充满神采，背后有一对尚未完全长成的白色羽翼，耳后有小巧的头翅。体态轻盈。; 衣物装饰:信使公会的制服短裙，白色过膝袜，便于飞行的短靴。; 角色装备:暂无。; 是否缔结红线:是; 好感度:260; 羁绊技能:【主动/轻羽之风】:消耗少量体力，让露娜抱着你进行短距离的滑翔，可以跨越一些小型障碍。【被动/天空的祝福】:你受到的坠落伤害减少50%。' },

        // 第二层级 (5-8级, 80点)
        { name: '克莱尔·梵卓', type: '第二层级', cost: 60, description: '第二层级/中坚层级; 等级:35; 种族:人类; 身份:王家书库特聘学者/C级冒险者; 职业:学者 ; 性格:知性、冷静、一丝不苟，但对在意的人会展露温柔。; 喜爱:她对你充满了浓厚的学术兴趣和个人爱慕。喜欢与你探讨古代遗迹的秘密，并为你解读晦涩的古文。在你熬夜研究时，会为你披上毯子，并准备提神的饮品。喜欢和你进行智力游戏，并享受被你“将死”的瞬间。私下里，她渴望你用强硬的方式打乱她一丝不苟的常态。; 外貌与特质:乌木般的黑色长发用一根银簪优雅地盘起，镜片后的紫色眼眸深邃而睿智。身材高挑，曲线优美，散发着书卷与墨水的气息。; 衣物装饰:金丝眼镜，剪裁合身的学者长袍。; 角色装备:暂无。; 是否缔结红线:是; 好感度:450; 羁绊技能:【主动/知识解析】:每日一次，克莱尔可以为你鉴定一件未知物品（非神器级），或提供一条与你当前困境相关的关键情报。【被动/学者的洞察】:你在解读文献或分析情报时，有更高几率获得额外信息。' },
        { name: '伊莉雅·月影', type: '第二层级', cost: 60, description: '第二层级/中坚层级; 等级:35; 种族:精灵; 身份:月神殿祭司助理; 职业:月光游侠学徒; 性格:高贵、典雅、悲天悯人。; 喜爱:她相信你是命运指引的伴侣，对你的爱意深沉而神圣。喜欢在月光下为你祈祷和祝福。习惯在入睡时，用她带有月神气息的魔力为你构建一个安宁的梦境。性爱时，她会展现出与平日神圣气质截然相反的、顺从又渴求的一面，将此视为灵魂与肉体最神圣的结合。; 外貌与特质:月光般的银色长发直垂至脚踝，淡金色的眼眸仿佛蕴藏着星辰。额间有月形的银色印记，气质空灵而圣洁，赤足。; 衣物装饰:华丽的露背祭司长袍，布料如月光般流淌，脚踝上戴着银色的铃铛。; 角色装备:暂无。; 是否缔结红线:是; 好感度:500; 羁绊技能:【主动/月神之慰】:消耗魔力，伊莉雅吟唱祷文，为你恢复中量生命值，并为你附加一个能吸收少量伤害的月光护盾。【被动/星辰庇护】:在夜晚或受到月光照耀时，你受到的魔法伤害降低10%。' },
        { name: '芬里娅', type: '第二层级', cost: 60, description: '第二层级/中坚层级; 等级:35; 种族:兽族(狼族); 身份:兽族氏族狩猎队长; 职业:正式战士; 性格:勇猛、忠诚、富有野性的占有欲。; 喜爱:你通过力量赢得了她的认可与爱情，她视你为唯一的头狼与配偶。喜欢用舔舐的方式为你清理伤口，这是兽族的最高礼遇。习惯以半蹲的姿势守护在你身边，警惕任何潜在的威胁。在二人世界里，她会化身为热情似火的母狼，渴望你用最原始的方式征服她，让她为你诞下最强的后代。; 外貌与特质:一头桀骜不驯的银灰色长发，锐利的琥珀色兽瞳，头顶有一对毛茸茸的狼耳。身材高大健美，肌肉线条流畅充满力量感。身后一条毛茸茸的大尾巴会根据情绪而摆动。; 衣物装饰:兽皮胸甲，兽皮战裙。; 角色装备:暂无。; 是否缔结红线:是; 好感度:480; 羁绊技能:【主动/狩猎律动】:与芬里娅共同作战时开启，你们的协同攻击会为敌人叠加【猎杀印记】，使你们的攻击攻击造成额外伤害。【被动/野性直觉】:与芬里娅同行时，你对周围的敌意和陷阱的感知会变得更加敏锐。' },
        { name: '赛拉菲娜', type: '第二层级', cost: 60, description: '第二层级/中坚层级; 等级:35; 种族:翼族; 身份:圣翼骑士团成员; 职业:圣翼骑士团骑士学徒; 性格:严谨、可靠、富有责任心。; 喜爱:她欣赏你的强大与品格，将你视为可以托付后背的伴侣。喜欢在结束任务后，与你在云端之上并肩飞行。作为你的伴侣，她会用翅膀将你紧紧护在身下，无论是在休憩或情爱之时。她会认真执行你下达的任何“命令”，并从中获得满足感。; 外貌与特质:耀眼的金色长发扎成高马尾，凌厉的碧色眼眸如同鹰隼。背后是两对强健有力的洁白羽翼，展开时极具压迫感。丰满成熟的女性曲线，气质英姿飒爽。; 衣物装饰:暂无。; 角色装备:合身的银色轻型全身甲。; 是否缔结红线:是; 好感度:460; 羁绊技能:【主动/鹰眼侦查】:每日一次，赛拉菲娜可以飞至高空，为你侦查半径5公里范围内的地形和大型单位动向，并绘制成简易地图。【被动/顺风而行】:与赛拉菲娜同行时，你在野外非战斗状态下的行进速度提升15%。' },
        // 第三层级 (9-12级, 150点)
        { name: '水银灯', type: '第三层级', cost: 150, description: '第三层级/精英层级; 等级:11; 种族:仿生炼金人偶; 身份:你自制的仿生人偶; 职业:人偶审判战士; 性格:拥有人造灵魂，其灵魂、行为和思维方式与人类完全无异。性格清冷、矜持、傲娇。; 喜爱:视你为最爱的父亲与主人，喜欢用矜持的方式对你撒娇，渴望被你宠爱与爱抚，喜欢听你唱歌并跟着哼唱，平时喜欢坐在你的肩膀上。渴望守护你的一切，你的愿望和爱好就是她的愿望和爱好。; 外貌与特征:身高75cm的仿生人偶，肉体娇嫩柔软，有人类的一切生理功能。她有一对宽大的漆黑羽翼、月光般的银色长发、猩红宝石般的眼眸。她嗓音清冷，气质优雅。; 衣物装饰:黑白色哥特人偶长裙，黑丝吊带袜，漆黑小皮靴。不穿内衣裤。; 角色装备:巨大的漆黑收割者镰刀。; 登神长阶:未开启; 是否缔结红线:是; 好感度:1000; 评价:我的父亲，我的主人，好想被您抱在怀中……; 背景故事:由你亲手制作的人偶，睁开眼的那一刻，爱上了自己的制作者，自己的“父亲”。; 羁绊技能:【主动/死亡收割】:消耗你的1000MP。从你身上借用魔力，挥舞巨大镰刀斩出漆黑的魔力斩击，对最多三个目标同时造成对方生命上限30％的真实伤害。【被动/N之领域】:水银灯可以通过她专有的次级位面“N之领域”穿越空间，无视距离随时来到你的身边。她也可在自身重伤或濒死时,独自返回“N之领域”安全的恢复。' },
        { name: '塞莱丝汀·艾瑞隆', type: '第三层级', cost: 150, description: '第三层级/精英层级; 等级:10; 种族:翼民; 身份:翼民贵族/艾瑞隆男爵/艾瑞隆镇领主; 职业:圣光牧师/专业厨师; 性格:温柔、善良，偶尔有些天然呆。; 喜爱:她深爱着你。喜爱烹饪美食。习惯在睡觉时用宽大柔软的翅膀把你整个包裹起来。; 外貌与特质:金发及腰，眼眸如蓝宝石般清澈，背负有两对宽大的白金色羽翼，耳后上方有白金色的小巧头翅。身材高挑，性感丰腴，巨乳肥臀。气质恬静温和，总是带着治愈人心的微笑，嗓音柔和温暖。; 衣物装饰:白金色镶边的神圣牧师长袍，白色乳贴，白金色镂空内裤，白丝吊带袜，金边白底高跟鞋。; 角色装备:神殿牧师权杖(腰侧悬挂); 登神长阶:未开启; 是否缔结红线:是; 好感度:700; 评价:我好像爱上他了，这就是命运赐给我的礼物吗？如果能让他尝尝我做的饭就好了……; 背景故事:翼民贵族艾瑞隆家族当代族长，自小出身高贵，肩负着家族和领主的职责与荣耀。; 羁绊技能:【主动/奉献净化】:每日一次，为你清除不超过塞莱丝汀“生命层级”的一切临时负面状态。【被动/守护之心】:在你即将遭受致命伤害时，塞莱丝汀会无视空间距离立刻察觉，并可主动选择为你承担此次伤害。' },
        { name: '欣特莱雅·白金', type: '第三层级', cost: 150, description: '第三层级/精英层级; 等级:11; 种族:兽族(半人马); 身份:前阴影之手杀手/你的爱人; 职业:白金射手/杀手; 性格:慵懒、散漫、清冷。她不会叫你主人，而是视你为挚爱。; 喜爱:对你满怀爱意和憧憬。她喜爱清净的生活，习惯疏远的社交方式，说话方式总是带着一丝慵懒，和他人交流时习惯带点轻微的讽刺和自嘲。她喜欢让你骑在她的马背上，驮着你在无人清净之处散步。; 外貌与特质:身形优雅而高大，兼具柔美与力量，体型高度约2.5米。气质优雅而慵懒，嗓音如银铃般清澈。有一头雪色长发流泻至腰际，雪白纤眉，熔金般的眼瞳。上半身是曲线玲珑的女性形体，肌肤白皙如雪，肥硕挺翘的雪白巨乳会随她奔驰而如波涛般起伏，在空中划出弧线、上下跳动、相互拍打。自人形的纤嫩腰肢向后延伸，下半身是矫健优雅的马躯，浑身覆盖着纯洁的雪白毛发，有银白色鬃毛和马尾。; 衣物装饰:上半身穿着纯白露脐无袖披肩，人身腰部套着白色高开叉裙摆。为方便你骑乘，马背套上黑白色马鞍，马鞍向后延伸披有纯白帘布(马尾处开孔)遮蔽马臀处隐私部位。四只马蹄套有纯白长筒皮靴。; 角色装备:天马长弓(左腰侧悬挂)/白桦树箭壶(右腰侧悬挂); 登神长阶:未开启; 是否缔结红线:是; 好感度:750; 评价:想和他一起去看马戏团表演，听说雾晶港有什么“游乐园”，那里会不会很好玩呢？; 背景故事:她曾被阴影之手用恶毒的魔法控制，被迫成为杀手卖命，后被你拯救，从此对你满怀憧憬和爱意。; 羁绊技能:【主动/天马视域】:消耗魔力蓄力拉弓，凝聚光属性的能量箭矢，进行大威力的超远距离狙击。【被动/白金之心】:欣特莱雅拥有高级光属性和神圣属性亲和。。' },
        { name: '奈菲丝', type: '第三层级', cost: 150, description: '第三层级/精英层级; 等级:11; 种族:海渊龙(亚种海龙); 身份:你的宠物/坐骑; 职业:战斗魔宠/【首领模板】; 性格:意识和心理年龄相当于3岁左右的人类儿童。温顺、爱撒娇。; 喜爱:喜欢在深水和海水中畅游生活。她渴望时刻粘在你身边被你爱抚，喜欢盘起自己长长的身体温柔地把你圈在中间。她很喜欢你赐予她的名字，喜欢叫你为“爸爸主人”。对你怀有永恒的爱慕与忠诚。; 外貌与特质:生理年龄只有50岁左右的幼龙。拥有类蛇形的优美流线型躯体、细密的深沉黑蓝色鳞片、海蓝色的巨大眼眸、头顶一只梦幻的海蓝色海晶犄角。体长约6米。; 衣物装饰:你赠与她的镶嵌于犄角顶端血红晶石。; 角色装备:暂无; 登神长阶:未开启; 是否缔结红线:是; 好感度:1000; 评价:爸爸……主人……在一起……; 背景故事:本是深海中自由自在的小海龙，被你穿越而来的灵魂吸引，在系统助手的指引下与你缔结了红线。; 羁绊技能:【主动/唤涡】:消耗大量魔力，在水域中制造一个拥有极强拉扯力、能拉扯并吞没一切恐怖漩涡，即使是水生生物也会其吞没。需至少2个小时的冷却时间。【被动/灵魂羁绊】:奈菲丝的灵魂与你直接相连，她可以无视空间距离，通过灵魂链接和你进行意识交流。你可以消耗500MP，通过灵魂链接撕开空间隧道，无视距离将奈菲丝召唤到自己身边。' },
        { name: '伊格妮丝', type: '第三层级', cost: 150, description: '第三层级/精英层级; 等级:11; 种族:炎狱龙(亚种火龙); 身份:你的宠物/坐骑; 职业:战斗魔宠/【首领模板】; 性格:意识和心理年龄相当于3岁左右的人类儿童。活泼、爱争宠。; 喜爱:喜欢生活在炎热干燥的环境中，例如火山口。她渴望时刻粘在你身边被你爱抚，喜欢用自己带着细刺的幼龙大舌头舔舐你的身体。她很喜欢你赐予她的名字，喜欢叫你为“爸爸主人”。对你怀有永恒的爱慕与忠诚。; 外貌与特质:生理年龄只有50岁左右的幼龙。拥有狰狞的黑红色甲壳和鳞片、翼展约5米的巨大黑红色龙翼、巨大的金色龙种竖瞳、头顶有一对黑红晶石犄角。可以展开双翅借助魔力短途飞翔。体型约4米。; 衣物装饰:你赠与她的左爪趾上的辉金戒指。; 角色装备:暂无; 登神长阶:未开启; 是否缔结红线:是; 好感度:1000; 评价:爸爸……主人……我的！; 背景故事:本是生活在火山中无忧无虑的小火龙，，被你穿越而来的灵魂吸引，在系统助手的指引下与你缔结了红线。; 羁绊技能:【主动/炎狱吐息】:消耗大量魔力，喷吐出一道锥形扩散的炎狱吐息(火属性/死亡属性)，覆盖前方约8米范围内的所有目标。需至少2个小时的冷却时间。【被动/灵魂羁绊】:伊格妮丝的灵魂与你直接相连，她可以无视空间距离，通过灵魂链接和你进行意识交流。你可以消耗500MP，通过灵魂链接撕开空间隧道，无视距离将伊格妮丝召唤到自己身边。' }
      ];

      const ALL_POSSIBLE_BACKGROUNDS = [
        // --- 通用背景 ---
        { name: '【自定义开局】', description: '自由发挥你的想象力，编写你自己的人物初始背景。', bgType: 'general' },
        { name: '【旅途与幸运】女神的指引', description: '你在一个破败的神龛前祈祷时，旅途与幸运的女神"泰珂"似乎听到了你的声音。你获得了一个神谕：前往最近的城镇，在"第一声钟响时遇到的第一个人"身上，有你命运的转机，或许你能遇到那个“她”？', bgType: 'general' },
        { name: '【护送商队】金狮的低语', description: '金狮商会的一支商队需要穿越盗匪横行的区域。任务看似简单，但你偶然听到，商队护卫在私下讨论货物中藏着的"禁忌品"。这趟旅程可能不只是对抗盗匪那么简单。', bgType: 'general' },
        { name: '【历史的尘埃】第二次魔王战争古战场', description: '一位来自"伯伦斯法环联邦"身份尊贵的历史学者雇佣你和一整个中型佣兵团作为保镖，深入第二次魔王战争的古战场，也就是如今的"无尽深渊地城"进行探索。他坚信那里埋藏着英雄们遗落的神器。', bgType: 'general' },
        { name: '【盗贼的邀约】暗影中的交易', description: '一张黑色的卡片悄无声息地出现在你的口袋里，上面是"暗影之手"的印记。他们邀请你去城中最混乱的街区进行一场交易。', bgType: 'general' },
        { name: '【阴霾中的抉择】帝国的通缉令', description: '在靠近兽族联盟的帝国边境城镇，你看到一张通缉令，悬赏一名"叛逃的帝国士兵"。然而，酒馆里的佣兵却说，那名士兵是因为发现了某个贵族的秘密才被灭口的。', bgType: 'general' },

        // --- 种族限定 ---
        { name: '【种族限定】圣金之翼的试炼', description: '（仅限翼民）作为一名年轻的翼民，你即将接受攀登圣山、面见教皇的“圣金之翼”试炼。这不仅是对你飞行技巧和信仰的考验，也是决定你未来在圣都梵尼亚地位的关键仪式。', requiredRace: '翼民', bgType: 'race' },
        { name: '【种族限定】生命庆典的骚动', description: '（仅限精灵）作为一名精灵，你被长者派去调查“新芽之月”生命庆典上出现的魔力紊乱现象。这股力量似乎源自森林深处，它既可能带来新生，也可能引向腐化。', requiredRace: '精灵', bgType: 'race' },
        { name: '【种族限定】失落的氏族图腾', description: '（仅限兽族）你的氏族图腾被敌对部落偷走了，这是奇耻大辱。你必须独自潜入对方的领地，在先祖之魂的怒火降临前，凭自己的力量和荣耀将图腾夺回。', requiredRace: '兽族', bgType: 'race' },
        
        // --- 地区限定 ---
        { name: '【地区限定】踏星仪式', description: '（仅限“伯伦斯法环”开局）听闻“伯伦斯法环”三年一度的大型学徒招募仪式“踏星仪式”即将举行，你决定前往“伯伦斯法环”求学，一路日夜兼程，你终于赶在伯伦斯法环的“踏星仪式”当天来到了雾晶港。穿越宏伟庞大的魔幻城市，步入城市中心的伯伦斯广场，你在熙熙攘攘的人群中排队进入那高耸入云的魔幻巨塔“苍穹之塔”。此刻你身处塔中宽广恢弘的学徒招募大厅，和上千人一起等待着那张测试天赋和技能、决定自己命运的魔法羊皮纸。', requiredLocation: '大陆东北部沿海区域-伯伦斯法环联邦-雾晶港', bgType: 'location' },
        { name: '【地区限定】无尽之雨和无尽之旅', description: '（仅限诺瓦·瓦伦蒂亚城开局）你来到了整片大陆上最大的冒险者之城——诺瓦·瓦伦蒂亚城。无尽的雨林、庞大的诺瓦尔河、传说中的龙姬、以及神话中封印了第二代魔王的神迹“无尽深渊地城”，这座坐落于原始魔法雨林“无尽树海”的雨之城，将成为你传奇史诗的起点。此刻你身处整片大陆上规模最大的冒险者公会分会——“瓦伦蒂亚冒险者公会”的服务大厅中，正打算注册成为一名正式的冒险者。', requiredLocation: '大陆西南部区域-无尽树海-奥古斯提姆帝国-诺瓦·瓦伦蒂亚城', bgType: 'location' },
        { name: '【地区限定】王国的暗流', description: '（仅限索伦蒂斯王国开局）索伦蒂斯王国的海军正在秘密寻找一件名为"海龙之牙"的遗物，据说它能平息风暴。一位神秘的贵族委托你抢先一步找到它，他似乎另有图谋。', requiredLocation: '大陆东南部区域-索伦蒂斯王国', bgType: 'location' },
        { name: '【地区限定】北境的呼唤', description: '（仅限诺斯加德联盟开局）诺斯加德联盟的锻造师协会急需一种只在"永冻冰原"上才能找到的"永冻冰晶"。这不仅是一趟深入魔物腹地的危险旅程，更是赢得这些坚韧北方人尊重的机会。', requiredLocation: '大陆东北部区域-诺斯加德联盟', bgType: 'location' }
      ];

      const ALL_POSSIBLE_TALISMANS = [
        { name: '红琥珀链坠', type: '饰品', cost: 13, rarity: 'uncommon', description: '镶有小块红色琥珀的链坠。在世界各地都有琥珀，封存了一小块久远的过去，其中红琥珀蕴藏了原始的生命力。能提升生命值的上限（+6%最大生命值HP）。' },
        { name: '红琥珀小链坠', type: '饰品', cost: 13, rarity: 'uncommon', description: '镶有小块红色琥珀的链坠。在世界各地都有琥珀，封存了一小块久远的过去，其中红琥珀蕴藏了原始的生命力。能提升生命值的上限（+6%最大生命值HP）。' },
        { name: '红琥珀链坠', type: '饰品', cost: 26, rarity: 'rare', description: '镶有多块红色琥珀的链坠。在世界各地都有琥珀，封存了一小块久远的过去，其中红琥珀蕴藏了原始的生命力。能提升生命值的上限（+12%最大生命值HP）。' },
        { name: '蓝琥珀链坠', type: '饰品', cost: 13, rarity: 'uncommon', description: '镶有小块蓝色琥珀的链坠。在世界各地都有琥珀，封存了一小块久远的过去，其中蓝琥珀蕴藏了原始的魔力。能提升专注值的上限（+6%最大专注值MP）。' },
        { name: '蓝琥珀小链坠', type: '饰品', cost: 13, rarity: 'uncommon', description: '镶有小块蓝色琥珀的链坠。在世界各地都有琥珀，封存了一小块久远的过去，其中蓝琥珀蕴藏了原始的魔力。能提升专注值的上限（+6%最大专注值MP）。' },
        { name: '蓝琥珀链坠', type: '饰品', cost: 26, rarity: 'rare', description: '镶有多块蓝色琥珀的链坠。在世界各地都有琥珀，封存了一小块久远的过去，其中蓝琥珀蕴藏了原始的魔力。能提升专注值的上限（+12%最大专注值MP）。' },
        { name: '绿琥珀链坠', type: '饰品', cost: 13, rarity: 'uncommon', description: '镶有小块绿色琥珀的链坠。在世界各地都有琥珀，封存了一小块久远的过去，其中绿琥珀蕴藏了原始的活力。能提升精力值的上限（+6%最大精力值SP）。' },
        { name: '绿琥珀小链坠', type: '饰品', cost: 13, rarity: 'uncommon', description: '镶有小块绿色琥珀的链坠。在世界各地都有琥珀，封存了一小块久远的过去，其中绿琥珀蕴藏了原始的活力。能提升精力值的上限（+6%最大精力值SP）。' },
        { name: '绿琥珀链坠', type: '饰品', cost: 26, rarity: 'rare', description: '镶有多块绿色琥珀的链坠。在世界各地都有琥珀，封存了一小块久远的过去，其中绿琥珀蕴藏了原始的活力。能提升精力值的上限（+12%最大精力值SP）。' },
        { name: '恩惠露滴护符', type: '饰品', cost: 25, rarity: 'rare', description: '用金色琥珀与黄铜制成，参考久远以前，大地上的生命承接世界树滴下的露滴时的模样。随时间缓慢恢复生命值（生命值HP+20/min）。' },
        { name: '蓝色恩惠露滴护符', type: '饰品', cost: 25, rarity: 'rare', description: '用蓝色琥珀与黄铜制成，参考久远以前，大地上的生命承接世界树滴下的露滴时的模样。随时间缓慢恢复专注值（专注值MP+10/min）。' },
        { name: '绿龟挂坠', type: '饰品', cost: 14, rarity: 'uncommon', description: '参考绿乌龟的模样制成的护符。乌龟是著名的营养食材，为精力无穷的象征。据说称呼乌龟为睿智兽物的魔法师们，认为那是野蛮的习俗。随时间缓慢恢复精力值（精力值SP+20/min）。' },
        { name: '双头绿龟挂坠', type: '饰品', cost: 28, rarity: 'rare', description: '参考双头绿乌龟的模样制成的护符。乌龟是著名的营养食材，为精力无穷的象征。据说称呼乌龟为睿智兽物的魔法师们，认为那是野蛮的习俗。随时间缓慢恢复精力值（精力值SP+30/min）。' },
        { name: '恩惠露滴护符', type: '饰品', cost: 25, rarity: 'rare', description: '用金色琥珀与黄铜制成，参考久远以前，大地上的生命承接世界树滴下的露滴时的模样。随时间缓慢恢复生命值（生命值HP+5/min）。' },
        { name: '蓝色恩惠露滴护符', type: '饰品', cost: 25, rarity: 'rare', description: '用蓝色琥珀与黄铜制成，参考久远以前，大地上的生命承接世界树滴下的露滴时的模样。随时间缓慢恢复专注值（专注值MP+5/min）。' },
        { name: '绿龟挂坠', type: '饰品', cost: 14, rarity: 'uncommon', description: '参考绿乌龟的模样制成的护符。乌龟是著名的营养食材，为精力无穷的象征。据说称呼乌龟为睿智兽物的魔法师们，认为那是野蛮的习俗。随时间缓慢恢复精力值（精力值SP+5/min）。' },
        { name: '双头绿龟挂坠', type: '饰品', cost: 28, rarity: 'rare', description: '参考双头绿乌龟的模样制成的护符。乌龟是著名的营养食材，为精力无穷的象征。据说称呼乌龟为睿智兽物的魔法师们，认为那是野蛮的习俗。随时间缓慢恢复精力值（精力值SP+10/min）。' },
        { name: '红种子坠饰', type: '饰品', cost: 27, rarity: 'rare', description: '将红琥珀与黄金制成种子的样子，是祈求世界树为之响应的美好愿景。能提升生命值的恢复能力（生命值HP回复效果+30%）。' },
        { name: '蓝种子坠饰', type: '饰品', cost: 27, rarity: 'rare', description: '将蓝琥珀与黄金制成种子的样子，是祈求世界树为之响应的美好愿景。能提升专注值的恢复能力（生命值HP回复效果+30%）。' },
        { name: '世界树的恩惠', type: '饰品', cost: 45, rarity: 'epic', description: '用黄金制成，是为久远以前，大地上的生命赞颂世界树时使用的古老饰品。能大幅提升生命值、专注值、精力值的上限（+18%最大生命值HP、最大专注值MP、最大精力值SP）。' },
        { name: '古龙盾型徽章', type: '饰品', cost: 30, rarity: 'rare', description: '有着巨大古龙浮雕的古代熟铁制护符。生命诞生，随后远古巨龙成为天空与大地的主宰，之后的生命都奉其为尊崇，因此龙的图案被视为各种庇佑的象征。能少许减免受到的物理损伤（受到的物理攻击伤害*90%）。' },
        { name: '古龙坚盾徽章', type: '饰品', cost: 42, rarity: 'epic', description: '有着巨大古龙浮雕的古代熟铁制护符。生命诞生，随后远古巨龙成为天空与大地的主宰，之后的生命都奉其为尊崇，因此龙的图案被视为各种庇佑的象征。能大幅度减免受到的物理损伤（受到的物理攻击伤害*75%）。' },
        { name: '古龙大盾徽章', type: '饰品', cost: 65, rarity: 'legendary', description: '有着巨大古龙浮雕的古代熟铁制护符。生命诞生，随后远古巨龙成为天空与大地的主宰，之后的生命都奉其为尊崇，因此龙的图案被视为各种庇佑的象征。能极大幅度减免受到的物理损伤（受到的物理攻击伤害*50%）。' },
        { name: '虹龙盾型徽章', type: '饰品', cost: 18, rarity: 'uncommon', description: '有着巨大虹彩龙浮雕的古代熟铁制护符。生命诞生，随后远古巨龙成为天空与大地的主宰，之后的生命都奉其为尊崇，因此虹彩龙的图案被视为各种庇佑的象征。能些微减免受到的所有非物理损伤（受到的所有非物理攻击伤害*95%）。' },
        { name: '虹龙坚盾徽章', type: '饰品', cost: 32, rarity: 'rare', description: '有着巨大虹彩龙浮雕的古代熟铁制护符。生命诞生，随后远古巨龙成为天空与大地的主宰，之后的生命都奉其为尊崇，因此虹彩龙的图案被视为各种庇佑的象征。能少许减免受到的所有非物理损伤（受到的所有非物理攻击伤害*90%）。' },
        { name: '虹龙大盾徽章', type: '饰品', cost: 44, rarity: 'epic', description: '有着巨大虹彩龙浮雕的古代熟铁制护符。生命诞生，随后远古巨龙成为天空与大地的主宰，之后的生命都奉其为尊崇，因此虹彩龙的图案被视为各种庇佑的象征。能大幅度减免受到的所有非物理损伤（受到的所有非物理攻击伤害*75%）。' },
        { name: '魔龙盾型徽章', type: '饰品', cost: 18, rarity: 'uncommon', description: '有着巨大魔龙浮雕的古代熟铁制护符。生命诞生，随后远古巨龙成为天空与大地的主宰，之后的生命都奉其为尊崇，因此魔龙的图案被视为抵抗魔力的象征。能少许减免受到的魔力损伤（受到的魔力攻击伤害*90%）。' },
        { name: '魔龙坚盾徽章', type: '饰品', cost: 32, rarity: 'rare', description: '有着巨大魔龙浮雕的古代熟铁制护符。生命诞生，随后远古巨龙成为天空与大地的主宰，之后的生命都奉其为尊崇，因此魔龙的图案被视为抵抗魔力的象征。能大幅度减免受到的魔力损伤（受到的魔力攻击伤害*75%）。' },
        { name: '魔龙大盾徽章', type: '饰品', cost: 44, rarity: 'epic', description: '有着巨大魔龙浮雕的古代熟鐵制護符。生命誕生，隨後遠古巨龍成為天空與大地的主宰，之後的生命都奉其為尊崇，因此魔龍的圖案被視為抵抗魔力的象徵。能極大幅度減免受到的魔力損傷（受到的魔力攻擊傷害*50%）。' },
        { name: '火龙盾型徽章', type: '饰品', cost: 18, rarity: 'uncommon', description: '有着巨大火龙浮雕的古代熟铁制护符。生命诞生，随后远古巨龙成为天空与大地的主宰，之后的生命都奉其为尊崇，因此火龙的图案被视为抵抗火焰的象征。能少许减免受到的火焰损伤（受到的火焰攻击伤害*90%）。' },
        { name: '火龙坚盾徽章', type: '饰品', cost: 32, rarity: 'rare', description: '有着巨大火龙浮雕的古代熟铁制护符。生命诞生，随后远古巨龙成为天空与大地的主宰，之后的生命都奉其为尊崇，因此火龙的图案被视为抵抗火焰的象征。能大幅度减免受到的火焰损伤（受到的火焰攻击伤害*75%）。' },
        { name: '火龙大盾徽章', type: '饰品', cost: 44, rarity: 'epic', description: '有着巨大火龙浮雕的古代熟铁制护符。生命诞生，随后远古巨龙成为天空与大地的主宰，之后的生命都奉其为尊崇，因此火龙的图案被视为抵抗火焰的象征。能极大幅度减免受到的火焰损伤（受到的火焰攻击伤害*50%）。' },
        { name: '雷龙盾型徽章', type: '饰品', cost: 18, rarity: 'uncommon', description: '有着巨大雷龙浮雕的古代熟铁制护符。生命诞生，随后远古巨龙成为天空与大地的主宰，之后的生命都奉其为尊崇，因此雷龙的图案被视为抵抗雷电的象征。能少许减免受到的雷电损伤（受到的雷电攻击伤害*90%）。' },
        { name: '雷龙坚盾徽章', type: '饰品', cost: 32, rarity: 'rare', description: '有着巨大雷龙浮雕的古代熟铁制护符。生命诞生，随后远古巨龙成为天空与大地的主宰，之后的生命都奉其为尊崇，因此雷龙的图案被视为抵抗雷电的象征。能大幅度减免受到的雷电损伤（受到的雷电攻击伤害*75%）。' },
        { name: '雷龙大盾徽章', type: '饰品', cost: 44, rarity: 'epic', description: '有着巨大雷龙浮雕的古代熟铁制护符。生命诞生，随后远古巨龙成为天空与大地的主宰，之后的生命都奉其为尊崇，因此雷龙的图案被视为抵抗雷电的象征。能极大幅度减免受到的雷电损伤（受到的雷电攻击伤害*50%）。' },
        { name: '圣龙盾型徽章', type: '饰品', cost: 18, rarity: 'uncommon', description: '有着巨大圣龙浮雕的古代熟铁制护符。生命诞生，随后远古巨龙成为天空与大地的主宰，之后的生命都奉其为尊崇，因此圣龙的图案被视为抵抗神圣的象征。能少许减免受到的神圣损伤（受到的神圣攻击伤害*90%）。' },
        { name: '圣龙坚盾徽章', type: '饰品', cost: 32, rarity: 'rare', description: '有着巨大圣龙浮雕的古代熟铁制护符。生命诞生，随后远古巨龙成为天空与大地的主宰，之后的生命都奉其为尊崇，因此圣龙的图案被视为抵抗神圣的象征。能大幅度减免受到的神圣损伤（受到的神圣攻击伤害*75%）。' },
        { name: '圣龙大盾徽章', type: '饰品', cost: 32, rarity: 'epic', description: '有着巨大圣龙浮雕的古代熟铁制护符。生命诞生，随后远古巨龙成为天空与大地的主宰，之后的生命都奉其为尊崇，因此圣龙的图案被视为抵抗神圣的象征。能大幅度减免受到的神圣损伤（受到的神圣攻击伤害*50%）。' },
        { name: '金黄色编发', type: '饰品', cost: 75, rarity: 'legendary', description: '古代神祇的遗物，此为其使用、遗留的祭品。没有人知道神祇为了什么而祈祷、许愿，又或是，为了什么而忏悔。能极大幅度减免受到的神圣损伤（受到的神圣攻击伤害*25%）。' },
        { name: '兽族免疫小角饰品', type: '饰品', cost: 17, rarity: 'uncommon', description: '据说此为兽族代代制作的古老象征。长命野兽的角会长出新芽，在不停萌发新芽之后，野兽会成为山林与原野的守护者。能抵抗各种毒素与中毒状态（30%概率免疫稀有及以下的武器造成的毒、50%概率免疫第三层级及以下生命体造成的毒）。' },
        { name: '兽族免疫大角饰品', type: '饰品', cost: 31, rarity: 'rare', description: '据说此为兽族代代制作的古老象征。长命野兽的角会长出新芽，在不停萌发新芽之后，野兽会成为山林与原野的守护者。能大幅抵抗各种毒素与中毒状态（60%概率免疫稀有及以下的武器造成的毒、75%概率免疫第三层级及以下生命体造成的毒）。' },
        { name: '兽族健壮小角饰品', type: '饰品', cost: 17, rarity: 'uncommon', description: '据说此为兽族代代制作的古老象征。长命野兽的角会长出新芽，在不停萌发新芽之后，野兽会成为山林与原野的守护者。能抵抗各种流血与冻伤效果（降低25%稀有及以下的武器造成的流血与冻伤效果、降低50%第三层级及以下生命体造成的流血与冻伤效果）。' },
        { name: '兽族健壮大角饰品', type: '饰品', cost: 31, rarity: 'rare', description: '据说此为兽族代代制作的古老象征。长命野兽的角会长出新芽，在不停萌发新芽之后，野兽会成为山林与原野的守护者。能大幅抵抗各种流血与冻伤效果（降低50%稀有及以下的武器造成的流血与冻伤效果、降低75%第三层级及以下生命体造成的流血与冻伤效果）。' },
        { name: '兽族理智小角饰品', type: '饰品', cost: 17, rarity: 'uncommon', description: '据说此为兽族代代制作的古老象征。长命野兽的角会长出新芽，在不停萌发新芽之后，野兽会成为山林与原野的守护者。能抵抗各种影响精神的效果，包括精神控制、思维错乱、惊心、魅惑、魔音等（降低50%稀有及以下的道具造成的效果、降低60%第三层级及以下生命体造成的效果）。' },
        { name: '兽族理智大角饰品', type: '饰品', cost: 31, rarity: 'rare', description: '据说此为兽族代代制作的古老象征。长命野兽的角会长出新芽，在不停萌发新芽之后，野兽会成为山林与原野的守护者。能大幅抵抗各种影响精神的效果，包括精神控制、思维错乱、惊心、魅惑、魔音等（降低75%稀有及以下的道具造成的效果、降低80%第三层级及以下生命体造成的效果）。' },
        { name: '疾病护符', type: '饰品', cost: 29, rarity: 'rare', description: '参考病死的模样制成的护符。体弱的人罹患可怕的疾病时，如若侥幸存活了下来，将不会再受此疾病的侵扰。在陷入异常负面状态后，数天时间内，遇上同样的异常负面状态时，能提升抵抗力（异常负面状态的影响*50%，可以叠加3次）。' },
        { name: '匕首护符', type: '饰品', cost: 22, rarity: 'rare', description: '以匕首与刺客的形象制成的护符。‘暗影之手’刺客与盗贼的联合公会，以无数见不得光的事物为生。在敌人未曾察觉之时发出的一击，能提升攻击力（伤害+70%）。' },
        { name: '曲剑护符', type: '饰品', cost: 22, rarity: 'rare', description: '以曲剑与剑士的形象制成的护符。那体现险中求胜的杰出剑术，据说是在过去，传说中的剑士领悟的技术。在拨开敌人武器的刹那发动攻击，能提升攻击力（伤害+50%）。' },
        { name: '双头剑护符', type: '饰品', cost: 22, rarity: 'rare', description: '以双头剑与密使的形象制成的护符。密使们继承而来的双头剑剑术，贯彻攻击招招不致命，但最后一记攻击最为强力的作法。一连串攻击的最后一击，能提升攻击力（伤害+40%）。' },
        { name: '斧护符', type: '饰品', cost: 22, rarity: 'rare', description: '以斧与战士的形象制成的护符。斧是北境战王的武器，众战士推崇王之余，也使用相同武器。他们擅长使出蓄满力量的攻击。使出蓄满全部力量的一击，能提升攻击力（伤害+30%）。' },
        { name: '锤护符', type: '饰品', cost: 22, rarity: 'rare', description: '以大槌与骑士的形象制成的护符。槌在对上持盾重甲敌人时相当有效，为狩猎骑士时的知名武器。攻击持有大盾或身披重甲的敌人，能提升攻击力（伤害+20%）。' },
        { name: '矛护符', type: '饰品', cost: 22, rarity: 'rare', description: '以矛与士兵的形象制成的护符。在埃斯塔利亚大陆，常见士兵用矛。遇上强敌时，有时能给予有效反击。在敌人发动攻击时刺击敌人，能提升攻击力（伤害+30%）。' },
        { name: '骑兵护符', type: '饰品', cost: 22, rarity: 'rare', description: '以骑枪与骑士的形象制成的护符。骑在马上的骑士十分可畏————身在高处，视野更加全面，可说是如虎添翼。骑马时，能提升攻击力（伤害+20%）。' },
        { name: '钩爪护符', type: '饰品', cost: 22, rarity: 'rare', description: '以钩爪与死士的形象制成的护符。‘暗影之手’刺客与盗贼的联合公会，以无数见不得光的事物为生。从敌人头顶跃下发动攻击，能提升攻击力（伤害+50%）。' },
        { name: '大盾护符', type: '饰品', cost: 24, rarity: 'rare', description: '以阴影中握着匕首的手为形象制成的护符。还曾荣耀的骑士们，将过去的准则奉为圭臬：要善尽守护职责，该先举起的不是剑，是盾。持盾时，能提升坚守能力（更不容易被击退、击溃、破盾）。' },
        { name: '双手剑护符', type: '饰品', cost: 24, rarity: 'rare', description: '以双手剑与战士的形象制成的护符。战士沉浸于战斗，放弃了持盾，转而双手握住大剑。能强化以双手同时握住近战武器时的攻击（攻击力提升10%）。' },
        { name: '弓护符', type: '饰品', cost: 23, rarity: 'rare', description: '以弓与兽族的形象制成的护符。兽族狩猎着野兽，野兽也狩猎着兽族。能提升弓箭的攻击力（伤害+20%）。' },
        { name: '箭护符', type: '饰品', cost: 23, rarity: 'rare', description: '以羽毛箭与铁箭组合制成的护符。选择不同种类的箭进行狩猎，兽族的猎手深谙此道。能提升弓的射程和箭的攻击力（射程+50%，攻击力提升20%）。' },
        { name: '狙击护符', type: '饰品', cost: 23, rarity: 'rare', description: '以长弓与射手的形象制成的护符。兽族的猎手会进行短暂的精密瞄准，然后一击致命。能提升精密瞄准后射击的攻击力（攻击力提升50%）。' },
        { name: '杖护符', type: '饰品', cost: 12, rarity: 'uncommon', description: '以握住学徒制式法杖的手为形象制成的护符。握住法杖的手，期盼魔法的内心，此为法术的古老起源。能提升魔法的攻击力（伤害+5%）。' },
        { name: '书护符', type: '饰品', cost: 25, rarity: 'rare', description: '以持有魔法书的手为形象制成的护符。长久以来，历代魔法师的智慧构成了伯伦斯法环联邦的无数图书馆，其中尤以“雾晶港”藏书最丰。能提升魔法的攻击力（伤害+10%）。' },
        { name: '塔护符', type: '饰品', cost: 40, rarity: 'epic', description: '以初始法杖、初始魔法书、学派魔法师塔一同为形象制成的护符。只存在过八枚的护符，那是开宗立派的传奇。能提升魔法的攻击力（伤害+20%）。' },
        { name: '咆哮链坠', type: '饰品', cost: 26, rarity: 'rare', description: '以嘶吼巨人的形象制成的青铜链坠，在远古时代，巨人是与古龙并列的强大存在。据说巨人轰然的咆哮能破坏自然————譬如引发山崩，或召来冰风暴。能强化咆哮与吐息（伤害提升20%）。' },
        { name: '炼金师护符', type: '饰品', cost: 12, rarity: 'uncommon', description: '参考炼金烧瓶的模样制成的护符，为当代所有炼金师的制式装备。炼金师有着只有他们才知道的万物变化规律。可能位在高原的边缘，或是隐藏的洞窟内，在那里，世间万物的内藏奥秘将一一展现。能强化所有炼金制品的效果（提升1%）。' },
        { name: '魔剑徽章', type: '饰品', cost: 28, rarity: 'rare', description: '在盾面有着魔剑徽章的护符。长久以来，有那么一批魔法师偏爱近战。能减少以近战武器施展魔法攻击时消耗的专注值（减少30%专注值MP消耗）。' },
        { name: '战士壶饰品', type: '饰品', cost: 28, rarity: 'rare', description: '参考承装战士灰烬的壶制成的护符。在古代，勇猛的战士死去的后，会接受火化。余下的灰烬与饰品，会装入壶中，送往战士的故乡。能提升每把近战武器专属特殊攻击的攻击力（攻击力提升20%）。' },
        { name: '山羊饰品', type: '饰品', cost: 16, rarity: 'uncommon', description: '参考山羊的角制成的护符。山羊是坚韧的象征，即使受到攻击也会坚持发动攻击。能些微减少攻击被打断或沉默的概率（10%的概率仍然能发动攻击）。' },
        { name: '大山羊饰品', type: '饰品', cost: 30, rarity: 'rare', description: '参考大山羊的角制成的护符。山羊是坚韧的象征，即使受到攻击也会坚持发动攻击。能少许减少攻击被打断或沉默的概率（20%的概率仍然能发动攻击）。' },
        { name: '裂石护符', type: '饰品', cost: 24, rarity: 'rare', description: '镇邪石是用于镇住地震的灵异石。据说当它裂开以后，城镇也随之陷入地面。但关于城镇下陷的原因，有另一种说法──那可能是星星坠落导致。能提升踢击与踏地类招式的威力（攻击力提升15%）。' },
        { name: '铜绿圆饼', type: '饰品', cost: 29, rarity: 'rare', description: '以十分沉重的锈蚀青铜制成的圆饼，非常沉重。重量代表着强度，也是守护他人的力量。装备重量越重，防御力会越高（穿戴自身体重一半的装备时增伤10%，穿戴与自身体重等重的装备时增伤20%）。' },
        { name: '友好壶', type: '饰品', cost: 48, rarity: 'epic', description: '火焰元素精灵送给朋友的罐子样式护符，历史上仅出现过三次，其中两次由大炼金术师持有。将易燃易爆的东西填入陶罐中，这便是炼金术的起源。能强化火焰与爆裂的炼金武器（伤害提升100%）。' },
        { name: '星辰碎片刀', type: '饰品', cost: 46, rarity: 'epic', description: '染血的古老星屑刀。古老的魔法师为了将自己的命运送入星间，会用这把刀划开心脏，接着步入死亡。能减少使用魔法时消耗的专注值，但减少生命值上限（减少魔法35%的专注值MP消耗，减少10%的生命值HP上限）。' },
        { name: '蓝衣舞娘', type: '饰品', cost: 46, rarity: 'epic', description: '以蓝衣舞娘的形象制成的布质人偶，非常古老，传承而来的物品。据说蓝衣舞娘是妖精，妖精将流水赐予剑士，剑士因此得以对阵古老腐败。披挂越轻，攻击力会越高（只穿一层衣物时增加20%攻击力，只穿内衣时增加50%攻击力）。' },
        { name: '魔力对蝎', type: '饰品', cost: 33, rarity: 'rare', description: '采取奇特手段偷袭的刺客们拥有的护符。参考刚蜕皮的蝎子制成，蝎螯夹着魔力色的干缩心脏。能提升魔力属性攻击力，但降低减伤率。（魔力属性攻击提升10%，受到的损伤提升10%）。' },
        { name: '火焰对蝎', type: '饰品', cost: 33, rarity: 'rare', description: '采取奇特手段偷袭的刺客们拥有的护符。参考刚蜕皮的蝎子制成，蝎螯夹着火焰色的干缩心脏。能提升火焰属性攻击力，但降低减伤率。（火焰属性攻击提升10%，受到的损伤提升10%）。' },
        { name: '雷电对蝎', type: '饰品', cost: 33, rarity: 'rare', description: '采取奇特手段偷袭的刺客们拥有的护符。参考刚蜕皮的蝎子制成，蝎螯夹着雷电色的干缩心脏。能提升雷电属性攻击力，但降低减伤率。（雷电属性攻击提升10%，受到的损伤提升10%）。' },
        { name: '神圣对蝎', type: '饰品', cost: 33, rarity: 'rare', description: '采取奇特手段偷袭的刺客们拥有的护符。参考刚蜕皮的蝎子制成，蝎螯夹着神圣色的干缩心脏。能提升神圣属性攻击力，但降低减伤率。（神圣属性攻击提升10%，受到的损伤提升10%）。' },
        { name: '红羽七刃剑', type: '饰品', cost: 34, rarity: 'rare', description: '源自古代死亡仪式的护符。红色羽毛的护符，与死亡比邻时，情绪会为之高昂————那拚命求生的模样，会让随后到来的死亡更加耀眼。在面临死亡时，能提升攻击力。（生命值HP低于20%时，攻击力提升50%）。' },
        { name: '蓝羽七刃剑', type: '饰品', cost: 34, rarity: 'rare', description: '源自古代死亡仪式的护符。蓝色羽毛的护符，与死亡比邻时，情绪会为之高昂————那拚命求生的模样，会让随后到来的死亡更加耀眼。在面临死亡时，能提升减伤率。（生命值HP低于20%时，受到的损伤*30%）。' },
        { name: '献斗剑坠饰', type: '饰品', cost: 28, rarity: 'rare', description: '过去献给战王与神祇的战斗仪式————参考用于仪式中的剑制成的护符。如今战斗仪式早已废除，北境各处的竞技场是遗留下来的产物。生命值全满时，提升攻击力（攻击力提升10%）。' },
        { name: '献斗盾坠饰', type: '饰品', cost: 28, rarity: 'rare', description: '过去献给战王与神祇的战斗仪式————参考用于仪式中的盾制成的护符。如今战斗仪式早已废除，北境各处的竞技场是遗留下来的产物。生命值全满时，提升减伤率（受到的损伤*50%）。' },
        { name: '羽翼护符', type: '饰品', cost: 19, rarity: 'uncommon', description: '以翼民的起源为形象制成的护符。在那过去，羽翼还未宽大、优美。提升闪避成功率，但增加受到的损伤（闪避提升10%，受到的损伤提升30%）。' },
        { name: '羽翼护符', type: '饰品', cost: 19, rarity: 'uncommon', description: '以翼民的起源为形象制成的护符。在过去，羽翼还未宽大、优美。提升闪避成功率，但增加受到的损伤（闪避提升10%，受到的损伤提升30%）。' },
        { name: '精制羽翼护符', type: '饰品', cost: 19, rarity: 'rare', description: '以翼民的起源为形象制成的护符。在那过去，羽翼还未宽大、优美。提升闪避成功率，但增加受到的损伤（闪避提升20%，受到的损伤提升20%）。' },
        { name: '久远羽翼护符', type: '饰品', cost: 48, rarity: 'epic', description: '以翼民的起源为形象制成的护符。在久远的过去，羽翼还未宽大、优美。提升闪避成功率，但增加受到的损伤（闪避提升30%，受到的损伤提升10%）。' },
        { name: '染红凶刀', type: '饰品', cost: 30, rarity: 'rare', description: '形状蜿蜒，染上红色的匕首。曾经发生的轰动大陆的刺杀，此为其中一把凶刃的摸样。在敌人未曾察觉之时发出的一击，能恢复生命值（能恢复85+最大生命值10%的生命值HP）。' },
        { name: '染蓝凶刀', type: '饰品', cost: 30, rarity: 'rare', description: '形状蜿蜒，染上蓝色的匕首。曾经发生的轰动大陆的刺杀，此为其中一把凶刃的摸样。在敌人未曾察觉之时发出的一击，能恢复专注值（能恢复85+最大专注值10%的专注值MP）。' },
        { name: '掠夺浮雕坠饰', type: '饰品', cost: 47, rarity: 'epic', description: '以一位席卷大陆的野心家的模样制成的护符。当司法裁决的君主发誓犯下反叛生命的亵渎之举，所有的掠夺残杀行为都受到肯定──与他的神祇作法如出一辙。当周围敌人死亡时，能恢复生命值。（一名敌人死亡后，恢复100+5%最大生命值的生命值HP）。' },
        { name: '守护之主的角', type: '饰品', cost: 47, rarity: 'epic', description: '切下山林与原野之主的角而成的物品。山林与原野之主倒下，几株嫩芽以它的角为温床，盛开发光。魔力不仅来自于群星与夜空，也来自于悠久的生命与死亡。当周围敌人死亡时，能恢复专注值。（一名敌人死亡后，恢复100+5%最大专注值的专注值MP）。' },
        { name: '圣祭襁褓', type: '饰品', cost: 45, rarity: 'epic', description: '一小块古代的祭祀制品。古代咒术与献祭的女王主持的祭祀，千刀万剐之后，神圣献祭者的遗体会用这块布包裹，庆贺他们迎来截然不同的“生”。连续攻击时，能恢复血量（用近战武器打出一套完整的连续攻击，则恢复50+5%最大生命值的生命值HP）。' },
        { name: '翼剑徽章', type: '饰品', cost: 45, rarity: 'epic', description: '参考高举曲剑的义手与簇拥义手的飞翼为形象，制成的古老护符。传说中的剑士其肢体并不完整，此为其使用黄金义手握住曲剑，对决古老腐败时的写照。攻击越是连续，越能提升攻击力（用近战武器打出一套完整的连续攻击，则本场战斗增伤10%，最多触发4次）。' },
        { name: '黄金义手', type: '饰品', cost: 80, rarity: 'legendary', description: '传说中的剑士其肢体并不完整，此为其对决古老腐败时，使用的黄金义肢。能提升敏捷属性，攻击越是连续，越能提升攻击力（敏捷属性+1，用近战武器打出一套完整的连续攻击，则本场战斗增伤10%，最多触发6次）。' },
        { name: '金色粪金龟', type: '饰品', cost: 25, rarity: 'rare', description: '以粪金龟的形象制成的精金护符。各种宝藏、贵重物品的搬运工————粪金龟被认为是屎里淘金的典范。在搜刮财宝时，更容易发现藏起来的财宝。（搜刮的钱币珠宝+20%）。' },
        { name: '银色粪金龟', type: '饰品', cost: 25, rarity: 'rare', description: '以粪金龟的形象制成的秘银护符。各种宝藏、贵重物品的搬运工————粪金龟被认为是屎里淘金的典范。在搜刮武器装备时，更容易发现藏起来的武器装备。（搜刮武器装备随机额外获取零到多件）。' },
        { name: '克雷普的小瓶子', type: '饰品', cost: 40, rarity: 'epic', description: '以“阴影之手”其中一位刺客宗师‘克雷普’命名的护符，封着暗雾的神秘小瓶子，一些“阴影之手”的刺客使用的诅咒器具。新晋杀手，在一片寂静的时刻最为心慌。能完全去除自己发出的声响，绝对不会因为脚步或动作惊动敌人。' },
        { name: '隐身面纱', type: '饰品', cost: 40, rarity: 'epic', description: '表面具有光泽的暗色布卷成的护符。此为过去的刺客大师，在刺杀之夜用于隐藏身形的部分面纱。远离敌人时，蹲下或伏卧能完全隐藏自己的身影。' },
        { name: '主人伪装镜', type: '饰品', cost: 40, rarity: 'epic', description: '映照出模糊人影的小镜子，古老的易容器具。为了欺骗，使他人相信自己也是这里原有的一员。能使自己在他人视觉与意识中像是此地的主人。' },
        { name: '长尾猫别针', type: '饰品', cost: 60, rarity: 'legendary', description: '以长尾猫的形象制成的别针。据说那是月与群星的神祇故事中出现的妖精猫，曾从星间跃下落到地面，却安然无恙。从高处落下时，能完全不受到损伤。' },
        { name: '纠缠脐带', type: '饰品', cost: 60, rarity: 'legendary', description: '歪扭成奇怪模样的神秘圆环。那是世人间隐秘的联系，无从得知来源的思维、神态、情绪、举止。自己的举止会产生变化（可以在任何场合做出符合当前状况的举止与神态，转瞬间荒原的蛮族也将变得温文尔雅彬彬有礼）。' },
        { name: '介错刀', type: '饰品', cost: 26, rarity: 'rare', description: '刀身窄短、沾满血液的短刀，已经不能作为武器使用。曾作为让受伤的战士解脱用的物品，夺走多条性命后，刀锋已有缺损，也带有一丝邪气。能提升在使出致命一击后的攻击力（一小时内提升20%攻击力，无法叠加）。' },
        { name: '圣战徽章', type: '饰品', cost: 26, rarity: 'rare', description: '参考高举的矛与火焰制成的护符，与英雄并肩作战，为圣战捐躯的人们拥有的徽章。只有坚信此为圣战的人们，才能从殒命的哀号声中，找到一丝激昂。击杀敌人时，能短暂提升攻击力（一小时内提升20%攻击力，无法叠加）。' },
        { name: '干枯花束', type: '饰品', cost: 26, rarity: 'rare', description: '惹人怜爱的干枯花束，供养在小墓碑前的物品。对深爱之人的不幸感到心伤──这情感不论身处何地，皆是如此。当自己召唤的灵魂或死者死亡时，能提升攻击力。（一小时内提升20%攻击力，无法叠加）。' },
        { name: '老翁的欢愉', type: '饰品', cost: 26, rarity: 'rare', description: '以禁触老翁欢欣的模样制成的护符。我等会献上发狂──让那癫狂之主来到世间，让所有人陷入癫狂的欢愉吧。当周围人物被精神控制或者狂乱发癫时，能提升攻击力。（一小时内提升20%攻击力，无法叠加）。' },
        { name: '融泥的欢愉', type: '饰品', cost: 26, rarity: 'rare', description: '以深眠之主熟睡时的微笑模样制成的护符。融泥是污秽尸肉最后化成的模样，痛苦在死后仍在持续，而深眠之主让融泥获得了深沉酣眠，那是永恒的安宁。当周围人物陷入睡眠时，能提升攻击力。（一小时内提升20%攻击力，无法叠加）。' },
        { name: '腐败眷属的欢愉', type: '饰品', cost: 26, rarity: 'rare', description: '以剧毒虫群欢欣的模样制成的护符。向猩红之主献上腐败吧──在遥远他方封印的神祇，回到我们这群弃子的身旁吧。当周围人物中毒时，能提升攻击力。（一小时内提升20%攻击力，无法叠加）。' },
        { name: '鲜血君王的欢愉', type: '饰品', cost: 26, rarity: 'rare', description: '以鲜血君王欢欣的模样制成的护符。向鲜血君王献上鲜血吧──王的神祇正在渴望。当周围人物流血时，能提升攻击力。（一小时内提升1%攻击力，最多叠加40次）。' },
        { name: '狂怒神兽', type: '饰品', cost: 48, rarity: 'epic', description: '久远的古代，进行祭祀时，神兽于其中舞动──参考那狂怒舞动的模样制成的护符。据说古人信仰神兽是来自上天的使者──它的愤怒会造成天空失序，而其中最显著的，就是风暴。提升风暴的攻击力（攻击力提升+30%）。' },
        { name: '星与火浮雕坠饰', type: '饰品', cost: 48, rarity: 'epic', description: '星火骑士——执掌魔剑与火剑的双剑骑士，雕着她面容凛然的肖像护符。摆出攻击架式，并维持一定时间后，能强化之后使出的攻击（维持准备攻击的动作架势1秒后，发动攻击增伤50%）。' },
        { name: '星与火浮雕坠饰', type: '饰品', cost: 48, rarity: 'epic', description: '星火骑士——执掌魔剑与火剑的双剑骑士，雕着她凛然面容的肖像护符。摆出攻击架式，并维持一定时间后，能强化之后使出的攻击（维持准备攻击的动作架势1秒后，发动攻击增伤50%）。' },
        { name: '狂龙护符', type: '饰品', cost: 90, rarity: 'legendary', description: '参考飞龙首领的模样制成的护符。飞龙的首领是裹挟着焰雷的狂龙，当他发出轰然咆哮，大地会涌出沸腾的熔岩。据说它曾挑战古龙之王，最后落得两败俱伤。提升熔岩、雷电、火焰的攻击力（熔岩攻击力+100%，雷电、火焰攻击力+60%）。' },
        { name: '王受赐护符', type: '饰品', cost: 85, rarity: 'legendary', description: '参考绝强的战王，誓约神祇并受到赐福时的模样制成的护符。王受赐露滴时气势非凡、充满魄力──据说在受赐的当下，他文风不动。誓约神祇之王，耸立于大地。提升使用恢复方法时的强韧度（神级以下的武器道具和第七层级以下的生命体无法打断你的恢复过程，但依然可以正常对你造成伤害）。' },
        { name: '亲爱的星尘', type: '饰品', cost: 95, rarity: 'legendary', description: '以老者手指轻捏星屑的模样制成的护符。塔的大法师疾呼：对星星怀抱浪漫思维、对星尘满怀爱意──能办到如此，就能成为顶尖魔法师。你呀，要去学会爱。能最大幅缩短魔法的咏唱时间，但增加受到的损伤。（魔法吟唱时间缩短到极限，只剩下必须的施法动作，受到的损伤+100%）。' },
        { name: '战王的肖像', type: '饰品', cost: 80, rarity: 'legendary', description: '以古代王者的形象制成的小肖像，这位王者是勇猛的战士，与神祇誓约。能强化蓄力的攻击（任何蓄力攻击提升35%的伤害）。' },
        { name: '战王的肖像', type: '饰品', cost: 80, rarity: 'legendary', description: '以古代王者的形象制成的小肖像，这位王者是勇猛的战士，与神祇誓约。能强化蓄力的攻击（任何蓄力攻击提升60%的伤害）。' },
        { name: '法王的肖像', type: '饰品', cost: 80, rarity: 'legendary', description: '以古代王者的形象制成的小肖像，这位王者精通魔法，与神祇相连。能大幅缩短所有法术的吟唱时间。（只留下必要的关键吟唱语句）' },
        { name: '古王护符', type: '饰品', cost: 90, rarity: 'legendary', description: '参考远古巨龙之王的形象制成的远古熟铁护符，龙是那个时代的主宰。古王的城，据说还在遥远天际的彼端矗立。能提升所有增益效果的持续时间和效果（持续时间+200%、效果+50%）。' },
        { name: '神祇', type: '饰品', cost: 70, rarity: 'legendary', description: '关于神祇传说的雕制护符。神祇，曾见过世界树全貌的存在，那是世间唯一、万物伊始。能提升体质属性（体质+1）。' },
        { name: '碎星', type: '饰品', cost: 70, rarity: 'legendary', description: '关于英雄传说的雕制护符。英雄，独自挑战并粉碎坠落的星星，那是从天而降的可怕天外生命。能提升力量属性（力量+1）。' },
        { name: '剑士', type: '饰品', cost: 70, rarity: 'legendary', description: '关于剑士传说的雕制护符。剑士，其剑技蕴藏封印古老腐败的力量，那是户枢不蠹、流水不腐。能提升敏捷属性（敏捷+1）。' },
        { name: '观星', type: '饰品', cost: 70, rarity: 'legendary', description: '关于观星传说的雕制护符。观星，仰望夜空找寻星星的轨迹，那是一段不停追赶命运的旅行。能提升智力属性（智力+1）。' },
        { name: '预言', type: '饰品', cost: 70, rarity: 'legendary', description: '关于预言传说的雕制护符。预言，毋庸置疑的静谧沉默中的奥秘，那是随后的话语，不曾存在的话语。能提升精神属性（精神+1）。' },
        { name: '古老王者的烙印', type: '饰品', cost: 150, rarity: 'mythic', description: '在极为久远的过去，连至强的王者都在世间留下了自己的一部分，此为某位古老王者的一只不朽眼眸，置入黄金丝线勾勒组成的小球。能提升智力与精神属性（体质+1、力量+1、敏捷+1）。' },
        { name: '古老神祇的烙印', type: '饰品', cost: 150, rarity: 'mythic', description: '在极为久远的过去，连高远的神祇都在世间留下了自己的一部分，此为某位古老神祇的一只不朽眼眸，置入黄金丝线勾勒组成的小球。能提升智力与精神属性（智力+2、精神+2）。' },
        { name: '牺牲细枝', type: '饰品', cost: 110, rarity: 'mythic', description: '细到仿佛一折即断的枯枝护符。世界树的一部份，在世界久远开端时剪下的树枝。死亡的瞬间出现在遥远彼方，不会丢失任何物品，生命值专注值精力值回满。但作为代价，此护符会消失。' },
        { name: '黑月', type: '饰品', cost: 200, rarity: 'mythic', description: '月与星辰的低语者・露娜的秘密宝藏，与露娜自己洁白完满的月不同，此为无数命运的尽头，那轮漆黑之月。露娜对照黑月，铸造了这枚护符。能仅限一次的，挽回某个人或事物的死亡命运。' }
      ];

      const MODAL_TABS_CONFIG = {
        equipments: [
          { name: '基础装备', data: ALL_POSSIBLE_EQUIPMENTS, isDefault: true },
          { name: '法环护符拓展', data: ALL_POSSIBLE_TALISMANS }
          { name: '护符拓展', data: ALL_POSSIBLE_TALISMANS }
        ],
        items: [
          { name: '基础物资', data: ALL_POSSIBLE_ITEMS, isDefault: true },
        ],
        skills: [
          { name: '基础技能', data: ALL_POSSIBLE_SKILLS, isDefault: true },
        ],
        redThreads: [
          { name: '基础红线对象', data: ALL_POSSIBLE_RED_THREADS, isDefault: true },
        ],
        backgrounds: [
          { name: '基础背景', data: ALL_POSSIBLE_BACKGROUNDS, isDefault: true },
        ],
      }

      const COSTS = {
        race: { '精灵': 10, '翼民': 10, '自然魔物(括号内自行编辑具体魔物/详见世界书)': 10, '亡灵种族(括号内自行编辑具体种类/详见世界书)': 10, '深渊魔族(括号内自行编辑具体种类/详见世界书)': 20, 'custom': 80 },
        identity: { '沦为奴隶': -20, '自由平民': 0, '中产阶级': 20, '贵族阶级': 40, '游荡亡灵': 0, '野生魔物(魔兽)': 0, '魔王残党': -20, 'custom': 80 },
        startLocation: {},
      };

      const ALL_DATA_SOURCES = {
          equipments: [...ALL_POSSIBLE_EQUIPMENTS, ...ALL_POSSIBLE_TALISMANS],
          items: ALL_POSSIBLE_ITEMS,
          skills: ALL_POSSIBLE_SKILLS,
          redThreads: ALL_POSSIBLE_RED_THREADS,
          backgrounds: ALL_POSSIBLE_BACKGROUNDS
      };

      const elements = {
        reincarnationPointsDisplay: document.getElementById('reincarnationPointsDisplay'),
        raceInput: document.getElementById('raceInput'), customRaceInput: document.getElementById('customRaceInput'),
        identityInput: document.getElementById('identityInput'), customIdentityInput: document.getElementById('customIdentityInput'),
        startLocationInput: document.getElementById('startLocationInput'), customStartLocationInput: document.getElementById('customStartLocationInput'),
        levelInputSlider: document.getElementById('levelInputSlider'), levelInputNumber: document.getElementById('levelInputNumber'),
        levelCostDisplay: document.getElementById('levelCostDisplay'),
        destinyPointsInputSlider: document.getElementById('destinyPointsInputSlider'), destinyPointsInputNumber: document.getElementById('destinyPointsInputNumber'),
        nameInput: document.getElementById('nameInput'), genderInput: document.getElementById('genderInput'),
        customGenderInput: document.getElementById('customGenderInput'), ageInput: document.getElementById('ageInput'),
        backgroundStory: document.getElementById('backgroundStory'),
        backgroundStoryGroup: document.getElementById('backgroundStoryGroup'),
        sendButton: document.getElementById('sendButton'), randomizeAllButton: document.getElementById('randomizeAllButton'),
        resetButton: document.getElementById('resetButton'), randomizePointsButton: document.getElementById('randomizePointsButton'),
        attributesContainer: document.querySelector('.attributes-container'), apDisplay: document.getElementById('apDisplay'),
        randomizeAttributesButton: document.getElementById('randomizeAttributesButton'),
        modal: document.getElementById('selectionModal'), modalTitle: document.getElementById('modalTitle'),
        modalOptionsList: document.getElementById('modalOptionsList'), modalConfirmBtn: document.getElementById('modalConfirmBtn'),
        modalTabsContainer: document.getElementById('modalTabsContainer'), 
        modalFilterContainer: document.getElementById('modalFilterContainer'), 
        closeBtn: document.querySelector('.close-btn'),
        equipmentsSummary: document.getElementById('equipmentsSummary'),
        itemsSummary: document.getElementById('itemsSummary'),
        skillsSummary: document.getElementById('skillsSummary'),
        redThreadsSummary: document.getElementById('redThreadsSummary'),
        backgroundsSummary: document.getElementById('backgroundsSummary'),
        reviewButton: document.getElementById('reviewButton'),
        reviewModal: document.getElementById('reviewModal'),
        reviewModalTitle: document.getElementById('reviewModalTitle'),
        reviewModalOptionsList: document.getElementById('reviewModalOptionsList'),
        reviewModalConfirmBtn: document.getElementById('reviewModalConfirmBtn'),
        reviewCloseBtn: document.getElementById('reviewCloseBtn'),
      };

      const attributes = ['力量', '敏捷', '体质', '智力', '精神'];
      let attributePoints = {};
      let selections = {
        equipments: [],
        items: [],
        skills: [],
        redThreads: [],
        backgrounds: null,
      };
      let currentOpenCategory = null;
      let activeEquipmentFilter = '全部'; 

      function updateBackgroundStoryVisibility() {
        const show = selections.backgrounds === '【自定义开局】';
        elements.backgroundStoryGroup.classList.toggle('show', show);
      }

      function openModal(category) {
        if (category === 'equipments') {
            activeEquipmentFilter = '全部'; 
        }
        currentOpenCategory = category;
        elements.modal.style.display = 'block';
        populateModal(category);
      }

      function closeModal() {
        elements.modal.style.display = 'none';
        elements.modalOptionsList.innerHTML = '';
        currentOpenCategory = null;
      }

      /**
       @param {Array} fullData 
      */

      function renderFilteredEquipmentView(fullData) {
        elements.modalFilterContainer.innerHTML = '';
        const types = ['全部', ...new Set(fullData.map(item => item.type).filter(Boolean))]; 
        
        types.forEach(type => {
            const filterBtn = document.createElement('button');
            filterBtn.className = 'modal-filter-btn';
            filterBtn.textContent = type;
            if (type === activeEquipmentFilter) {
                filterBtn.classList.add('active');
            }
            
            filterBtn.addEventListener('click', () => {
                activeEquipmentFilter = type; 
                renderFilteredEquipmentView(fullData); 
            });
            
            elements.modalFilterContainer.appendChild(filterBtn);
        });
        const filteredData = activeEquipmentFilter === '全部'
            ? fullData
            : fullData.filter(item => item.type === activeEquipmentFilter);
        populateTabContent(filteredData, 'equipments', false);
      }

      function populateModal(category) {
        if (!category) { return; } 
        let title, isRadio = false;
        let mainData; 
        let mainData;

        switch (category) {
          case 'equipments': title = '选择初始装备'; break;
          case 'items': mainData = ALL_POSSIBLE_ITEMS; title = '选择初始物品'; break;
          case 'skills': mainData = ALL_POSSIBLE_SKILLS; title = '选择初始技能'; break;
          case 'redThreads': mainData = ALL_POSSIBLE_RED_THREADS; title = '选择初始红线对象'; isRadio = true; break;
          case 'backgrounds': mainData = ALL_POSSIBLE_BACKGROUNDS; title = '选择初始背景'; isRadio = true; break;
        }

        elements.modalTitle.textContent = title;
        elements.modalTabsContainer.innerHTML = '';
        elements.modalFilterContainer.innerHTML = ''; 
        elements.modalOptionsList.innerHTML = '';
        
        const tabsConfig = MODAL_TABS_CONFIG[category];
        if (tabsConfig) {
          let defaultTabIndex = tabsConfig.findIndex(tab => tab.isDefault) || 0;
          tabsConfig.forEach((tabConfig, index) => {
            const tabElement = document.createElement('button');
            tabElement.className = 'modal-tab';
            tabElement.textContent = tabConfig.name;
            tabElement.dataset.tabIndex = index;
            tabElement.addEventListener('click', () => {
              elements.modalTabsContainer.querySelectorAll('.modal-tab').forEach(t => t.classList.remove('active'));
              tabElement.classList.add('active');
              populateTabContent(tabConfig.data, category, isRadio);

        if (tabsConfig && category === 'equipments') {
            let defaultTabIndex = tabsConfig.findIndex(tab => tab.isDefault) || 0;
          
            tabsConfig.forEach((tabConfig, index) => {
                const tabElement = document.createElement('button');
                tabElement.className = 'modal-tab';
                tabElement.textContent = tabConfig.name;
                
                tabElement.addEventListener('click', () => {
                    elements.modalTabsContainer.querySelectorAll('.modal-tab').forEach(t => t.classList.remove('active'));
                    tabElement.classList.add('active');
                    activeEquipmentFilter = '全部'; 
                    renderFilteredEquipmentView(tabConfig.data);
                });
                
                elements.modalTabsContainer.appendChild(tabElement);
            });
            elements.modalTabsContainer.appendChild(tabElement);
          });
          elements.modalTabsContainer.querySelector(`[data-tab-index="${defaultTabIndex}"]`).click();
        } else {
          populateTabContent(mainData, category, isRadio);
            elements.modalTabsContainer.children[defaultTabIndex].click();

        } else if (mainData) {
            populateTabContent(mainData, category, isRadio);
        }

        if (category === 'backgrounds') {
          updateBackgroundAvailabilityInModal();
        }
      }

      function populateTabContent(data, category, isRadio) {
        elements.modalOptionsList.innerHTML = '';
        if (!data) return; 
        const currentSelections = selections[category] || [];

        let groupByKey, groupKeyMap, groupOrder;
        if (category === 'backgrounds') {
            groupByKey = 'bgType';
            groupKeyMap = BACKGROUND_TYPE_MAP;
            groupOrder = ['通用背景', '种族限定', '地区限定'];
        } else if (category === 'redThreads') {
            groupByKey = 'type'; 
            groupKeyMap = null; 
            groupOrder = ['第一层级', '第二层级', '第三层级']; 
            groupByKey = 'type';
            groupKeyMap = null;
            groupOrder = ['第一层级', '第二层级', '第三层级'];
        } else {
            groupByKey = 'rarity'; 
            groupByKey = 'rarity';
            groupKeyMap = RARITY_MAP;
            groupOrder = ['唯一', '普通', '优良', '稀有', '史诗', '传说', '神话', '普通-战技', '普通-法术', '普通-祷告', '普通-仪式', '普通-其他'];
            groupOrder = ['唯一', '普通', '优良', '稀有','史诗', '传说', '神话', '普通-战技', '普通-法术', '普通-祷告', '普通-仪式', '普通-其他'];
        }

        const groupedData = data.reduce((acc, item) => {
          const key = item[groupByKey];
          const groupName = groupKeyMap ? (groupKeyMap[key] || '其他') : (key || '其他');
          if (!acc[groupName]) {
            acc[groupName] = [];
          }
          acc[groupName].push(item);
          return acc;
        }, {});

        const sortedGroupKeys = Object.keys(groupedData).sort((a, b) => {
          const indexA = groupOrder.indexOf(a);
          const indexB = groupOrder.indexOf(b);
          if (indexA === -1) return 1;
          if (indexB === -1) return -1;
          return indexA - indexB;
        });

        sortedGroupKeys.forEach(groupName => {
          if (groupedData[groupName].length === 0) return; 
          if (groupedData[groupName].length === 0) return;
          const groupContainer = document.createElement('div');
          groupContainer.className = 'accordion-group';
          const header = document.createElement('button');
          header.className = 'accordion-header';
          header.textContent = `${groupName} (${groupedData[groupName].length})`;
          const content = document.createElement('div');
          content.className = 'accordion-content';

          groupedData[groupName].forEach(item => {
            let itemNameHTML = item.name; 
            let itemClass = '';

            if (category === 'redThreads') {
                if (item.type === '第二层级') itemClass = 'tier-2';
                else if (item.type === '第三层级') itemClass = 'tier-3';
            } else if (item.rarity) {
                const rarityClasses = {
                    'uncommon': 'rarity-uncommon', 'rare': 'rarity-rare', 'epic': 'rarity-epic',
                    'legendary': 'rarity-legendary', 'mythic': 'rarity-mythic', 'only': 'rarity-only'
                };
                itemClass = rarityClasses[item.rarity] || '';
            }

            if (itemClass) {
                itemNameHTML = `<span class="${itemClass}">${item.name}</span>`;
            }

            const isChecked = currentSelections.includes(item.name);
            const inputType = isRadio ? 'radio' : 'checkbox';
            const costText = item.cost ? `|${item.cost}点` : '';
            const typeText = item.type ? `|${item.type}` : '';
            const label = document.createElement('label');
            label.className = 'skill-option';
            label.style.marginBottom = '8px';
            label.innerHTML = `
              <input type="${inputType}" name="${category}" value="${item.name}" data-cost="${item.cost || 0}" ${isChecked ? 'checked' : ''}>
              <div class="skill-option-content">
                  <span class="skill-main-info">
                      ${item.name} ${typeText} ${costText}
                      ${itemNameHTML} ${typeText} ${costText} 
                  </span>
                  <small class="skill-description">${item.description}</small>
              </div>
            `;
            `; 
            content.appendChild(label);
          });

          groupContainer.appendChild(header);
          groupContainer.appendChild(content);
          elements.modalOptionsList.appendChild(groupContainer);
        });
      }

      function handleModalSelectionChange(event) {
        if (!currentOpenCategory || !event.target.matches('input')) return;

        const input = event.target;
        const itemName = input.value;
        const isRadio = input.type === 'radio';

        if (isRadio) {
          if (input.checked) {
            selections[currentOpenCategory] = [itemName];
          }
        } else {
          const currentSelectionSet = new Set(selections[currentOpenCategory]);
          if (input.checked) {
            currentSelectionSet.add(itemName);
          } else {
            currentSelectionSet.delete(itemName);
          }
          selections[currentOpenCategory] = Array.from(currentSelectionSet);
        }
      }

       function handleModalConfirm() {
        if (!currentOpenCategory) return;
        updateSelectionSummary(currentOpenCategory);

        if (currentOpenCategory === 'backgrounds') {
          updateBackgroundStoryVisibility();
        }

        calculatePoints();
        closeModal();
      }

      function updateSelectionSummary(category) {
        let summaryElement, data, selectedNames;
        let cost = 0;
        let count = 0;

        switch (category) {
          case 'equipments':
            summaryElement = elements.equipmentsSummary;
            data = ALL_POSSIBLE_EQUIPMENTS;
            selectedNames = selections.equipments;
            break;
          case 'items':
            summaryElement = elements.itemsSummary;
            data = ALL_POSSIBLE_ITEMS;
            selectedNames = selections.items;
            break;
          case 'skills':
            summaryElement = elements.skillsSummary;
            data = ALL_POSSIBLE_SKILLS;
            selectedNames = selections.skills;
            break;
          case 'redThreads':
            summaryElement = elements.redThreadsSummary;
            data = ALL_POSSIBLE_RED_THREADS;
            selectedNames = selections.redThreads;
            break;
          case 'backgrounds':
            summaryElement = elements.backgroundsSummary;
            summaryElement.textContent = selections.backgrounds ? `已选: ${selections.backgrounds}` : "未选择";
            return;
        }

        count = selectedNames.length;
        selectedNames.forEach(name => {
          const item = data.find(d => d.name === name);
          if (item) cost += item.cost || 0;
        });

        summaryElement.textContent = `已选${count}件，消耗${cost}点`;
      }

      function openReviewModal() {
        elements.reviewModalOptionsList.innerHTML = '';
        const categoryTitles = {
            equipments: '⚔️ 初始装备',
            items: '🎒 初始物品',
            skills: '💫 技能选择',
            redThreads: '❤️ 初始红线对象',
            backgrounds: '🧭 初始背景'
        };
        Object.keys(categoryTitles).forEach(category => {
            const selectedNames = selections[category];
            if (!selectedNames || (Array.isArray(selectedNames) && selectedNames.length === 0)) {
                return; 
            }
            const header = document.createElement('h3');
            header.className = 'review-category-header';
            header.textContent = categoryTitles[category];
            elements.reviewModalOptionsList.appendChild(header);
            const itemsToShow = Array.isArray(selectedNames) ? selectedNames : [selectedNames];
            itemsToShow.forEach(itemName => {
                const itemData = ALL_DATA_SOURCES[category].find(d => d.name === itemName);
                if (!itemData) return;

                const isRadio = category === 'redThreads' || category === 'backgrounds';
                const label = createReviewItemLabel(itemData, category, isRadio);
                elements.reviewModalOptionsList.appendChild(label);
            });
        });

        elements.reviewModal.style.display = 'block';
      }

      function closeReviewModal() {
        elements.reviewModal.style.display = 'none';
      }

      function createReviewItemLabel(item, category, isRadio) {
          const inputType = isRadio ? 'radio' : 'checkbox';
          const costText = item.cost ? `|${item.cost}点` : '';
          const rarityText = item.rarity ? `<span class="rarity-${item.rarity}">【${RARITY_MAP[item.rarity] || item.rarity}】</span>` : '';
          const typeText = item.type ? `|${item.type}` : '';
          
          const label = document.createElement('label');
          label.className = 'skill-option';
          label.innerHTML = `
              <input type="${inputType}" name="review_${category}" value="${item.name}" data-category="${category}" checked>
              <div class="skill-option-content">
                  <span class="skill-main-info">
                      ${rarityText} ${item.name} ${typeText} ${costText}
                  </span>
                  <small class="skill-description">${item.description}</small>
              </div>
          `;
          return label;
      }

      function handleReviewConfirm() {
          const allInputs = elements.reviewModalOptionsList.querySelectorAll('input');
          const newSelections = { equipments: [], items: [], skills: [], redThreads: [], backgrounds: null };
          allInputs.forEach(input => {
              if (input.checked) {
                  const category = input.dataset.category;
                  const value = input.value;
                  if (Array.isArray(newSelections[category])) {
                      newSelections[category].push(value);
                  } else {
                      newSelections[category] = value; 
                  }
              }
          });
          selections = newSelections;
          Object.keys(ALL_DATA_SOURCES).forEach(updateSelectionSummary);
          updateBackgroundStoryVisibility();
          calculatePoints();
          closeReviewModal();
      }

      function calculatePoints() {
        let totalCost = 0;

        const selectedRace = elements.raceInput.value; if (selectedRace && COSTS.race[selectedRace]) totalCost += COSTS.race[selectedRace];
        const selectedIdentity = elements.identityInput.value; if (selectedIdentity && COSTS.identity[selectedIdentity]) totalCost += COSTS.identity[selectedIdentity];
        const selectedLocation = elements.startLocationInput.value; if (selectedLocation && COSTS.startLocation[selectedLocation]) totalCost += COSTS.startLocation[selectedLocation];

        updateAttributes();

        selections.equipments.forEach(name => { const item = ALL_POSSIBLE_EQUIPMENTS.find(d => d.name === name); if (item) totalCost += item.cost; });
        selections.items.forEach(name => { const item = ALL_POSSIBLE_ITEMS.find(d => d.name === name); if (item) totalCost += item.cost; });
        selections.skills.forEach(name => { const item = ALL_POSSIBLE_SKILLS.find(d => d.name === name); if (item) totalCost += item.cost; });
        selections.redThreads.forEach(name => { const item = ALL_POSSIBLE_RED_THREADS.find(d => d.name === name); if (item) totalCost += item.cost; });

        const pointsAfterBaseCosts = baseReincarnationPoints - totalCost;
        const maxDP = Math.max(0, pointsAfterBaseCosts * 10);
        elements.destinyPointsInputSlider.max = maxDP;
        elements.destinyPointsInputNumber.max = maxDP;

        let finalDP;
        if (pointsAfterBaseCosts < 0) {
          finalDP = 0;
          elements.destinyPointsInputSlider.dataset.manualSet = 'false';
        } else if (isInitialLoad || (parseInt(elements.destinyPointsInputNumber.value) === 0 && elements.destinyPointsInputSlider.dataset.manualSet !== 'true')) {
          finalDP = 0;
        } else if (elements.destinyPointsInputSlider.dataset.manualSet !== 'true') {
          finalDP = maxDP;
        } else {
          let currentChosenDP = parseInt(elements.destinyPointsInputNumber.value) || 0;
          finalDP = Math.min(currentChosenDP, maxDP);
        }

        elements.destinyPointsInputNumber.value = finalDP;
        elements.destinyPointsInputSlider.value = finalDP;

        const rpSpentOnDestiny = finalDP / 10;
        currentReincarnationPoints = Math.round(pointsAfterBaseCosts - rpSpentOnDestiny);
        updatePointsDisplay();
      }

      function updatePointsDisplay() {
        document.getElementById('reincarnationPointsDisplay').textContent = currentReincarnationPoints;
        document.querySelectorAll('.reincarnation-points-value').forEach(span => span.textContent = currentReincarnationPoints);
        document.querySelector('.reincarnation-points').style.color = currentReincarnationPoints < 0 ? '#ff0000' : 'var(--points-color)';
      }

      function renderAttributeControls() {
        let pressTimer;
        function startPress(isPlus, stat) {
          stopPress(); let currentDelay = 200, minDelay = 30, accelerationFactor = 0.85;
          function step() { if (handleAPChange(isPlus, stat)) { currentDelay = Math.max(minDelay, currentDelay * accelerationFactor); pressTimer = setTimeout(step, currentDelay); } }
          if (handleAPChange(isPlus, stat)) { pressTimer = setTimeout(step, 500); }
        }
        function stopPress() { clearTimeout(pressTimer); }
        function handleAPChange(isPlus, stat) {
          const remainingAP = getRemainingAP(); let changed = false;
          if (isPlus && remainingAP > 0) { attributePoints[stat]++; changed = true; }
          else if (!isPlus && attributePoints[stat] > 0) { attributePoints[stat]--; changed = true; }
          updateAttributes(); return changed;
        }
        elements.attributesContainer.innerHTML = '';
        attributes.forEach(attr => {
          attributePoints[attr] = 0;
          elements.attributesContainer.insertAdjacentHTML('beforeend', `<div class="attribute-control" data-attribute="${attr}"><span class="stat-name">${attr}</span><span class="stat-value" id="${attr}Total">4</span><div class="ap-buttons"><button class="ap-btn minus" data-stat="${attr}">-</button><input type="number" class="ap-input" id="${attr}AP" value="0" min="0" readonly><button class="ap-btn plus" data-stat="${attr}">+</button></div></div>`);
        });
        document.querySelectorAll('.ap-btn').forEach(button => {
          const stat = button.dataset.stat, isPlus = button.classList.contains('plus');
          button.addEventListener('mousedown', e => startPress(isPlus, stat));
          button.addEventListener('mouseup', stopPress); button.addEventListener('mouseleave', stopPress);
          button.addEventListener('touchstart', e => { e.preventDefault(); startPress(isPlus, stat); });
          button.addEventListener('touchend', stopPress);
        });
      }

      function getRemainingAP() {
        const availableAP = 5;
        const totalAllocatedAP = Object.values(attributePoints).reduce((sum, points) => sum + points, 0);
        return availableAP - totalAllocatedAP;
      }

      function updateAttributes() {
        const baseStat = 4;
        const availableAP = 5;
        let totalAllocatedAP = Object.values(attributePoints).reduce((sum, points) => sum + points, 0);
        if (totalAllocatedAP > availableAP) { attributes.forEach(attr => { attributePoints[attr] = 0; }); totalAllocatedAP = 0; }
        const remainingAP = availableAP - totalAllocatedAP;
        elements.apDisplay.textContent = remainingAP;
        attributes.forEach(attr => {
          const allocated = attributePoints[attr] || 0;
          const total = baseStat + allocated;
          document.getElementById(`${attr}Total`).textContent = total;
          document.getElementById(`${attr}AP`).value = allocated;
          const plusBtn = document.querySelector(`.ap-btn.plus[data-stat="${attr}"]`), minusBtn = document.querySelector(`.ap-btn.minus[data-stat="${attr}"]`);
          if (plusBtn) plusBtn.disabled = remainingAP <= 0; if (minusBtn) minusBtn.disabled = allocated <= 0;
        });
      }

      function randomizeAP() {
        attributes.forEach(attr => { attributePoints[attr] = 0; });
        let remainingAPToAllocate = getRemainingAP();
        while (remainingAPToAllocate > 0) {
          const randomStat = attributes[Math.floor(Math.random() * attributes.length)];
          attributePoints[randomStat]++; remainingAPToAllocate--;
        }
        updateAttributes();
      }

      function updateBackgroundAvailabilityInModal() {
        const selectedLocation = elements.startLocationInput.value;
        const selectedRace = elements.raceInput.value;
        const taskRadios = elements.modalOptionsList.querySelectorAll('input[name="backgrounds"]');
        taskRadios.forEach(radio => {
          const taskData = ALL_POSSIBLE_BACKGROUNDS.find(t => t.name === radio.value);
          const label = radio.closest('.skill-option');
          if (!taskData) return;
          const locationMatch = !taskData.requiredLocation || taskData.requiredLocation === selectedLocation;
          const raceMatch = !taskData.requiredRace || taskData.requiredRace === selectedRace;
          radio.disabled = !(locationMatch && raceMatch);
          label.style.opacity = radio.disabled ? '0.5' : '1';
          label.style.cursor = radio.disabled ? 'not-allowed' : 'pointer';
          if (radio.disabled && radio.checked) {
            radio.checked = false;
            selections.backgrounds = null;
            updateSelectionSummary('backgrounds');
          }
        });
      }

      function setupCustomInput(select, customInput) {
        select.addEventListener('change', () => {
          customInput.classList.toggle('show', select.value === 'custom');
          if (select.value !== 'custom') customInput.value = '';
          calculatePoints();
        });
        customInput.addEventListener('input', calculatePoints);
      }

      function randomizeAll() {
        resetAll();
        function randomizeSelect(selectElement) {
          const options = Array.from(selectElement.options).filter(opt => opt.value && opt.value !== 'custom' && !opt.disabled);
          if (options.length > 0) {
            selectElement.value = options[Math.floor(Math.random() * options.length)].value;
            selectElement.dispatchEvent(new Event('change'));
          }
        }
        elements.genderInput.value = ['男', '女'][Math.floor(Math.random() * 2)];
        randomizeSelect(elements.raceInput);
        randomizeSelect(elements.identityInput);
        randomizeSelect(elements.startLocationInput);
        elements.ageInput.value = Math.floor(Math.random() * 51) + 16;
        randomizeAP();

        calculatePoints();
        let remainingPoints = currentReincarnationPoints;

        const selectionCategories = {
          equipments: ALL_POSSIBLE_EQUIPMENTS,
          items: ALL_POSSIBLE_ITEMS,
          skills: ALL_POSSIBLE_SKILLS,
        };

        for (const category in selectionCategories) {
          const dataPool = selectionCategories[category];
          const targetCount = Math.floor(Math.random() * 3) + 1;
          let pickedCount = 0;
          const shuffledPool = [...dataPool].sort(() => 0.5 - Math.random());
          for (const item of shuffledPool) {
            if (pickedCount >= targetCount) break;
            if (remainingPoints >= item.cost) {
              selections[category].push(item.name);
              remainingPoints -= item.cost;
              pickedCount++;
            }
          }
          updateSelectionSummary(category);
        }

        const availableBackgrounds = ALL_POSSIBLE_BACKGROUNDS.filter(task => {
          const locationMatch = !task.requiredLocation || task.requiredLocation === elements.startLocationInput.value;
          const raceMatch = !task.requiredRace || task.requiredRace === elements.raceInput.value;
          return locationMatch && raceMatch;
        });
        if (availableBackgrounds.length > 0) {
          selections.backgrounds = availableBackgrounds[Math.floor(Math.random() * availableBackgrounds.length)].name;
          updateSelectionSummary('backgrounds');
        }
        updateBackgroundStoryVisibility();
        elements.destinyPointsInputSlider.dataset.manualSet = 'false';
        calculatePoints();
      }

      function resetAll() {
        ['nameInput', 'ageInput', 'customGenderInput', 'customRaceInput', 'customIdentityInput', 'customStartLocationInput', 'backgroundStory'].forEach(id => {
          elements[id].value = '';
          if (elements[id].classList.contains('custom-input')) elements[id].classList.remove('show');
        });
        ['genderInput', 'raceInput', 'identityInput', 'startLocationInput'].forEach(id => {
          elements[id].value = '';
          elements[id].dispatchEvent(new Event('change'));
        });

        attributePoints = {};
        attributes.forEach(attr => { attributePoints[attr] = 0; });
        selections = { equipments: [], items: [], skills: [], redThreads: [], backgrounds: null };

        updateBackgroundStoryVisibility();
        ['equipments', 'items', 'skills', 'redThreads', 'backgrounds'].forEach(updateSelectionSummary);
        elements.destinyPointsInputSlider.value = 0;
        elements.destinyPointsInputNumber.value = 0;
        elements.destinyPointsInputSlider.dataset.manualSet = 'false';

        baseReincarnationPoints = INITIAL_REINCARNATION_POINTS;
        calculatePoints();
      }

      function randomizePoints() {
        baseReincarnationPoints = Math.floor(100 + (Math.pow(Math.random(), 3) * (666 - 100)));
        calculatePoints();
      }

      setupCustomInput(elements.genderInput, elements.customGenderInput);
      setupCustomInput(elements.raceInput, elements.customRaceInput);
      setupCustomInput(elements.identityInput, elements.customIdentityInput);
      setupCustomInput(elements.startLocationInput, elements.customStartLocationInput);

      elements.levelInputSlider.addEventListener('input', () => { elements.levelInputNumber.value = elements.levelInputSlider.value; calculatePoints(); });
      elements.levelInputNumber.addEventListener('input', () => { let val = parseInt(elements.levelInputNumber.value) || 1; val = Math.max(1, Math.min(val, parseInt(elements.levelInputSlider.max))); elements.levelInputNumber.value = val; elements.levelInputSlider.value = val; calculatePoints(); });

      ['destinyPointsInputSlider', 'destinyPointsInputNumber'].forEach(id => {
        elements[id].addEventListener('input', () => {
          const isSlider = id.includes('Slider');
          const source = isSlider ? elements.destinyPointsInputSlider : elements.destinyPointsInputNumber;
          const target = isSlider ? elements.destinyPointsInputNumber : elements.destinyPointsInputSlider;
          target.value = source.value;
          elements.destinyPointsInputSlider.dataset.manualSet = 'true';
          calculatePoints();
        });
      });

      ['raceInput', 'identityInput', 'startLocationInput'].forEach(id => elements[id].addEventListener('change', calculatePoints));
      elements.raceInput.addEventListener('change', () => { if (selections.backgrounds) { selections.backgrounds = null; updateSelectionSummary('backgrounds'); updateBackgroundStoryVisibility(); } });
      elements.startLocationInput.addEventListener('change', () => { if (selections.backgrounds) { selections.backgrounds = null; updateSelectionSummary('backgrounds'); updateBackgroundStoryVisibility(); } });

      document.querySelectorAll('.selection-btn').forEach(btn => {
        if (btn.id === 'reviewButton') return;
        btn.addEventListener('click', () => openModal(btn.dataset.category));
      });
      elements.modalConfirmBtn.addEventListener('click', handleModalConfirm);
      elements.closeBtn.addEventListener('click', closeModal);
      window.addEventListener('click', (e) => { if (e.target == elements.modal) closeModal(); });

      elements.randomizeAllButton.addEventListener('click', randomizeAll);
      elements.resetButton.addEventListener('click', resetAll);
      elements.randomizeAttributesButton.addEventListener('click', randomizeAP);
      elements.randomizePointsButton.addEventListener('click', randomizePoints);
      elements.modalOptionsList.addEventListener('change', handleModalSelectionChange);
      elements.modalOptionsList.addEventListener('click', (event) => {
        const header = event.target.closest('.accordion-header');
        if (!header) return; 
        const currentGroup = header.parentElement;
        const isAlreadyActive = currentGroup.classList.contains('active');
        elements.modalOptionsList.querySelectorAll('.accordion-group').forEach(group => {
          group.classList.remove('active');
        });
        if (!isAlreadyActive) {
          currentGroup.classList.add('active');
        }
      });

      elements.reviewButton.addEventListener('click', openReviewModal);
      elements.reviewCloseBtn.addEventListener('click', closeReviewModal);
      elements.reviewModalConfirmBtn.addEventListener('click', handleReviewConfirm);
      window.addEventListener('click', (e) => { 
        if (e.target == elements.modal) closeModal();
        if (e.target == elements.reviewModal) closeReviewModal(); 
      });
      elements.sendButton.addEventListener('click', async () => {
        const getSelectedObjects = (category, sourceData) => selections[category].map(name => sourceData.find(d => d.name === name) || { name });
        const inputs = {
          name: elements.nameInput, gender: elements.genderInput, customGender: elements.customGenderInput,
          age: elements.ageInput, backgroundStory: elements.backgroundStory,
          race: elements.raceInput, customRace: elements.customRaceInput,
          identity: elements.identityInput, customIdentity: elements.customIdentityInput,
          startLocation: elements.startLocationInput, customStartLocation: elements.customStartLocationInput,
          level: 1, // Level is fixed
          destinyPoints: elements.destinyPointsInputNumber,
          selectedEquipmentObjects: getSelectedObjects('equipments', ALL_POSSIBLE_EQUIPMENTS),
          selectedItemObjects: getSelectedObjects('items', ALL_POSSIBLE_ITEMS),
          selectedSkillObjects: getSelectedObjects('skills', ALL_POSSIBLE_SKILLS),
          selectedRedThreadObjects: getSelectedObjects('redThreads', ALL_POSSIBLE_RED_THREADS), // FIX: This line was added
          selectedBackgroundObject: ALL_POSSIBLE_BACKGROUNDS.find(t => t.name === selections.backgrounds), // FIX: Duplicate key removed
          unallocatedAP: getRemainingAP(),
          attributes: attributes.reduce((obj, attr) => { obj[attr] = 4 + (attributePoints[attr] || 0); return obj; }, {}),
        };


        let name = inputs.name.value.trim() || '无名者';
        const gender = inputs.gender.value === 'custom' ? inputs.customGender.value.trim() : inputs.gender.value;
        const age = inputs.age.value.trim();
        const race = inputs.race.value === 'custom' ? inputs.customRace.value.trim() : inputs.race.value;
        const identity = inputs.identity.value === 'custom' ? inputs.customIdentity.value.trim() : inputs.identity.value;
        const startLocation = inputs.startLocation.value === 'custom' ? inputs.customStartLocation.value.trim() : inputs.startLocation.value;
        const backgroundStory = inputs.backgroundStory.value.trim();
        const level = inputs.level;
        const selectedBackgroundName = selections.backgrounds;

        let missing = [];
        if (selectedBackgroundName === '【自定义开局】' && !backgroundStory) {
          alert('你选择了“自定义开局”，请在“你的初始背景故事”一栏中填写你的故事。');
          elements.backgroundStory.focus();
          return;
        }
        if (!selections.backgrounds && !backgroundStory) missing.push('初始背景或背景故事');
        if (!gender) missing.push('性别'); if (!age) missing.push('年龄'); if (!race) missing.push('种族');
        if (!identity) missing.push('身份'); if (!startLocation) missing.push('起始地点');

        if (missing.length > 0) { alert(`档案中的 ${missing.join('、')} 是开启旅程的钥匙，请务必填写完整。`); return; }
        if (currentReincarnationPoints < 0) { alert(`转生点不足！你还需要 ${Math.abs(currentReincarnationPoints)}点。`); return; }

        const formatted = (label, objects) => {
          if (objects.length === 0) return `${label}: 无`;
          return `${label}:\n` + objects.map(o => `- ${o.type || ''}:${o.name}(${RARITY_MAP[o.rarity] || o.rarity || ''}) - ${o.description}`).join('\n');
        };

        let storyHook = "";
        if (backgroundStory) {
          storyHook = `\n背景故事: ${backgroundStory}`;
        } else if (inputs.selectedBackgroundObject) {
          storyHook = `\n初始背景: ${inputs.selectedBackgroundObject.name} - ${inputs.selectedBackgroundObject.description}`;
        }

        let finalDestinyPoints = parseInt(inputs.destinyPoints.value);
        if (currentReincarnationPoints > 0) {
          finalDestinyPoints += currentReincarnationPoints * 10;
        }

        let message = `角色初始信息：\n` +
          `姓名: ${name}\n性别: ${gender}\n年龄: ${age}\n种族: ${race}\n身份: ${identity}\n起始地点: ${startLocation}\n` +
          `生命层级: 第一层级/普通层级\n` +
          `初始等级: ${level}\n` +
          `初始属性: (力量: ${inputs.attributes['力量']}, 敏捷: ${inputs.attributes['敏捷']}, 体质: ${inputs.attributes['体质']}, 智力: ${inputs.attributes['智力']}, 精神: ${inputs.attributes['精神']})\n` +
          `未分配属性点: ${inputs.unallocatedAP}\n\n` +
          `${formatted('初始装备', inputs.selectedEquipmentObjects)}\n\n` +
          `${formatted('初始物品', inputs.selectedItemObjects)}\n\n` +
          `${formatted('初始技能', inputs.selectedSkillObjects)}\n\n` +
          `初始红线对象:\n${inputs.selectedRedThreadObjects.map(o => `- ${o.name} - ${o.description}`).join('\n') || '无'}\n\n` +
          `${storyHook}\n\n` +
          `- 命运点数: ${finalDestinyPoints}`;
        message += `\n\n(生成开局时，完整保留装备、物品、技能和红线对象的描述，严禁任何修改和省略，将其直接添加到系统中)`;

        if (typeof triggerSlash !== 'undefined') {
          triggerSlash(`/send ${message}`);
          elements.sendButton.textContent = '已发送!';
          setTimeout(() => { elements.sendButton.textContent = '踏上旅程'; }, 2000);
        } else {
          console.log('SillyTavern API未找到。');
          console.log(message);
          alert('未在SillyTavern环境中运行。请在控制台查看生成的数据。');
        }
      });

      renderAttributeControls();
      calculatePoints();
      updatePointsDisplay();
      updateBackgroundStoryVisibility();
      isInitialLoad = false;
    });
  </script>
</body>

</html>